!function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(){return(t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function n(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var a=function(t){return t&&t.Math==Math&&t},s=a("object"==typeof globalThis&&globalThis)||a("object"==typeof window&&window)||a("object"==typeof self&&self)||a("object"==typeof i&&i)||function(){return this}()||Function("return this")(),c=function(t){try{return!!t()}catch(t){return!0}},u=!c((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),l={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d={f:f&&!l.call({1:2},1)?function(t){var e=f(this,t);return!!e&&e.enumerable}:l},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,g=function(t){return h.call(t).slice(8,-1)},v="".split,m=c((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?v.call(t,""):Object(t)}:Object,y=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},b=function(t){return m(y(t))},_=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t,e){if(!_(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!_(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!_(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},E=function(t){return Object(y(t))},S={}.hasOwnProperty,C=Object.hasOwn||function(t,e){return S.call(E(t),e)},x=s.document,T=_(x)&&_(x.createElement),O=function(t){return T?x.createElement(t):{}},I=!u&&!c((function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,A={f:u?k:function(t,e){if(t=b(t),e=w(e,!0),I)try{return k(t,e)}catch(t){}if(C(t,e))return p(!d.f.call(t,e),t[e])}},D=function(t){if(!_(t))throw TypeError(String(t)+" is not an object");return t},P=Object.defineProperty,M={f:u?P:function(t,e,n){if(D(t),e=w(e,!0),D(n),I)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},R=u?function(t,e,n){return M.f(t,e,p(1,n))}:function(t,e,n){return t[e]=n,t},L=function(t,e){try{R(s,t,e)}catch(n){s[t]=e}return e},N="__core-js_shared__",j=s[N]||L(N,{}),q=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(t){return q.call(t)});var z,B,F,U=j.inspectSource,V=s.WeakMap,H="function"==typeof V&&/native code/.test(U(V)),G=o((function(t){(t.exports=function(t,e){return j[t]||(j[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.14.0",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})})),Q=0,W=Math.random(),Y=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+W).toString(36)},K=G("keys"),Z=function(t){return K[t]||(K[t]=Y(t))},X={},J="Object already initialized",tt=s.WeakMap;if(H||j.state){var et=j.state||(j.state=new tt),nt=et.get,rt=et.has,it=et.set;z=function(t,e){if(rt.call(et,t))throw new TypeError(J);return e.facade=t,it.call(et,t,e),e},B=function(t){return nt.call(et,t)||{}},F=function(t){return rt.call(et,t)}}else{var ot=Z("state");X[ot]=!0,z=function(t,e){if(C(t,ot))throw new TypeError(J);return e.facade=t,R(t,ot,e),e},B=function(t){return C(t,ot)?t[ot]:{}},F=function(t){return C(t,ot)}}var at,st,ct={set:z,get:B,has:F,enforce:function(t){return F(t)?B(t):z(t,{})},getterFor:function(t){return function(e){var n;if(!_(e)||(n=B(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ut=o((function(t){var e=ct.get,n=ct.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a,c=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||C(i,"name")||R(i,"name",e),(a=n(i)).source||(a.source=r.join("string"==typeof e?e:""))),t!==s?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=i:R(t,e,i)):u?t[e]=i:L(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||U(this)}))})),lt=s,ft=function(t){return"function"==typeof t?t:void 0},dt=function(t,e){return arguments.length<2?ft(lt[t])||ft(s[t]):lt[t]&&lt[t][e]||s[t]&&s[t][e]},pt=Math.ceil,ht=Math.floor,gt=function(t){return isNaN(t=+t)?0:(t>0?ht:pt)(t)},vt=Math.min,mt=function(t){return t>0?vt(gt(t),9007199254740991):0},yt=Math.max,bt=Math.min,_t=function(t,e){var n=gt(t);return n<0?yt(n+e,0):bt(n,e)},wt=function(t){return function(e,n,r){var i,o=b(e),a=mt(o.length),s=_t(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},Et={includes:wt(!0),indexOf:wt(!1)},St=Et.indexOf,Ct=function(t,e){var n,r=b(t),i=0,o=[];for(n in r)!C(X,n)&&C(r,n)&&o.push(n);for(;e.length>i;)C(r,n=e[i++])&&(~St(o,n)||o.push(n));return o},xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Tt=xt.concat("length","prototype"),Ot={f:Object.getOwnPropertyNames||function(t){return Ct(t,Tt)}},It={f:Object.getOwnPropertySymbols},kt=dt("Reflect","ownKeys")||function(t){var e=Ot.f(D(t)),n=It.f;return n?e.concat(n(t)):e},At=function(t,e){for(var n=kt(e),r=M.f,i=A.f,o=0;o<n.length;o++){var a=n[o];C(t,a)||r(t,a,i(e,a))}},Dt=/#|\.prototype\./,Pt=function(t,e){var n=Rt[Mt(t)];return n==Nt||n!=Lt&&("function"==typeof e?c(e):!!e)},Mt=Pt.normalize=function(t){return String(t).replace(Dt,".").toLowerCase()},Rt=Pt.data={},Lt=Pt.NATIVE="N",Nt=Pt.POLYFILL="P",jt=Pt,qt=A.f,zt=function(t,e){var n,r,i,o,a,c=t.target,u=t.global,l=t.stat;if(n=u?s:l?s[c]||L(c,{}):(s[c]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=qt(n,r))&&a.value:n[r],!jt(u?r:c+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;At(o,i)}(t.sham||i&&i.sham)&&R(o,"sham",!0),ut(n,r,o,t)}},Bt=dt("navigator","userAgent")||"",Ft=s.process,Ut=Ft&&Ft.versions,$t=Ut&&Ut.v8;$t?st=(at=$t.split("."))[0]<4?1:at[0]+at[1]:Bt&&(!(at=Bt.match(/Edge\/(\d+)/))||at[1]>=74)&&(at=Bt.match(/Chrome\/(\d+)/))&&(st=at[1]);var Vt,Ht=st&&+st,Gt=!!Object.getOwnPropertySymbols&&!c((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Ht&&Ht<41})),Qt=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Wt=Array.isArray||function(t){return"Array"==g(t)},Yt=Object.keys||function(t){return Ct(t,xt)},Kt=u?Object.defineProperties:function(t,e){D(t);for(var n,r=Yt(e),i=r.length,o=0;i>o;)M.f(t,n=r[o++],e[n]);return t},Zt=dt("document","documentElement"),Xt=Z("IE_PROTO"),Jt=function(){},te=function(t){return"<script>"+t+"</"+"script>"},ee=function(){try{Vt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ee=Vt?function(t){t.write(te("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Vt):((e=O("iframe")).style.display="none",Zt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(te("document.F=Object")),t.close(),t.F);for(var n=xt.length;n--;)delete ee.prototype[xt[n]];return ee()};X[Xt]=!0;var ne=Object.create||function(t,e){var n;return null!==t?(Jt.prototype=D(t),n=new Jt,Jt.prototype=null,n[Xt]=t):n=ee(),void 0===e?n:Kt(n,e)},re=Ot.f,ie={}.toString,oe="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ae={f:function(t){return oe&&"[object Window]"==ie.call(t)?function(t){try{return re(t)}catch(t){return oe.slice()}}(t):re(b(t))}},se=G("wks"),ce=s.Symbol,ue=Qt?ce:ce&&ce.withoutSetter||Y,le=function(t){return C(se,t)&&(Gt||"string"==typeof se[t])||(Gt&&C(ce,t)?se[t]=ce[t]:se[t]=ue("Symbol."+t)),se[t]},fe={f:le},de=M.f,pe=function(t){var e=lt.Symbol||(lt.Symbol={});C(e,t)||de(e,t,{value:fe.f(t)})},he=M.f,ge=le("toStringTag"),ve=function(t,e,n){t&&!C(t=n?t:t.prototype,ge)&&he(t,ge,{configurable:!0,value:e})},me=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ye=function(t,e,n){if(me(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},be=le("species"),_e=function(t,e){var n;return Wt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Wt(n.prototype)?_(n)&&null===(n=n[be])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},we=[].push,Ee=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(c,u,l,f){for(var d,p,h=E(c),g=m(h),v=ye(u,l,3),y=mt(g.length),b=0,_=f||_e,w=e?_(c,y):n||a?_(c,0):void 0;y>b;b++)if((s||b in g)&&(p=v(d=g[b],b,h),t))if(e)w[b]=p;else if(p)switch(t){case 3:return!0;case 5:return d;case 6:return b;case 2:we.call(w,d)}else switch(t){case 4:return!1;case 7:we.call(w,d)}return o?-1:r||i?i:w}},Se={forEach:Ee(0),map:Ee(1),filter:Ee(2),some:Ee(3),every:Ee(4),find:Ee(5),findIndex:Ee(6),filterOut:Ee(7)},Ce=Se.forEach,xe=Z("hidden"),Te="Symbol",Oe=le("toPrimitive"),Ie=ct.set,ke=ct.getterFor(Te),Ae=Object.prototype,De=s.Symbol,Pe=dt("JSON","stringify"),Me=A.f,Re=M.f,Le=ae.f,Ne=d.f,je=G("symbols"),qe=G("op-symbols"),ze=G("string-to-symbol-registry"),Be=G("symbol-to-string-registry"),Fe=G("wks"),Ue=s.QObject,$e=!Ue||!Ue.prototype||!Ue.prototype.findChild,Ve=u&&c((function(){return 7!=ne(Re({},"a",{get:function(){return Re(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Me(Ae,e);r&&delete Ae[e],Re(t,e,n),r&&t!==Ae&&Re(Ae,e,r)}:Re,He=function(t,e){var n=je[t]=ne(De.prototype);return Ie(n,{type:Te,tag:t,description:e}),u||(n.description=e),n},Ge=Qt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof De},Qe=function(t,e,n){t===Ae&&Qe(qe,e,n),D(t);var r=w(e,!0);return D(n),C(je,r)?(n.enumerable?(C(t,xe)&&t[xe][r]&&(t[xe][r]=!1),n=ne(n,{enumerable:p(0,!1)})):(C(t,xe)||Re(t,xe,p(1,{})),t[xe][r]=!0),Ve(t,r,n)):Re(t,r,n)},We=function(t,e){D(t);var n=b(e),r=Yt(n).concat(Xe(n));return Ce(r,(function(e){u&&!Ye.call(n,e)||Qe(t,e,n[e])})),t},Ye=function(t){var e=w(t,!0),n=Ne.call(this,e);return!(this===Ae&&C(je,e)&&!C(qe,e))&&(!(n||!C(this,e)||!C(je,e)||C(this,xe)&&this[xe][e])||n)},Ke=function(t,e){var n=b(t),r=w(e,!0);if(n!==Ae||!C(je,r)||C(qe,r)){var i=Me(n,r);return!i||!C(je,r)||C(n,xe)&&n[xe][r]||(i.enumerable=!0),i}},Ze=function(t){var e=Le(b(t)),n=[];return Ce(e,(function(t){C(je,t)||C(X,t)||n.push(t)})),n},Xe=function(t){var e=t===Ae,n=Le(e?qe:b(t)),r=[];return Ce(n,(function(t){!C(je,t)||e&&!C(Ae,t)||r.push(je[t])})),r};if(Gt||(ut((De=function(){if(this instanceof De)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Y(t),n=function(t){this===Ae&&n.call(qe,t),C(this,xe)&&C(this[xe],e)&&(this[xe][e]=!1),Ve(this,e,p(1,t))};return u&&$e&&Ve(Ae,e,{configurable:!0,set:n}),He(e,t)}).prototype,"toString",(function(){return ke(this).tag})),ut(De,"withoutSetter",(function(t){return He(Y(t),t)})),d.f=Ye,M.f=Qe,A.f=Ke,Ot.f=ae.f=Ze,It.f=Xe,fe.f=function(t){return He(le(t),t)},u&&(Re(De.prototype,"description",{configurable:!0,get:function(){return ke(this).description}}),ut(Ae,"propertyIsEnumerable",Ye,{unsafe:!0}))),zt({global:!0,wrap:!0,forced:!Gt,sham:!Gt},{Symbol:De}),Ce(Yt(Fe),(function(t){pe(t)})),zt({target:Te,stat:!0,forced:!Gt},{for:function(t){var e=String(t);if(C(ze,e))return ze[e];var n=De(e);return ze[e]=n,Be[n]=e,n},keyFor:function(t){if(!Ge(t))throw TypeError(t+" is not a symbol");if(C(Be,t))return Be[t]},useSetter:function(){$e=!0},useSimple:function(){$e=!1}}),zt({target:"Object",stat:!0,forced:!Gt,sham:!u},{create:function(t,e){return void 0===e?ne(t):We(ne(t),e)},defineProperty:Qe,defineProperties:We,getOwnPropertyDescriptor:Ke}),zt({target:"Object",stat:!0,forced:!Gt},{getOwnPropertyNames:Ze,getOwnPropertySymbols:Xe}),zt({target:"Object",stat:!0,forced:c((function(){It.f(1)}))},{getOwnPropertySymbols:function(t){return It.f(E(t))}}),Pe){var Je=!Gt||c((function(){var t=De();return"[null]"!=Pe([t])||"{}"!=Pe({a:t})||"{}"!=Pe(Object(t))}));zt({target:"JSON",stat:!0,forced:Je},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(_(e)||void 0!==t)&&!Ge(t))return Wt(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ge(e))return e}),i[1]=e,Pe.apply(null,i)}})}De.prototype[Oe]||R(De.prototype,Oe,De.prototype.valueOf),ve(De,Te),X[xe]=!0;var tn=M.f,en=s.Symbol;if(u&&"function"==typeof en&&(!("description"in en.prototype)||void 0!==en().description)){var nn={},rn=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof rn?new en(t):void 0===t?en():en(t);return""===t&&(nn[e]=!0),e};At(rn,en);var on=rn.prototype=en.prototype;on.constructor=rn;var an=on.toString,sn="Symbol(test)"==String(en("test")),cn=/^Symbol\((.*)\)[^)]+$/;tn(on,"description",{configurable:!0,get:function(){var t=_(this)?this.valueOf():this,e=an.call(t);if(C(nn,t))return"";var n=sn?e.slice(7,-1):e.replace(cn,"$1");return""===n?void 0:n}}),zt({global:!0,forced:!0},{Symbol:rn})}pe("asyncIterator"),pe("hasInstance"),pe("isConcatSpreadable"),pe("iterator"),pe("match"),pe("matchAll"),pe("replace"),pe("search"),pe("species"),pe("split"),pe("toPrimitive"),pe("toStringTag"),pe("unscopables");var un=!c((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),ln=Z("IE_PROTO"),fn=Object.prototype,dn=un?Object.getPrototypeOf:function(t){return t=E(t),C(t,ln)?t[ln]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?fn:null},pn=function(t){if(!_(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},hn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return D(n),pn(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),gn={},vn=le("iterator"),mn=Array.prototype,yn=function(t){return void 0!==t&&(gn.Array===t||mn[vn]===t)},bn={};bn[le("toStringTag")]="z";var _n="[object z]"===String(bn),wn=le("toStringTag"),En="Arguments"==g(function(){return arguments}()),Sn=_n?g:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),wn))?n:En?g(e):"Object"==(r=g(e))&&"function"==typeof e.callee?"Arguments":r},Cn=le("iterator"),xn=function(t){if(null!=t)return t[Cn]||t["@@iterator"]||gn[Sn(t)]},Tn=function(t){var e=t.return;if(void 0!==e)return D(e.call(t)).value},On=function(t,e){this.stopped=t,this.result=e},In=function(t,e,n){var r,i,o,a,s,c,u,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),h=ye(e,l,1+f+p),g=function(t){return r&&Tn(r),new On(!0,t)},v=function(t){return f?(D(t),p?h(t[0],t[1],g):h(t[0],t[1])):p?h(t,g):h(t)};if(d)r=t;else{if("function"!=typeof(i=xn(t)))throw TypeError("Target is not iterable");if(yn(i)){for(o=0,a=mt(t.length);a>o;o++)if((s=v(t[o]))&&s instanceof On)return s;return new On(!1)}r=i.call(t)}for(c=r.next;!(u=c.call(r)).done;){try{s=v(u.value)}catch(t){throw Tn(r),t}if("object"==typeof s&&s&&s instanceof On)return s}return new On(!1)},kn=function(t,e){var n=this;if(!(n instanceof kn))return new kn(t,e);hn&&(n=hn(new Error(void 0),dn(n))),void 0!==e&&R(n,"message",String(e));var r=[];return In(t,r.push,{that:r}),R(n,"errors",r),n};kn.prototype=ne(Error.prototype,{constructor:p(5,kn),message:p(5,""),name:p(5,"AggregateError")}),zt({global:!0},{AggregateError:kn});var An=function(t,e,n){var r=w(e);r in t?M.f(t,r,p(0,n)):t[r]=n},Dn=le("species"),Pn=function(t){return Ht>=51||!c((function(){var e=[];return(e.constructor={})[Dn]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Mn=le("isConcatSpreadable"),Rn=9007199254740991,Ln="Maximum allowed index exceeded",Nn=Ht>=51||!c((function(){var t=[];return t[Mn]=!1,t.concat()[0]!==t})),jn=Pn("concat"),qn=function(t){if(!_(t))return!1;var e=t[Mn];return void 0!==e?!!e:Wt(t)};zt({target:"Array",proto:!0,forced:!Nn||!jn},{concat:function(t){var e,n,r,i,o,a=E(this),s=_e(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(qn(o=-1===e?a:arguments[e])){if(c+(i=mt(o.length))>Rn)throw TypeError(Ln);for(n=0;n<i;n++,c++)n in o&&An(s,c,o[n])}else{if(c>=Rn)throw TypeError(Ln);An(s,c++,o)}return s.length=c,s}});var zn=Math.min,Bn=[].copyWithin||function(t,e){var n=E(this),r=mt(n.length),i=_t(t,r),o=_t(e,r),a=arguments.length>2?arguments[2]:void 0,s=zn((void 0===a?r:_t(a,r))-o,r-i),c=1;for(o<i&&i<o+s&&(c=-1,o+=s-1,i+=s-1);s-- >0;)o in n?n[i]=n[o]:delete n[i],i+=c,o+=c;return n},Fn=le("unscopables"),Un=Array.prototype;null==Un[Fn]&&M.f(Un,Fn,{configurable:!0,value:ne(null)});var $n=function(t){Un[Fn][t]=!0};zt({target:"Array",proto:!0},{copyWithin:Bn}),$n("copyWithin");var Vn=function(t,e){var n=[][t];return!!n&&c((function(){n.call(null,e||function(){throw 1},1)}))},Hn=Se.every,Gn=Vn("every");zt({target:"Array",proto:!0,forced:!Gn},{every:function(t){return Hn(this,t,arguments.length>1?arguments[1]:void 0)}});var Qn=function(t){for(var e=E(this),n=mt(e.length),r=arguments.length,i=_t(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:_t(o,n);a>i;)e[i++]=t;return e};zt({target:"Array",proto:!0},{fill:Qn}),$n("fill");var Wn=Se.filter,Yn=Pn("filter");zt({target:"Array",proto:!0,forced:!Yn},{filter:function(t){return Wn(this,t,arguments.length>1?arguments[1]:void 0)}});var Kn=Se.find,Zn="find",Xn=!0;Zn in[]&&Array(1).find((function(){Xn=!1})),zt({target:"Array",proto:!0,forced:Xn},{find:function(t){return Kn(this,t,arguments.length>1?arguments[1]:void 0)}}),$n(Zn);var Jn=Se.findIndex,tr="findIndex",er=!0;tr in[]&&Array(1).findIndex((function(){er=!1})),zt({target:"Array",proto:!0,forced:er},{findIndex:function(t){return Jn(this,t,arguments.length>1?arguments[1]:void 0)}}),$n(tr);var nr=function(t,e,n,r,i,o,a,s){for(var c,u=i,l=0,f=!!a&&ye(a,s,3);l<r;){if(l in n){if(c=f?f(n[l],l,e):n[l],o>0&&Wt(c))u=nr(t,e,c,mt(c.length),u,o-1)-1;else{if(u>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[u]=c}u++}l++}return u},rr=nr;zt({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=E(this),n=mt(e.length),r=_e(e,0);return r.length=rr(r,e,e,n,0,void 0===t?1:gt(t)),r}}),zt({target:"Array",proto:!0},{flatMap:function(t){var e,n=E(this),r=mt(n.length);return me(t),(e=_e(n,0)).length=rr(e,n,n,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var ir=Se.forEach,or=Vn("forEach")?[].forEach:function(t){return ir(this,t,arguments.length>1?arguments[1]:void 0)};zt({target:"Array",proto:!0,forced:[].forEach!=or},{forEach:or});var ar=function(t,e,n,r){try{return r?e(D(n)[0],n[1]):e(n)}catch(e){throw Tn(t),e}},sr=function(t){var e,n,r,i,o,a,s=E(t),c="function"==typeof this?this:Array,u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,d=xn(s),p=0;if(f&&(l=ye(l,u>2?arguments[2]:void 0,2)),null==d||c==Array&&yn(d))for(n=new c(e=mt(s.length));e>p;p++)a=f?l(s[p],p):s[p],An(n,p,a);else for(o=(i=d.call(s)).next,n=new c;!(r=o.call(i)).done;p++)a=f?ar(i,l,[r.value,p],!0):r.value,An(n,p,a);return n.length=p,n},cr=le("iterator"),ur=!1;try{var lr=0,fr={next:function(){return{done:!!lr++}},return:function(){ur=!0}};fr[cr]=function(){return this},Array.from(fr,(function(){throw 2}))}catch(t){}var dr=function(t,e){if(!e&&!ur)return!1;var n=!1;try{var r={};r[cr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},pr=!dr((function(t){Array.from(t)}));zt({target:"Array",stat:!0,forced:pr},{from:sr});var hr=Et.includes;zt({target:"Array",proto:!0},{includes:function(t){return hr(this,t,arguments.length>1?arguments[1]:void 0)}}),$n("includes");var gr=Et.indexOf,vr=[].indexOf,mr=!!vr&&1/[1].indexOf(1,-0)<0,yr=Vn("indexOf");zt({target:"Array",proto:!0,forced:mr||!yr},{indexOf:function(t){return mr?vr.apply(this,arguments)||0:gr(this,t,arguments.length>1?arguments[1]:void 0)}}),zt({target:"Array",stat:!0},{isArray:Wt});var br,_r,wr,Er=le("iterator"),Sr=!1;[].keys&&("next"in(wr=[].keys())?(_r=dn(dn(wr)))!==Object.prototype&&(br=_r):Sr=!0),(null==br||c((function(){var t={};return br[Er].call(t)!==t})))&&(br={}),C(br,Er)||R(br,Er,(function(){return this}));var Cr={IteratorPrototype:br,BUGGY_SAFARI_ITERATORS:Sr},xr=Cr.IteratorPrototype,Tr=function(){return this},Or=function(t,e,n){var r=e+" Iterator";return t.prototype=ne(xr,{next:p(1,n)}),ve(t,r,!1),gn[r]=Tr,t},Ir=Cr.IteratorPrototype,kr=Cr.BUGGY_SAFARI_ITERATORS,Ar=le("iterator"),Dr="keys",Pr="values",Mr="entries",Rr=function(){return this},Lr=function(t,e,n,r,i,o,a){Or(n,e,r);var s,c,u,l=function(t){if(t===i&&g)return g;if(!kr&&t in p)return p[t];switch(t){case Dr:case Pr:case Mr:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",d=!1,p=t.prototype,h=p[Ar]||p["@@iterator"]||i&&p[i],g=!kr&&h||l(i),v="Array"==e&&p.entries||h;if(v&&(s=dn(v.call(new t)),Ir!==Object.prototype&&s.next&&(dn(s)!==Ir&&(hn?hn(s,Ir):"function"!=typeof s[Ar]&&R(s,Ar,Rr)),ve(s,f,!0))),i==Pr&&h&&h.name!==Pr&&(d=!0,g=function(){return h.call(this)}),p[Ar]!==g&&R(p,Ar,g),gn[e]=g,i)if(c={values:l(Pr),keys:o?g:l(Dr),entries:l(Mr)},a)for(u in c)(kr||d||!(u in p))&&ut(p,u,c[u]);else zt({target:e,proto:!0,forced:kr||d},c);return c},Nr="Array Iterator",jr=ct.set,qr=ct.getterFor(Nr),zr=Lr(Array,"Array",(function(t,e){jr(this,{type:Nr,target:b(t),index:0,kind:e})}),(function(){var t=qr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");gn.Arguments=gn.Array,$n("keys"),$n("values"),$n("entries");var Br=[].join,Fr=m!=Object,Ur=Vn("join",",");zt({target:"Array",proto:!0,forced:Fr||!Ur},{join:function(t){return Br.call(b(this),void 0===t?",":t)}});var $r=Math.min,Vr=[].lastIndexOf,Hr=!!Vr&&1/[1].lastIndexOf(1,-0)<0,Gr=Vn("lastIndexOf"),Qr=Hr||!Gr?function(t){if(Hr)return Vr.apply(this,arguments)||0;var e=b(this),n=mt(e.length),r=n-1;for(arguments.length>1&&(r=$r(r,gt(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:Vr;zt({target:"Array",proto:!0,forced:Qr!==[].lastIndexOf},{lastIndexOf:Qr});var Wr=Se.map,Yr=Pn("map");zt({target:"Array",proto:!0,forced:!Yr},{map:function(t){return Wr(this,t,arguments.length>1?arguments[1]:void 0)}});var Kr=c((function(){function t(){}return!(Array.of.call(t)instanceof t)}));zt({target:"Array",stat:!0,forced:Kr},{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)An(n,t,arguments[t++]);return n.length=e,n}});var Zr=function(t){return function(e,n,r,i){me(n);var o=E(e),a=m(o),s=mt(o.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){i=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(i=n(i,a[c],c,o));return i}},Xr={left:Zr(!1),right:Zr(!0)},Jr="process"==g(s.process),ti=Xr.left,ei=Vn("reduce");zt({target:"Array",proto:!0,forced:!ei||!Jr&&Ht>79&&Ht<83},{reduce:function(t){return ti(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ni=Xr.right,ri=Vn("reduceRight");zt({target:"Array",proto:!0,forced:!ri||!Jr&&Ht>79&&Ht<83},{reduceRight:function(t){return ni(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ii=[].reverse,oi=[1,2];zt({target:"Array",proto:!0,forced:String(oi)===String(oi.reverse())},{reverse:function(){return Wt(this)&&(this.length=this.length),ii.call(this)}});var ai=Pn("slice"),si=le("species"),ci=[].slice,ui=Math.max;zt({target:"Array",proto:!0,forced:!ai},{slice:function(t,e){var n,r,i,o=b(this),a=mt(o.length),s=_t(t,a),c=_t(void 0===e?a:e,a);if(Wt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Wt(n.prototype)?_(n)&&null===(n=n[si])&&(n=void 0):n=void 0,n===Array||void 0===n))return ci.call(o,s,c);for(r=new(void 0===n?Array:n)(ui(c-s,0)),i=0;s<c;s++,i++)s in o&&An(r,i,o[s]);return r.length=i,r}});var li=Se.some,fi=Vn("some");zt({target:"Array",proto:!0,forced:!fi},{some:function(t){return li(this,t,arguments.length>1?arguments[1]:void 0)}});var di=Math.floor,pi=function(t,e){var n=t.length,r=di(n/2);return n<8?hi(t,e):gi(pi(t.slice(0,r),e),pi(t.slice(r),e),e)},hi=function(t,e){for(var n,r,i=t.length,o=1;o<i;){for(r=o,n=t[o];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==o++&&(t[r]=n)}return t},gi=function(t,e,n){for(var r=t.length,i=e.length,o=0,a=0,s=[];o<r||a<i;)o<r&&a<i?s.push(n(t[o],e[a])<=0?t[o++]:e[a++]):s.push(o<r?t[o++]:e[a++]);return s},vi=pi,mi=Bt.match(/firefox\/(\d+)/i),yi=!!mi&&+mi[1],bi=/MSIE|Trident/.test(Bt),_i=Bt.match(/AppleWebKit\/(\d+)\./),wi=!!_i&&+_i[1],Ei=[],Si=Ei.sort,Ci=c((function(){Ei.sort(void 0)})),xi=c((function(){Ei.sort(null)})),Ti=Vn("sort"),Oi=!c((function(){if(Ht)return Ht<70;if(!(yi&&yi>3)){if(bi)return!0;if(wi)return wi<603;var t,e,n,r,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Ei.push({k:e+r,v:n})}for(Ei.sort((function(t,e){return e.v-t.v})),r=0;r<Ei.length;r++)e=Ei[r].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));zt({target:"Array",proto:!0,forced:Ci||!xi||!Ti||!Oi},{sort:function(t){void 0!==t&&me(t);var e=E(this);if(Oi)return void 0===t?Si.call(e):Si.call(e,t);var n,r,i=[],o=mt(e.length);for(r=0;r<o;r++)r in e&&i.push(e[r]);for(n=(i=vi(i,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:String(e)>String(n)?1:-1}}(t))).length,r=0;r<n;)e[r]=i[r++];for(;r<o;)delete e[r++];return e}});var Ii=le("species"),ki=function(t){var e=dt(t),n=M.f;u&&e&&!e[Ii]&&n(e,Ii,{configurable:!0,get:function(){return this}})};ki("Array");var Ai=Pn("splice"),Di=Math.max,Pi=Math.min,Mi=9007199254740991,Ri="Maximum allowed length exceeded";zt({target:"Array",proto:!0,forced:!Ai},{splice:function(t,e){var n,r,i,o,a,s,c=E(this),u=mt(c.length),l=_t(t,u),f=arguments.length;if(0===f?n=r=0:1===f?(n=0,r=u-l):(n=f-2,r=Pi(Di(gt(e),0),u-l)),u+n-r>Mi)throw TypeError(Ri);for(i=_e(c,r),o=0;o<r;o++)(a=l+o)in c&&An(i,o,c[a]);if(i.length=r,n<r){for(o=l;o<u-r;o++)s=o+n,(a=o+r)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-r+n;o--)delete c[o-1]}else if(n>r)for(o=u-r;o>l;o--)s=o+n-1,(a=o+r-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<n;o++)c[o+l]=arguments[o+2];return c.length=u-r+n,i}}),$n("flat"),$n("flatMap");var Li="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ni=function(t,e,n){for(var r in e)ut(t,r,e[r],n);return t},ji=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},qi=function(t){if(void 0===t)return 0;var e=gt(t),n=mt(e);if(e!==n)throw RangeError("Wrong length or index");return n},zi=Math.abs,Bi=Math.pow,Fi=Math.floor,Ui=Math.log,$i=Math.LN2,Vi=function(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,l=23===e?Bi(2,-24)-Bi(2,-77):0,f=t<0||0===t&&1/t<0?1:0,d=0;for((t=zi(t))!=t||t===1/0?(i=t!=t?1:0,r=c):(r=Fi(Ui(t)/$i),t*(o=Bi(2,-r))<1&&(r--,o*=2),(t+=r+u>=1?l/o:l*Bi(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(t*o-1)*Bi(2,e),r+=u):(i=t*Bi(2,u-1)*Bi(2,e),r=0));e>=8;a[d++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*f,a},Hi=function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,c=r-1,u=t[c--],l=127&u;for(u>>=7;s>0;l=256*l+t[c],c--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:u?-1/0:1/0;n+=Bi(2,e),l-=a}return(u?-1:1)*n*Bi(2,l-e)},Gi=Ot.f,Qi=M.f,Wi=ct.get,Yi=ct.set,Ki="ArrayBuffer",Zi="DataView",Xi="Wrong index",Ji=s.ArrayBuffer,to=Ji,eo=s.DataView,no=eo&&eo.prototype,ro=Object.prototype,io=s.RangeError,oo=Vi,ao=Hi,so=function(t){return[255&t]},co=function(t){return[255&t,t>>8&255]},uo=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},lo=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},fo=function(t){return oo(t,23,4)},po=function(t){return oo(t,52,8)},ho=function(t,e){Qi(t.prototype,e,{get:function(){return Wi(this)[e]}})},go=function(t,e,n,r){var i=qi(n),o=Wi(t);if(i+e>o.byteLength)throw io(Xi);var a=Wi(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},vo=function(t,e,n,r,i,o){var a=qi(n),s=Wi(t);if(a+e>s.byteLength)throw io(Xi);for(var c=Wi(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),f=0;f<e;f++)c[u+f]=l[o?f:e-f-1]};if(Li){if(!c((function(){Ji(1)}))||!c((function(){new Ji(-1)}))||c((function(){return new Ji,new Ji(1.5),new Ji(NaN),Ji.name!=Ki}))){for(var mo,yo=(to=function(t){return ji(this,to),new Ji(qi(t))}).prototype=Ji.prototype,bo=Gi(Ji),_o=0;bo.length>_o;)(mo=bo[_o++])in to||R(to,mo,Ji[mo]);yo.constructor=to}hn&&dn(no)!==ro&&hn(no,ro);var wo=new eo(new to(2)),Eo=no.setInt8;wo.setInt8(0,2147483648),wo.setInt8(1,2147483649),!wo.getInt8(0)&&wo.getInt8(1)||Ni(no,{setInt8:function(t,e){Eo.call(this,t,e<<24>>24)},setUint8:function(t,e){Eo.call(this,t,e<<24>>24)}},{unsafe:!0})}else to=function(t){ji(this,to,Ki);var e=qi(t);Yi(this,{bytes:Qn.call(new Array(e),0),byteLength:e}),u||(this.byteLength=e)},eo=function(t,e,n){ji(this,eo,Zi),ji(t,to,Zi);var r=Wi(t).byteLength,i=gt(e);if(i<0||i>r)throw io("Wrong offset");if(i+(n=void 0===n?r-i:mt(n))>r)throw io("Wrong length");Yi(this,{buffer:t,byteLength:n,byteOffset:i}),u||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},u&&(ho(to,"byteLength"),ho(eo,"buffer"),ho(eo,"byteLength"),ho(eo,"byteOffset")),Ni(eo.prototype,{getInt8:function(t){return go(this,1,t)[0]<<24>>24},getUint8:function(t){return go(this,1,t)[0]},getInt16:function(t){var e=go(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=go(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return lo(go(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return lo(go(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return ao(go(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return ao(go(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){vo(this,1,t,so,e)},setUint8:function(t,e){vo(this,1,t,so,e)},setInt16:function(t,e){vo(this,2,t,co,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){vo(this,2,t,co,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){vo(this,4,t,uo,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){vo(this,4,t,uo,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){vo(this,4,t,fo,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){vo(this,8,t,po,e,arguments.length>2?arguments[2]:void 0)}});ve(to,Ki),ve(eo,Zi);var So={ArrayBuffer:to,DataView:eo},Co="ArrayBuffer",xo=So.ArrayBuffer,To=s.ArrayBuffer;zt({global:!0,forced:To!==xo},{ArrayBuffer:xo}),ki(Co);var Oo,Io=M.f,ko=s.Int8Array,Ao=ko&&ko.prototype,Do=s.Uint8ClampedArray,Po=Do&&Do.prototype,Mo=ko&&dn(ko),Ro=Ao&&dn(Ao),Lo=Object.prototype,No=Lo.isPrototypeOf,jo=le("toStringTag"),qo=Y("TYPED_ARRAY_TAG"),zo=Li&&!!hn&&"Opera"!==Sn(s.opera),Bo=!1,Fo={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Uo={BigInt64Array:8,BigUint64Array:8},$o=function(t){if(!_(t))return!1;var e=Sn(t);return C(Fo,e)||C(Uo,e)};for(Oo in Fo)s[Oo]||(zo=!1);if((!zo||"function"!=typeof Mo||Mo===Function.prototype)&&(Mo=function(){throw TypeError("Incorrect invocation")},zo))for(Oo in Fo)s[Oo]&&hn(s[Oo],Mo);if((!zo||!Ro||Ro===Lo)&&(Ro=Mo.prototype,zo))for(Oo in Fo)s[Oo]&&hn(s[Oo].prototype,Ro);if(zo&&dn(Po)!==Ro&&hn(Po,Ro),u&&!C(Ro,jo))for(Oo in Bo=!0,Io(Ro,jo,{get:function(){return _(this)?this[qo]:void 0}}),Fo)s[Oo]&&R(s[Oo],qo,Oo);var Vo={NATIVE_ARRAY_BUFFER_VIEWS:zo,TYPED_ARRAY_TAG:Bo&&qo,aTypedArray:function(t){if($o(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(hn){if(No.call(Mo,t))return t}else for(var e in Fo)if(C(Fo,Oo)){var n=s[e];if(n&&(t===n||No.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(u){if(n)for(var r in Fo){var i=s[r];if(i&&C(i.prototype,t))try{delete i.prototype[t]}catch(t){}}Ro[t]&&!n||ut(Ro,t,n?e:zo&&Ao[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(u){if(hn){if(n)for(r in Fo)if((i=s[r])&&C(i,t))try{delete i[t]}catch(t){}if(Mo[t]&&!n)return;try{return ut(Mo,t,n?e:zo&&Mo[t]||e)}catch(t){}}for(r in Fo)!(i=s[r])||i[t]&&!n||ut(i,t,e)}},isView:function(t){if(!_(t))return!1;var e=Sn(t);return"DataView"===e||C(Fo,e)||C(Uo,e)},isTypedArray:$o,TypedArray:Mo,TypedArrayPrototype:Ro};zt({target:"ArrayBuffer",stat:!0,forced:!Vo.NATIVE_ARRAY_BUFFER_VIEWS},{isView:Vo.isView});var Ho=le("species"),Go=function(t,e){var n,r=D(t).constructor;return void 0===r||null==(n=D(r)[Ho])?e:me(n)},Qo=So.ArrayBuffer,Wo=So.DataView,Yo=Qo.prototype.slice,Ko=c((function(){return!new Qo(2).slice(1,void 0).byteLength}));zt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Ko},{slice:function(t,e){if(void 0!==Yo&&void 0===e)return Yo.call(D(this),t);for(var n=D(this).byteLength,r=_t(t,n),i=_t(void 0===e?n:e,n),o=new(Go(this,Qo))(mt(i-r)),a=new Wo(this),s=new Wo(o),c=0;r<i;)s.setUint8(c++,a.getUint8(r++));return o}}),zt({global:!0,forced:!Li},{DataView:So.DataView}),zt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Zo=function(t){var e=String(y(this)),n="",r=gt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n},Xo=Math.ceil,Jo=function(t){return function(e,n,r){var i,o,a=String(y(e)),s=a.length,c=void 0===r?" ":String(r),u=mt(n);return u<=s||""==c?a:((o=Zo.call(c,Xo((i=u-s)/c.length))).length>i&&(o=o.slice(0,i)),t?a+o:o+a)}},ta={start:Jo(!1),end:Jo(!0)},ea=ta.start,na=Math.abs,ra=Date.prototype,ia=ra.getTime,oa=ra.toISOString,aa=c((function(){return"0385-07-25T07:06:39.999Z"!=oa.call(new Date(-50000000000001))}))||!c((function(){oa.call(new Date(NaN))}))?function(){if(!isFinite(ia.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+ea(na(e),r?6:4,0)+"-"+ea(t.getUTCMonth()+1,2,0)+"-"+ea(t.getUTCDate(),2,0)+"T"+ea(t.getUTCHours(),2,0)+":"+ea(t.getUTCMinutes(),2,0)+":"+ea(t.getUTCSeconds(),2,0)+"."+ea(n,3,0)+"Z"}:oa;zt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==aa},{toISOString:aa});var sa=c((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));zt({target:"Date",proto:!0,forced:sa},{toJSON:function(t){var e=E(this),n=w(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}});var ca=le("toPrimitive"),ua=Date.prototype;ca in ua||R(ua,ca,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return w(D(this),"number"!==t)}));var la=Date.prototype,fa="Invalid Date",da="toString",pa=la.toString,ha=la.getTime;new Date(NaN)+""!=fa&&ut(la,da,(function(){var t=ha.call(this);return t==t?pa.call(this):fa}));var ga=[].slice,va={},ma=function(t,e,n){if(!(e in va)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";va[e]=Function("C,a","return new C("+r.join(",")+")")}return va[e](t,n)},ya=Function.bind||function(t){var e=me(this),n=ga.call(arguments,1),r=function(){var i=n.concat(ga.call(arguments));return this instanceof r?ma(e,i.length,i):e.apply(t,i)};return _(e.prototype)&&(r.prototype=e.prototype),r};zt({target:"Function",proto:!0},{bind:ya});var ba=le("hasInstance"),_a=Function.prototype;ba in _a||M.f(_a,ba,{value:function(t){if("function"!=typeof this||!_(t))return!1;if(!_(this.prototype))return t instanceof this;for(;t=dn(t);)if(this.prototype===t)return!0;return!1}});var wa=M.f,Ea=Function.prototype,Sa=Ea.toString,Ca=/^\s*function ([^ (]*)/,xa="name";u&&!(xa in Ea)&&wa(Ea,xa,{configurable:!0,get:function(){try{return Sa.call(this).match(Ca)[1]}catch(t){return""}}}),zt({global:!0},{globalThis:s});var Ta=dt("JSON","stringify"),Oa=/[\uD800-\uDFFF]/g,Ia=/^[\uD800-\uDBFF]$/,ka=/^[\uDC00-\uDFFF]$/,Aa=function(t,e,n){var r=n.charAt(e-1),i=n.charAt(e+1);return Ia.test(t)&&!ka.test(i)||ka.test(t)&&!Ia.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},Da=c((function(){return'"\\udf06\\ud834"'!==Ta("\udf06\ud834")||'"\\udead"'!==Ta("\udead")}));Ta&&zt({target:"JSON",stat:!0,forced:Da},{stringify:function(t,e,n){var r=Ta.apply(null,arguments);return"string"==typeof r?r.replace(Oa,Aa):r}}),ve(s.JSON,"JSON",!0);var Pa=!c((function(){return Object.isExtensible(Object.preventExtensions({}))})),Ma=o((function(t){var e=M.f,n=Y("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!_(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!C(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!C(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Pa&&a.REQUIRED&&i(t)&&!C(t,n)&&o(t),t}};X[n]=!0})),Ra=function(t,e,n){var r,i;return hn&&"function"==typeof(r=e.constructor)&&r!==n&&_(i=r.prototype)&&i!==n.prototype&&hn(t,i),t},La=function(t,e,n){var r=-1!==t.indexOf("Map"),i=-1!==t.indexOf("Weak"),o=r?"set":"add",a=s[t],u=a&&a.prototype,l=a,f={},d=function(t){var e=u[t];ut(u,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(i&&!_(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return i&&!_(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(i&&!_(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(jt(t,"function"!=typeof a||!(i||u.forEach&&!c((function(){(new a).entries().next()})))))l=n.getConstructor(e,t,r,o),Ma.REQUIRED=!0;else if(jt(t,!0)){var p=new l,h=p[o](i?{}:-0,1)!=p,g=c((function(){p.has(1)})),v=dr((function(t){new a(t)})),m=!i&&c((function(){for(var t=new a,e=5;e--;)t[o](e,e);return!t.has(-0)}));v||((l=e((function(e,n){ji(e,l,t);var i=Ra(new a,e,l);return null!=n&&In(n,i[o],{that:i,AS_ENTRIES:r}),i}))).prototype=u,u.constructor=l),(g||m)&&(d("delete"),d("has"),r&&d("get")),(m||h)&&d(o),i&&u.clear&&delete u.clear}return f[t]=l,zt({global:!0,forced:l!=a},f),ve(l,t),i||n.setStrong(l,t,r),l},Na=M.f,ja=Ma.fastKey,qa=ct.set,za=ct.getterFor,Ba={getConstructor:function(t,e,n,r){var i=t((function(t,o){ji(t,i,e),qa(t,{type:e,index:ne(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=o&&In(o,t[r],{that:t,AS_ENTRIES:n})})),o=za(e),a=function(t,e,n){var r,i,a=o(t),c=s(t,e);return c?c.value=n:(a.last=c={index:i=ja(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),u?a.size++:t.size++,"F"!==i&&(a.index[i]=c)),t},s=function(t,e){var n,r=o(t),i=ja(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Ni(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=s(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),u?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=ye(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Ni(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),u&&Na(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=za(e),o=za(r);Lr(t,e,(function(t,e){qa(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ki(e)}},Fa=(La("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Ba),Math.log),Ua=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Fa(1+t)},$a=Math.acosh,Va=Math.log,Ha=Math.sqrt,Ga=Math.LN2,Qa=!$a||710!=Math.floor($a(Number.MAX_VALUE))||$a(1/0)!=1/0;zt({target:"Math",stat:!0,forced:Qa},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Va(t)+Ga:Ua(t-1+Ha(t-1)*Ha(t+1))}});var Wa=Math.asinh,Ya=Math.log,Ka=Math.sqrt;zt({target:"Math",stat:!0,forced:!(Wa&&1/Wa(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Ya(e+Ka(e*e+1)):e}});var Za=Math.atanh,Xa=Math.log;zt({target:"Math",stat:!0,forced:!(Za&&1/Za(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:Xa((1+t)/(1-t))/2}});var Ja=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1},ts=Math.abs,es=Math.pow;zt({target:"Math",stat:!0},{cbrt:function(t){return Ja(t=+t)*es(ts(t),1/3)}});var ns=Math.floor,rs=Math.log,is=Math.LOG2E;zt({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-ns(rs(t+.5)*is):32}});var os=Math.expm1,as=Math.exp,ss=!os||os(10)>22025.465794806718||os(10)<22025.465794806718||-2e-17!=os(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:as(t)-1}:os,cs=Math.cosh,us=Math.abs,ls=Math.E;zt({target:"Math",stat:!0,forced:!cs||cs(710)===1/0},{cosh:function(t){var e=ss(us(t)-1)+1;return(e+1/(e*ls*ls))*(ls/2)}}),zt({target:"Math",stat:!0,forced:ss!=Math.expm1},{expm1:ss});var fs=Math.abs,ds=Math.pow,ps=ds(2,-52),hs=ds(2,-23),gs=ds(2,127)*(2-hs),vs=ds(2,-126),ms=Math.fround||function(t){var e,n,r=fs(t),i=Ja(t);return r<vs?i*(r/vs/hs+1/ps-1/ps)*vs*hs:(n=(e=(1+hs/ps)*r)-(e-r))>gs||n!=n?i*(1/0):i*n};zt({target:"Math",stat:!0},{fround:ms});var ys=Math.hypot,bs=Math.abs,_s=Math.sqrt,ws=!!ys&&ys(1/0,NaN)!==1/0;zt({target:"Math",stat:!0,forced:ws},{hypot:function(t,e){for(var n,r,i=0,o=0,a=arguments.length,s=0;o<a;)s<(n=bs(arguments[o++]))?(i=i*(r=s/n)*r+1,s=n):i+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*_s(i)}});var Es=Math.imul,Ss=c((function(){return-5!=Es(4294967295,5)||2!=Es.length}));zt({target:"Math",stat:!0,forced:Ss},{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}});var Cs=Math.log,xs=Math.LOG10E;zt({target:"Math",stat:!0},{log10:function(t){return Cs(t)*xs}}),zt({target:"Math",stat:!0},{log1p:Ua});var Ts=Math.log,Os=Math.LN2;zt({target:"Math",stat:!0},{log2:function(t){return Ts(t)/Os}}),zt({target:"Math",stat:!0},{sign:Ja});var Is=Math.abs,ks=Math.exp,As=Math.E,Ds=c((function(){return-2e-17!=Math.sinh(-2e-17)}));zt({target:"Math",stat:!0,forced:Ds},{sinh:function(t){return Is(t=+t)<1?(ss(t)-ss(-t))/2:(ks(t-1)-ks(-t-1))*(As/2)}});var Ps=Math.exp;zt({target:"Math",stat:!0},{tanh:function(t){var e=ss(t=+t),n=ss(-t);return e==1/0?1:n==1/0?-1:(e-n)/(Ps(t)+Ps(-t))}}),ve(Math,"Math",!0);var Ms=Math.ceil,Rs=Math.floor;zt({target:"Math",stat:!0},{trunc:function(t){return(t>0?Rs:Ms)(t)}});var Ls="\t\n\v\f\r                　\u2028\u2029\ufeff",Ns="["+Ls+"]",js=RegExp("^"+Ns+Ns+"*"),qs=RegExp(Ns+Ns+"*$"),zs=function(t){return function(e){var n=String(y(e));return 1&t&&(n=n.replace(js,"")),2&t&&(n=n.replace(qs,"")),n}},Bs={start:zs(1),end:zs(2),trim:zs(3)},Fs=Ot.f,Us=A.f,$s=M.f,Vs=Bs.trim,Hs="Number",Gs=s.Number,Qs=Gs.prototype,Ws=g(ne(Qs))==Hs,Ys=function(t){var e,n,r,i,o,a,s,c,u=w(t,!1);if("string"==typeof u&&u.length>2)if(43===(e=(u=Vs(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>i)return NaN;return parseInt(o,r)}return+u};if(jt(Hs,!Gs(" 0o1")||!Gs("0b1")||Gs("+0x1"))){for(var Ks,Zs=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Zs&&(Ws?c((function(){Qs.valueOf.call(n)})):g(n)!=Hs)?Ra(new Gs(Ys(e)),n,Zs):Ys(e)},Xs=u?Fs(Gs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Js=0;Xs.length>Js;Js++)C(Gs,Ks=Xs[Js])&&!C(Zs,Ks)&&$s(Zs,Ks,Us(Gs,Ks));Zs.prototype=Qs,Qs.constructor=Zs,ut(s,Hs,Zs)}zt({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var tc=s.isFinite,ec=Number.isFinite||function(t){return"number"==typeof t&&tc(t)};zt({target:"Number",stat:!0},{isFinite:ec});var nc=Math.floor,rc=function(t){return!_(t)&&isFinite(t)&&nc(t)===t};zt({target:"Number",stat:!0},{isInteger:rc}),zt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var ic=Math.abs;zt({target:"Number",stat:!0},{isSafeInteger:function(t){return rc(t)&&ic(t)<=9007199254740991}}),zt({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),zt({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var oc=Bs.trim,ac=s.parseFloat,sc=1/ac(Ls+"-0")!=-1/0?function(t){var e=oc(String(t)),n=ac(e);return 0===n&&"-"==e.charAt(0)?-0:n}:ac;zt({target:"Number",stat:!0,forced:Number.parseFloat!=sc},{parseFloat:sc});var cc=Bs.trim,uc=s.parseInt,lc=/^[+-]?0[Xx]/,fc=8!==uc(Ls+"08")||22!==uc(Ls+"0x16")?function(t,e){var n=cc(String(t));return uc(n,e>>>0||(lc.test(n)?16:10))}:uc;zt({target:"Number",stat:!0,forced:Number.parseInt!=fc},{parseInt:fc});var dc=function(t){if("number"!=typeof t&&"Number"!=g(t))throw TypeError("Incorrect invocation");return+t},pc=1..toFixed,hc=Math.floor,gc=function(t,e,n){return 0===e?n:e%2==1?gc(t,e-1,n*t):gc(t*t,e/2,n)},vc=function(t,e,n){for(var r=-1,i=n;++r<6;)i+=e*t[r],t[r]=i%1e7,i=hc(i/1e7)},mc=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=hc(r/e),r=r%e*1e7},yc=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+Zo.call("0",7-r.length)+r}return n},bc=pc&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){pc.call({})}));zt({target:"Number",proto:!0,forced:bc},{toFixed:function(t){var e,n,r,i,o=dc(this),a=gt(t),s=[0,0,0,0,0,0],c="",u="0";if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*gc(2,69,1))-69)<0?o*gc(2,-e,1):o/gc(2,e,1),n*=4503599627370496,(e=52-e)>0){for(vc(s,0,n),r=a;r>=7;)vc(s,1e7,0),r-=7;for(vc(s,gc(10,r,1),0),r=e-1;r>=23;)mc(s,1<<23),r-=23;mc(s,1<<r),vc(s,1,1),mc(s,2),u=yc(s)}else vc(s,0,n),vc(s,1<<-e,0),u=yc(s)+Zo.call("0",a);return u=a>0?c+((i=u.length)<=a?"0."+Zo.call("0",a-i)+u:u.slice(0,i-a)+"."+u.slice(i-a)):c+u}});var _c=1..toPrecision,wc=c((function(){return"1"!==_c.call(1,void 0)}))||!c((function(){_c.call({})}));zt({target:"Number",proto:!0,forced:wc},{toPrecision:function(t){return void 0===t?_c.call(dc(this)):_c.call(dc(this),t)}});var Ec=Object.assign,Sc=Object.defineProperty,Cc=!Ec||c((function(){if(u&&1!==Ec({b:1},Ec(Sc({},"a",{enumerable:!0,get:function(){Sc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Ec({},t)[n]||Yt(Ec({},e)).join("")!=r}))?function(t,e){for(var n=E(t),r=arguments.length,i=1,o=It.f,a=d.f;r>i;)for(var s,c=m(arguments[i++]),l=o?Yt(c).concat(o(c)):Yt(c),f=l.length,p=0;f>p;)s=l[p++],u&&!a.call(c,s)||(n[s]=c[s]);return n}:Ec;zt({target:"Object",stat:!0,forced:Object.assign!==Cc},{assign:Cc}),zt({target:"Object",stat:!0,sham:!u},{create:ne});var xc=!c((function(){if(!(wi&&wi<535)){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete s[t]}}));u&&zt({target:"Object",proto:!0,forced:xc},{__defineGetter__:function(t,e){M.f(E(this),t,{get:me(e),enumerable:!0,configurable:!0})}}),zt({target:"Object",stat:!0,forced:!u,sham:!u},{defineProperties:Kt}),zt({target:"Object",stat:!0,forced:!u,sham:!u},{defineProperty:M.f}),u&&zt({target:"Object",proto:!0,forced:xc},{__defineSetter__:function(t,e){M.f(E(this),t,{set:me(e),enumerable:!0,configurable:!0})}});var Tc=d.f,Oc=function(t){return function(e){for(var n,r=b(e),i=Yt(r),o=i.length,a=0,s=[];o>a;)n=i[a++],u&&!Tc.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},Ic={entries:Oc(!0),values:Oc(!1)},kc=Ic.entries;zt({target:"Object",stat:!0},{entries:function(t){return kc(t)}});var Ac=Ma.onFreeze,Dc=Object.freeze,Pc=c((function(){Dc(1)}));zt({target:"Object",stat:!0,forced:Pc,sham:!Pa},{freeze:function(t){return Dc&&_(t)?Dc(Ac(t)):t}}),zt({target:"Object",stat:!0},{fromEntries:function(t){var e={};return In(t,(function(t,n){An(e,t,n)}),{AS_ENTRIES:!0}),e}});var Mc=A.f,Rc=c((function(){Mc(1)}));zt({target:"Object",stat:!0,forced:!u||Rc,sham:!u},{getOwnPropertyDescriptor:function(t,e){return Mc(b(t),e)}}),zt({target:"Object",stat:!0,sham:!u},{getOwnPropertyDescriptors:function(t){for(var e,n,r=b(t),i=A.f,o=kt(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&An(a,e,n);return a}});var Lc=ae.f,Nc=c((function(){return!Object.getOwnPropertyNames(1)}));zt({target:"Object",stat:!0,forced:Nc},{getOwnPropertyNames:Lc});var jc=c((function(){dn(1)}));zt({target:"Object",stat:!0,forced:jc,sham:!un},{getPrototypeOf:function(t){return dn(E(t))}});var qc=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};zt({target:"Object",stat:!0},{is:qc});var zc=Object.isExtensible,Bc=c((function(){zc(1)}));zt({target:"Object",stat:!0,forced:Bc},{isExtensible:function(t){return!!_(t)&&(!zc||zc(t))}});var Fc=Object.isFrozen,Uc=c((function(){Fc(1)}));zt({target:"Object",stat:!0,forced:Uc},{isFrozen:function(t){return!_(t)||!!Fc&&Fc(t)}});var $c=Object.isSealed,Vc=c((function(){$c(1)}));zt({target:"Object",stat:!0,forced:Vc},{isSealed:function(t){return!_(t)||!!$c&&$c(t)}});var Hc=c((function(){Yt(1)}));zt({target:"Object",stat:!0,forced:Hc},{keys:function(t){return Yt(E(t))}});var Gc=A.f;u&&zt({target:"Object",proto:!0,forced:xc},{__lookupGetter__:function(t){var e,n=E(this),r=w(t,!0);do{if(e=Gc(n,r))return e.get}while(n=dn(n))}});var Qc=A.f;u&&zt({target:"Object",proto:!0,forced:xc},{__lookupSetter__:function(t){var e,n=E(this),r=w(t,!0);do{if(e=Qc(n,r))return e.set}while(n=dn(n))}});var Wc=Ma.onFreeze,Yc=Object.preventExtensions,Kc=c((function(){Yc(1)}));zt({target:"Object",stat:!0,forced:Kc,sham:!Pa},{preventExtensions:function(t){return Yc&&_(t)?Yc(Wc(t)):t}});var Zc=Ma.onFreeze,Xc=Object.seal,Jc=c((function(){Xc(1)}));zt({target:"Object",stat:!0,forced:Jc,sham:!Pa},{seal:function(t){return Xc&&_(t)?Xc(Zc(t)):t}}),zt({target:"Object",stat:!0},{setPrototypeOf:hn});var tu=_n?{}.toString:function(){return"[object "+Sn(this)+"]"};_n||ut(Object.prototype,"toString",tu,{unsafe:!0});var eu=Ic.values;zt({target:"Object",stat:!0},{values:function(t){return eu(t)}}),zt({global:!0,forced:parseFloat!=sc},{parseFloat:sc}),zt({global:!0,forced:parseInt!=fc},{parseInt:fc});var nu,ru,iu,ou=s.Promise,au=/(?:iphone|ipod|ipad).*applewebkit/i.test(Bt),su=s.location,cu=s.setImmediate,uu=s.clearImmediate,lu=s.process,fu=s.MessageChannel,du=s.Dispatch,pu=0,hu={},gu="onreadystatechange",vu=function(t){if(hu.hasOwnProperty(t)){var e=hu[t];delete hu[t],e()}},mu=function(t){return function(){vu(t)}},yu=function(t){vu(t.data)},bu=function(t){s.postMessage(t+"",su.protocol+"//"+su.host)};cu&&uu||(cu=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return hu[++pu]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},nu(pu),pu},uu=function(t){delete hu[t]},Jr?nu=function(t){lu.nextTick(mu(t))}:du&&du.now?nu=function(t){du.now(mu(t))}:fu&&!au?(iu=(ru=new fu).port2,ru.port1.onmessage=yu,nu=ye(iu.postMessage,iu,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&su&&"file:"!==su.protocol&&!c(bu)?(nu=bu,s.addEventListener("message",yu,!1)):nu=gu in O("script")?function(t){Zt.appendChild(O("script")).onreadystatechange=function(){Zt.removeChild(this),vu(t)}}:function(t){setTimeout(mu(t),0)});var _u,wu,Eu,Su,Cu,xu,Tu,Ou,Iu={set:cu,clear:uu},ku=/web0s(?!.*chrome)/i.test(Bt),Au=A.f,Du=Iu.set,Pu=s.MutationObserver||s.WebKitMutationObserver,Mu=s.document,Ru=s.process,Lu=s.Promise,Nu=Au(s,"queueMicrotask"),ju=Nu&&Nu.value;ju||(_u=function(){var t,e;for(Jr&&(t=Ru.domain)&&t.exit();wu;){e=wu.fn,wu=wu.next;try{e()}catch(t){throw wu?Su():Eu=void 0,t}}Eu=void 0,t&&t.enter()},au||Jr||ku||!Pu||!Mu?Lu&&Lu.resolve?((Tu=Lu.resolve(void 0)).constructor=Lu,Ou=Tu.then,Su=function(){Ou.call(Tu,_u)}):Su=Jr?function(){Ru.nextTick(_u)}:function(){Du.call(s,_u)}:(Cu=!0,xu=Mu.createTextNode(""),new Pu(_u).observe(xu,{characterData:!0}),Su=function(){xu.data=Cu=!Cu}));var qu,zu,Bu,Fu,Uu=ju||function(t){var e={fn:t,next:void 0};Eu&&(Eu.next=e),wu||(wu=e,Su()),Eu=e},$u=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=me(e),this.reject=me(n)},Vu={f:function(t){return new $u(t)}},Hu=function(t,e){if(D(t),_(e)&&e.constructor===t)return e;var n=Vu.f(t);return(0,n.resolve)(e),n.promise},Gu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Qu="object"==typeof window,Wu=Iu.set,Yu=le("species"),Ku="Promise",Zu=ct.get,Xu=ct.set,Ju=ct.getterFor(Ku),tl=ou&&ou.prototype,el=ou,nl=tl,rl=s.TypeError,il=s.document,ol=s.process,al=Vu.f,sl=al,cl=!!(il&&il.createEvent&&s.dispatchEvent),ul="function"==typeof PromiseRejectionEvent,ll="unhandledrejection",fl=!1,dl=jt(Ku,(function(){var t=U(el)!==String(el);if(!t&&66===Ht)return!0;if(Ht>=51&&/native code/.test(el))return!1;var e=new el((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};return(e.constructor={})[Yu]=n,!(fl=e.then((function(){}))instanceof n)||!t&&Qu&&!ul})),pl=dl||!dr((function(t){el.all(t).catch((function(){}))})),hl=function(t){var e;return!(!_(t)||"function"!=typeof(e=t.then))&&e},gl=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Uu((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,f=u.resolve,d=u.reject,p=u.domain;try{l?(i||(2===t.rejection&&bl(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?d(rl("Promise-chain cycle")):(s=hl(a))?s.call(a,f,d):f(a)):d(r)}catch(t){p&&!c&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&ml(t)}))}},vl=function(t,e,n){var r,i;cl?((r=il.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),s.dispatchEvent(r)):r={promise:e,reason:n},!ul&&(i=s["on"+t])?i(r):t===ll&&function(t,e){var n=s.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},ml=function(t){Wu.call(s,(function(){var e,n=t.facade,r=t.value;if(yl(t)&&(e=Gu((function(){Jr?ol.emit("unhandledRejection",r,n):vl(ll,n,r)})),t.rejection=Jr||yl(t)?2:1,e.error))throw e.value}))},yl=function(t){return 1!==t.rejection&&!t.parent},bl=function(t){Wu.call(s,(function(){var e=t.facade;Jr?ol.emit("rejectionHandled",e):vl("rejectionhandled",e,t.value)}))},_l=function(t,e,n){return function(r){t(e,r,n)}},wl=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,gl(t,!0))},El=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw rl("Promise can't be resolved itself");var r=hl(e);r?Uu((function(){var n={done:!1};try{r.call(e,_l(El,n,t),_l(wl,n,t))}catch(e){wl(n,e,t)}})):(t.value=e,t.state=1,gl(t,!1))}catch(e){wl({done:!1},e,t)}}};if(dl&&(nl=(el=function(t){ji(this,el,Ku),me(t),qu.call(this);var e=Zu(this);try{t(_l(El,e),_l(wl,e))}catch(t){wl(e,t)}}).prototype,(qu=function(t){Xu(this,{type:Ku,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ni(nl,{then:function(t,e){var n=Ju(this),r=al(Go(this,el));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Jr?ol.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&gl(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),zu=function(){var t=new qu,e=Zu(t);this.promise=t,this.resolve=_l(El,e),this.reject=_l(wl,e)},Vu.f=al=function(t){return t===el||t===Bu?new zu(t):sl(t)},"function"==typeof ou&&tl!==Object.prototype)){Fu=tl.then,fl||(ut(tl,"then",(function(t,e){var n=this;return new el((function(t,e){Fu.call(n,t,e)})).then(t,e)}),{unsafe:!0}),ut(tl,"catch",nl.catch,{unsafe:!0}));try{delete tl.constructor}catch(t){}hn&&hn(tl,nl)}zt({global:!0,wrap:!0,forced:dl},{Promise:el}),ve(el,Ku,!1),ki(Ku),Bu=dt(Ku),zt({target:Ku,stat:!0,forced:dl},{reject:function(t){var e=al(this);return e.reject.call(void 0,t),e.promise}}),zt({target:Ku,stat:!0,forced:dl},{resolve:function(t){return Hu(this,t)}}),zt({target:Ku,stat:!0,forced:pl},{all:function(t){var e=this,n=al(e),r=n.resolve,i=n.reject,o=Gu((function(){var n=me(e.resolve),o=[],a=0,s=1;In(t,(function(t){var c=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[c]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=al(e),r=n.reject,i=Gu((function(){var i=me(e.resolve);In(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),zt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Vu.f(e),r=n.resolve,i=n.reject,o=Gu((function(){var n=me(e.resolve),i=[],o=0,a=1;In(t,(function(t){var s=o++,c=!1;i.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){c||(c=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Sl="No one promise resolved";zt({target:"Promise",stat:!0},{any:function(t){var e=this,n=Vu.f(e),r=n.resolve,i=n.reject,o=Gu((function(){var n=me(e.resolve),o=[],a=0,s=1,c=!1;In(t,(function(t){var u=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||c||(c=!0,r(t))}),(function(t){l||c||(l=!0,o[u]=t,--s||i(new(dt("AggregateError"))(o,Sl)))}))})),--s||i(new(dt("AggregateError"))(o,Sl))}));return o.error&&i(o.value),n.promise}});var Cl=!!ou&&c((function(){ou.prototype.finally.call({then:function(){}},(function(){}))}));if(zt({target:"Promise",proto:!0,real:!0,forced:Cl},{finally:function(t){var e=Go(this,dt("Promise")),n="function"==typeof t;return this.then(n?function(n){return Hu(e,t()).then((function(){return n}))}:t,n?function(n){return Hu(e,t()).then((function(){throw n}))}:t)}}),"function"==typeof ou){var xl=dt("Promise").prototype.finally;ou.prototype.finally!==xl&&ut(ou.prototype,"finally",xl,{unsafe:!0})}var Tl=dt("Reflect","apply"),Ol=Function.apply,Il=!c((function(){Tl((function(){}))}));zt({target:"Reflect",stat:!0,forced:Il},{apply:function(t,e,n){return me(t),D(n),Tl?Tl(t,e,n):Ol.call(t,e,n)}});var kl=dt("Reflect","construct"),Al=c((function(){function t(){}return!(kl((function(){}),[],t)instanceof t)})),Dl=!c((function(){kl((function(){}))})),Pl=Al||Dl;zt({target:"Reflect",stat:!0,forced:Pl,sham:Pl},{construct:function(t,e){me(t),D(e);var n=arguments.length<3?t:me(arguments[2]);if(Dl&&!Al)return kl(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(ya.apply(t,r))}var i=n.prototype,o=ne(_(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return _(a)?a:o}});var Ml=c((function(){Reflect.defineProperty(M.f({},1,{value:1}),1,{value:2})}));zt({target:"Reflect",stat:!0,forced:Ml,sham:!u},{defineProperty:function(t,e,n){D(t);var r=w(e,!0);D(n);try{return M.f(t,r,n),!0}catch(t){return!1}}});var Rl=A.f;zt({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=Rl(D(t),e);return!(n&&!n.configurable)&&delete t[e]}}),zt({target:"Reflect",stat:!0},{get:function t(e,n){var r,i,o=arguments.length<3?e:arguments[2];return D(e)===o?e[n]:(r=A.f(e,n))?C(r,"value")?r.value:void 0===r.get?void 0:r.get.call(o):_(i=dn(e))?t(i,n,o):void 0}}),zt({target:"Reflect",stat:!0,sham:!u},{getOwnPropertyDescriptor:function(t,e){return A.f(D(t),e)}}),zt({target:"Reflect",stat:!0,sham:!un},{getPrototypeOf:function(t){return dn(D(t))}}),zt({target:"Reflect",stat:!0},{has:function(t,e){return e in t}});var Ll=Object.isExtensible;zt({target:"Reflect",stat:!0},{isExtensible:function(t){return D(t),!Ll||Ll(t)}}),zt({target:"Reflect",stat:!0},{ownKeys:kt}),zt({target:"Reflect",stat:!0,sham:!Pa},{preventExtensions:function(t){D(t);try{var e=dt("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}});var Nl=c((function(){var t=function(){},e=M.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}));zt({target:"Reflect",stat:!0,forced:Nl},{set:function t(e,n,r){var i,o,a=arguments.length<4?e:arguments[3],s=A.f(D(e),n);if(!s){if(_(o=dn(e)))return t(o,n,r,a);s=p(0)}if(C(s,"value")){if(!1===s.writable||!_(a))return!1;if(i=A.f(a,n)){if(i.get||i.set||!1===i.writable)return!1;i.value=r,M.f(a,n,i)}else M.f(a,n,p(0,r));return!0}return void 0!==s.set&&(s.set.call(a,r),!0)}}),hn&&zt({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){D(t),pn(e);try{return hn(t,e),!0}catch(t){return!1}}}),zt({global:!0},{Reflect:{}}),ve(s.Reflect,"Reflect",!0);var jl=le("match"),ql=function(t){var e;return _(t)&&(void 0!==(e=t[jl])?!!e:"RegExp"==g(t))},zl=function(){var t=D(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Bl(t,e){return RegExp(t,e)}var Fl={UNSUPPORTED_Y:c((function(){var t=Bl("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:c((function(){var t=Bl("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Ul=M.f,$l=Ot.f,Vl=ct.enforce,Hl=le("match"),Gl=s.RegExp,Ql=Gl.prototype,Wl=/a/g,Yl=/a/g,Kl=new Gl(Wl)!==Wl,Zl=Fl.UNSUPPORTED_Y;if(u&&jt("RegExp",!Kl||Zl||c((function(){return Yl[Hl]=!1,Gl(Wl)!=Wl||Gl(Yl)==Yl||"/a/i"!=Gl(Wl,"i")})))){for(var Xl=function(t,e){var n,r=this instanceof Xl,i=ql(t),o=void 0===e;if(!r&&i&&t.constructor===Xl&&o)return t;Kl?i&&!o&&(t=t.source):t instanceof Xl&&(o&&(e=zl.call(t)),t=t.source),Zl&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a=Ra(Kl?new Gl(t,e):Gl(t,e),r?this:Ql,Xl);Zl&&n&&(Vl(a).sticky=!0);return a},Jl=function(t){t in Xl||Ul(Xl,t,{configurable:!0,get:function(){return Gl[t]},set:function(e){Gl[t]=e}})},tf=$l(Gl),ef=0;tf.length>ef;)Jl(tf[ef++]);Ql.constructor=Xl,Xl.prototype=Ql,ut(s,"RegExp",Xl)}ki("RegExp");var nf=RegExp.prototype.exec,rf=G("native-string-replace",String.prototype.replace),of=nf,af=function(){var t=/a/,e=/b*/g;return nf.call(t,"a"),nf.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),sf=Fl.UNSUPPORTED_Y||Fl.BROKEN_CARET,cf=void 0!==/()??/.exec("")[1];(af||cf||sf)&&(of=function(t){var e,n,r,i,o=this,a=sf&&o.sticky,s=zl.call(o),c=o.source,u=0,l=t;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),l=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(c="(?: "+c+")",l=" "+l,u++),n=new RegExp("^(?:"+c+")",s)),cf&&(n=new RegExp("^"+c+"$(?!\\s)",s)),af&&(e=o.lastIndex),r=nf.call(a?n:o,l),a?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:af&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),cf&&r&&r.length>1&&rf.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var uf=of;zt({target:"RegExp",proto:!0,forced:/./.exec!==uf},{exec:uf}),u&&("g"!=/./g.flags||Fl.UNSUPPORTED_Y)&&M.f(RegExp.prototype,"flags",{configurable:!0,get:zl});var lf=Fl.UNSUPPORTED_Y,ff=M.f,df=ct.get,pf=RegExp.prototype;u&&lf&&ff(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==pf){if(this instanceof RegExp)return!!df(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var hf=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),gf=/./.test;zt({target:"RegExp",proto:!0,forced:!hf},{test:function(t){if("function"!=typeof this.exec)return gf.call(this,t);var e=this.exec(t);if(null!==e&&!_(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}});var vf="toString",mf=RegExp.prototype,yf=mf.toString,bf=c((function(){return"/a/b"!=yf.call({source:"a",flags:"b"})})),_f=yf.name!=vf;(bf||_f)&&ut(RegExp.prototype,vf,(function(){var t=D(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in mf)?zl.call(t):n)}),{unsafe:!0});La("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Ba);var wf=function(t){return function(e,n){var r,i,o=String(y(e)),a=gt(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},Ef={codeAt:wf(!1),charAt:wf(!0)},Sf=Ef.codeAt;zt({target:"String",proto:!0},{codePointAt:function(t){return Sf(this,t)}});var Cf,xf=function(t){if(ql(t))throw TypeError("The method doesn't accept regular expressions");return t},Tf=le("match"),Of=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[Tf]=!1,"/./"[t](e)}catch(t){}}return!1},If=A.f,kf="".endsWith,Af=Math.min,Df=Of("endsWith"),Pf=!(Df||(Cf=If(String.prototype,"endsWith"),!Cf||Cf.writable));zt({target:"String",proto:!0,forced:!Pf&&!Df},{endsWith:function(t){var e=String(y(this));xf(t);var n=arguments.length>1?arguments[1]:void 0,r=mt(e.length),i=void 0===n?r:Af(mt(n),r),o=String(t);return kf?kf.call(e,o,i):e.slice(i-o.length,i)===o}});var Mf=String.fromCharCode,Rf=String.fromCodePoint,Lf=!!Rf&&1!=Rf.length;zt({target:"String",stat:!0,forced:Lf},{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,i=0;r>i;){if(e=+arguments[i++],_t(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?Mf(e):Mf(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}}),zt({target:"String",proto:!0,forced:!Of("includes")},{includes:function(t){return!!~String(y(this)).indexOf(xf(t),arguments.length>1?arguments[1]:void 0)}});var Nf=Ef.charAt,jf="String Iterator",qf=ct.set,zf=ct.getterFor(jf);Lr(String,"String",(function(t){qf(this,{type:jf,string:String(t),index:0})}),(function(){var t,e=zf(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Nf(n,r),e.index+=t.length,{value:t,done:!1})}));var Bf=le("species"),Ff=RegExp.prototype,Uf=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),$f="$0"==="a".replace(/./,"$0"),Vf=le("replace"),Hf=!!/./[Vf]&&""===/./[Vf]("a","$0"),Gf=!c((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Qf=function(t,e,n,r){var i=le(t),o=!c((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!c((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Bf]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!Uf||!$f||Hf)||"split"===t&&!Gf){var s=/./[i],u=n(i,""[t],(function(t,e,n,r,i){var a=e.exec;return a===uf||a===Ff.exec?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:$f,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Hf}),l=u[0],f=u[1];ut(String.prototype,t,l),ut(Ff,i,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&R(Ff[i],"sham",!0)},Wf=Ef.charAt,Yf=function(t,e,n){return e+(n?Wf(t,e).length:1)},Kf=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==g(t))throw TypeError("RegExp#exec called on incompatible receiver");return uf.call(t,e)};Qf("match",1,(function(t,e,n){return[function(e){var n=y(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=D(t),o=String(this);if(!i.global)return Kf(i,o);var a=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=Kf(i,o));){var l=String(s[0]);c[u]=l,""===l&&(i.lastIndex=Yf(o,mt(i.lastIndex),a)),u++}return 0===u?null:c}]}));var Zf=le("matchAll"),Xf="RegExp String",Jf="RegExp String Iterator",td=ct.set,ed=ct.getterFor(Jf),nd=RegExp.prototype,rd=nd.exec,id="".matchAll,od=!!id&&!c((function(){"a".matchAll(/./)})),ad=Or((function(t,e,n,r){td(this,{type:Jf,regexp:t,string:e,global:n,unicode:r,done:!1})}),Xf,(function(){var t=ed(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,n=t.string,r=function(t,e){var n,r=t.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(t,e)))throw TypeError("Incorrect exec result");return n}return rd.call(t,e)}(e,n);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=Yf(n,mt(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),sd=function(t){var e,n,r,i,o,a,s=D(this),c=String(t);return e=Go(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in nd)&&(n=zl.call(s)),r=void 0===n?"":String(n),i=new e(e===RegExp?s.source:s,r),o=!!~r.indexOf("g"),a=!!~r.indexOf("u"),i.lastIndex=mt(s.lastIndex),new ad(i,c,o,a)};zt({target:"String",proto:!0,forced:od},{matchAll:function(t){var e,n,r=y(this);if(null!=t){if(ql(t)&&!~String(y("flags"in nd?t.flags:zl.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(od)return id.apply(r,arguments);if(null!=(n=t[Zf]))return me(n).call(t,r)}else if(od)return id.apply(r,arguments);return e=String(r),new RegExp(t,"g")[Zf](e)}}),Zf in nd||R(nd,Zf,sd);var cd=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(Bt),ud=ta.end;zt({target:"String",proto:!0,forced:cd},{padEnd:function(t){return ud(this,t,arguments.length>1?arguments[1]:void 0)}});var ld=ta.start;zt({target:"String",proto:!0,forced:cd},{padStart:function(t){return ld(this,t,arguments.length>1?arguments[1]:void 0)}}),zt({target:"String",stat:!0},{raw:function(t){for(var e=b(t.raw),n=mt(e.length),r=arguments.length,i=[],o=0;n>o;)i.push(String(e[o++])),o<r&&i.push(String(arguments[o]));return i.join("")}}),zt({target:"String",proto:!0},{repeat:Zo});var fd=Math.floor,dd="".replace,pd=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,hd=/\$([$&'`]|\d{1,2})/g,gd=function(t,e,n,r,i,o){var a=n+t.length,s=r.length,c=hd;return void 0!==i&&(i=E(i),c=pd),dd.call(o,c,(function(o,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=i[c.slice(1,-1)];break;default:var l=+c;if(0===l)return o;if(l>s){var f=fd(l/10);return 0===f?o:f<=s?void 0===r[f-1]?c.charAt(1):r[f-1]+c.charAt(1):o}u=r[l-1]}return void 0===u?"":u}))},vd=Math.max,md=Math.min;Qf("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=y(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(e,t,this,r);if(s.done)return s.value}var c=D(t),u=String(this),l="function"==typeof r;l||(r=String(r));var f=c.global;if(f){var d=c.unicode;c.lastIndex=0}for(var p=[];;){var h=Kf(c,u);if(null===h)break;if(p.push(h),!f)break;""===String(h[0])&&(c.lastIndex=Yf(u,mt(c.lastIndex),d))}for(var g,v="",m=0,y=0;y<p.length;y++){h=p[y];for(var b=String(h[0]),_=vd(md(gt(h.index),u.length),0),w=[],E=1;E<h.length;E++)w.push(void 0===(g=h[E])?g:String(g));var S=h.groups;if(l){var C=[b].concat(w,_,u);void 0!==S&&C.push(S);var x=String(r.apply(void 0,C))}else x=gd(b,u,_,w,S,r);_>=m&&(v+=u.slice(m,_)+x,m=_+b.length)}return v+u.slice(m)}]}));var yd=le("replace"),bd=RegExp.prototype,_d=Math.max,wd=function(t,e,n){return n>t.length?-1:""===e?n:t.indexOf(e,n)};zt({target:"String",proto:!0},{replaceAll:function(t,e){var n,r,i,o,a,s,c,u=y(this),l=0,f=0,d="";if(null!=t){if(ql(t)&&!~String(y("flags"in bd?t.flags:zl.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(n=t[yd]))return n.call(t,u,e)}for(r=String(u),i=String(t),(o="function"==typeof e)||(e=String(e)),a=i.length,s=_d(1,a),l=wd(r,i,0);-1!==l;)c=o?String(e(i,l,r)):gd(i,r,l,[],void 0,e),d+=r.slice(f,l)+c,f=l+a,l=wd(r,i,l+s);return f<r.length&&(d+=r.slice(f)),d}}),Qf("search",1,(function(t,e,n){return[function(e){var n=y(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=D(t),o=String(this),a=i.lastIndex;qc(a,0)||(i.lastIndex=0);var s=Kf(i,o);return qc(i.lastIndex,a)||(i.lastIndex=a),null===s?-1:s.index}]}));var Ed=Fl.UNSUPPORTED_Y,Sd=[].push,Cd=Math.min,xd=4294967295;Qf("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(y(this)),i=void 0===n?xd:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!ql(t))return e.call(r,t,i);for(var o,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,u+"g");(o=uf.call(f,r))&&!((a=f.lastIndex)>l&&(c.push(r.slice(l,o.index)),o.length>1&&o.index<r.length&&Sd.apply(c,o.slice(1)),s=o[0].length,l=a,c.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!s&&f.test("")||c.push(""):c.push(r.slice(l)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=y(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=D(t),s=String(this),c=Go(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Ed?"g":"y"),f=new c(Ed?"^(?:"+a.source+")":a,l),d=void 0===i?xd:i>>>0;if(0===d)return[];if(0===s.length)return null===Kf(f,s)?[s]:[];for(var p=0,h=0,g=[];h<s.length;){f.lastIndex=Ed?0:h;var v,m=Kf(f,Ed?s.slice(h):s);if(null===m||(v=Cd(mt(f.lastIndex+(Ed?h:0)),s.length))===p)h=Yf(s,h,u);else{if(g.push(s.slice(p,h)),g.length===d)return g;for(var y=1;y<=m.length-1;y++)if(g.push(m[y]),g.length===d)return g;h=p=v}}return g.push(s.slice(p)),g}]}),Ed);var Td=A.f,Od="".startsWith,Id=Math.min,kd=Of("startsWith"),Ad=!kd&&!!function(){var t=Td(String.prototype,"startsWith");return t&&!t.writable}();zt({target:"String",proto:!0,forced:!Ad&&!kd},{startsWith:function(t){var e=String(y(this));xf(t);var n=mt(Id(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return Od?Od.call(e,r,n):e.slice(n,n+r.length)===r}});var Dd=function(t){return c((function(){return!!Ls[t]()||"​᠎"!="​᠎"[t]()||Ls[t].name!==t}))},Pd=Bs.trim;zt({target:"String",proto:!0,forced:Dd("trim")},{trim:function(){return Pd(this)}});var Md=Bs.end,Rd=Dd("trimEnd"),Ld=Rd?function(){return Md(this)}:"".trimEnd;zt({target:"String",proto:!0,forced:Rd},{trimEnd:Ld,trimRight:Ld});var Nd=Bs.start,jd=Dd("trimStart"),qd=jd?function(){return Nd(this)}:"".trimStart;zt({target:"String",proto:!0,forced:jd},{trimStart:qd,trimLeft:qd});var zd=/"/g,Bd=function(t,e,n,r){var i=String(y(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(r).replace(zd,"&quot;")+'"'),o+">"+i+"</"+e+">"},Fd=function(t){return c((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))};zt({target:"String",proto:!0,forced:Fd("anchor")},{anchor:function(t){return Bd(this,"a","name",t)}}),zt({target:"String",proto:!0,forced:Fd("big")},{big:function(){return Bd(this,"big","","")}}),zt({target:"String",proto:!0,forced:Fd("blink")},{blink:function(){return Bd(this,"blink","","")}}),zt({target:"String",proto:!0,forced:Fd("bold")},{bold:function(){return Bd(this,"b","","")}}),zt({target:"String",proto:!0,forced:Fd("fixed")},{fixed:function(){return Bd(this,"tt","","")}}),zt({target:"String",proto:!0,forced:Fd("fontcolor")},{fontcolor:function(t){return Bd(this,"font","color",t)}}),zt({target:"String",proto:!0,forced:Fd("fontsize")},{fontsize:function(t){return Bd(this,"font","size",t)}}),zt({target:"String",proto:!0,forced:Fd("italics")},{italics:function(){return Bd(this,"i","","")}}),zt({target:"String",proto:!0,forced:Fd("link")},{link:function(t){return Bd(this,"a","href",t)}}),zt({target:"String",proto:!0,forced:Fd("small")},{small:function(){return Bd(this,"small","","")}}),zt({target:"String",proto:!0,forced:Fd("strike")},{strike:function(){return Bd(this,"strike","","")}}),zt({target:"String",proto:!0,forced:Fd("sub")},{sub:function(){return Bd(this,"sub","","")}}),zt({target:"String",proto:!0,forced:Fd("sup")},{sup:function(){return Bd(this,"sup","","")}});var Ud=Vo.NATIVE_ARRAY_BUFFER_VIEWS,$d=s.ArrayBuffer,Vd=s.Int8Array,Hd=!Ud||!c((function(){Vd(1)}))||!c((function(){new Vd(-1)}))||!dr((function(t){new Vd,new Vd(null),new Vd(1.5),new Vd(t)}),!0)||c((function(){return 1!==new Vd(new $d(2),1,void 0).length})),Gd=function(t,e){var n=function(t){var e=gt(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}(t);if(n%e)throw RangeError("Wrong offset");return n},Qd=Vo.aTypedArrayConstructor,Wd=function(t){var e,n,r,i,o,a,s=E(t),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,f=xn(s);if(null!=f&&!yn(f))for(a=(o=f.call(s)).next,s=[];!(i=a.call(o)).done;)s.push(i.value);for(l&&c>2&&(u=ye(u,arguments[2],2)),n=mt(s.length),r=new(Qd(this))(n),e=0;n>e;e++)r[e]=l?u(s[e],e):s[e];return r},Yd=o((function(t){var e=Ot.f,n=Se.forEach,r=ct.get,i=ct.set,o=M.f,a=A.f,c=Math.round,l=s.RangeError,f=So.ArrayBuffer,d=So.DataView,h=Vo.NATIVE_ARRAY_BUFFER_VIEWS,g=Vo.TYPED_ARRAY_TAG,v=Vo.TypedArray,m=Vo.TypedArrayPrototype,y=Vo.aTypedArrayConstructor,b=Vo.isTypedArray,E="BYTES_PER_ELEMENT",S="Wrong length",x=function(t,e){for(var n=0,r=e.length,i=new(y(t))(r);r>n;)i[n]=e[n++];return i},T=function(t,e){o(t,e,{get:function(){return r(this)[e]}})},O=function(t){var e;return t instanceof f||"ArrayBuffer"==(e=Sn(t))||"SharedArrayBuffer"==e},I=function(t,e){return b(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},k=function(t,e){return I(t,e=w(e,!0))?p(2,t[e]):a(t,e)},D=function(t,e,n){return!(I(t,e=w(e,!0))&&_(n)&&C(n,"value"))||C(n,"get")||C(n,"set")||n.configurable||C(n,"writable")&&!n.writable||C(n,"enumerable")&&!n.enumerable?o(t,e,n):(t[e]=n.value,t)};u?(h||(A.f=k,M.f=D,T(m,"buffer"),T(m,"byteOffset"),T(m,"byteLength"),T(m,"length")),zt({target:"Object",stat:!0,forced:!h},{getOwnPropertyDescriptor:k,defineProperty:D}),t.exports=function(t,a,u){var p=t.match(/\d+$/)[0]/8,y=t+(u?"Clamped":"")+"Array",w="get"+t,C="set"+t,T=s[y],I=T,k=I&&I.prototype,A={},D=function(t,e){o(t,e,{get:function(){return function(t,e){var n=r(t);return n.view[w](e*p+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var i=r(t);u&&(n=(n=c(n))<0?0:n>255?255:255&n),i.view[C](e*p+i.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};h?Hd&&(I=a((function(t,e,n,r){return ji(t,I,y),Ra(_(e)?O(e)?void 0!==r?new T(e,Gd(n,p),r):void 0!==n?new T(e,Gd(n,p)):new T(e):b(e)?x(I,e):Wd.call(I,e):new T(qi(e)),t,I)})),hn&&hn(I,v),n(e(T),(function(t){t in I||R(I,t,T[t])})),I.prototype=k):(I=a((function(t,e,n,r){ji(t,I,y);var o,a,s,c=0,u=0;if(_(e)){if(!O(e))return b(e)?x(I,e):Wd.call(I,e);o=e,u=Gd(n,p);var h=e.byteLength;if(void 0===r){if(h%p)throw l(S);if((a=h-u)<0)throw l(S)}else if((a=mt(r)*p)+u>h)throw l(S);s=a/p}else s=qi(e),o=new f(a=s*p);for(i(t,{buffer:o,byteOffset:u,byteLength:a,length:s,view:new d(o)});c<s;)D(t,c++)})),hn&&hn(I,v),k=I.prototype=ne(m)),k.constructor!==I&&R(k,"constructor",I),g&&R(k,g,y),A[y]=I,zt({global:!0,forced:I!=T,sham:!h},A),E in I||R(I,E,p),E in k||R(k,E,p),ki(y)}):t.exports=function(){}}));Yd("Float32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Int8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Int16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Int32",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}),!0),Yd("Uint16",(function(t){return function(e,n,r){return t(this,e,n,r)}})),Yd("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Kd=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("copyWithin",(function(t,e){return Bn.call(Kd(this),t,e,arguments.length>2?arguments[2]:void 0)}));var Zd=Se.every,Xd=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("every",(function(t){return Zd(Xd(this),t,arguments.length>1?arguments[1]:void 0)}));var Jd=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("fill",(function(t){return Qn.apply(Jd(this),arguments)}));var tp=Vo.aTypedArrayConstructor,ep=function(t,e){for(var n=Go(t,t.constructor),r=0,i=e.length,o=new(tp(n))(i);i>r;)o[r]=e[r++];return o},np=Se.filter,rp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("filter",(function(t){var e=np(rp(this),t,arguments.length>1?arguments[1]:void 0);return ep(this,e)}));var ip=Se.find,op=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("find",(function(t){return ip(op(this),t,arguments.length>1?arguments[1]:void 0)}));var ap=Se.findIndex,sp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("findIndex",(function(t){return ap(sp(this),t,arguments.length>1?arguments[1]:void 0)}));var cp=Se.forEach,up=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("forEach",(function(t){cp(up(this),t,arguments.length>1?arguments[1]:void 0)})),(0,Vo.exportTypedArrayStaticMethod)("from",Wd,Hd);var lp=Et.includes,fp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("includes",(function(t){return lp(fp(this),t,arguments.length>1?arguments[1]:void 0)}));var dp=Et.indexOf,pp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("indexOf",(function(t){return dp(pp(this),t,arguments.length>1?arguments[1]:void 0)}));var hp=le("iterator"),gp=s.Uint8Array,vp=zr.values,mp=zr.keys,yp=zr.entries,bp=Vo.aTypedArray,_p=Vo.exportTypedArrayMethod,wp=gp&&gp.prototype[hp],Ep=!!wp&&("values"==wp.name||null==wp.name),Sp=function(){return vp.call(bp(this))};_p("entries",(function(){return yp.call(bp(this))})),_p("keys",(function(){return mp.call(bp(this))})),_p("values",Sp,!Ep),_p(hp,Sp,!Ep);var Cp=Vo.aTypedArray,xp=[].join;(0,Vo.exportTypedArrayMethod)("join",(function(t){return xp.apply(Cp(this),arguments)}));var Tp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("lastIndexOf",(function(t){return Qr.apply(Tp(this),arguments)}));var Op=Se.map,Ip=Vo.aTypedArray,kp=Vo.aTypedArrayConstructor;(0,Vo.exportTypedArrayMethod)("map",(function(t){return Op(Ip(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(kp(Go(t,t.constructor)))(e)}))}));var Ap=Vo.aTypedArrayConstructor;(0,Vo.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,n=new(Ap(this))(e);e>t;)n[t]=arguments[t++];return n}),Hd);var Dp=Xr.left,Pp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("reduce",(function(t){return Dp(Pp(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Mp=Xr.right,Rp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("reduceRight",(function(t){return Mp(Rp(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Lp=Vo.aTypedArray,Np=Vo.exportTypedArrayMethod,jp=Math.floor;Np("reverse",(function(){for(var t,e=this,n=Lp(e).length,r=jp(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e}));var qp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("set",(function(t){qp(this);var e=Gd(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=E(t),i=mt(r.length),o=0;if(i+e>n)throw RangeError("Wrong length");for(;o<i;)this[e+o]=r[o++]}),c((function(){new Int8Array(1).set({})})));var zp=Vo.aTypedArray,Bp=Vo.aTypedArrayConstructor,Fp=[].slice;(0,Vo.exportTypedArrayMethod)("slice",(function(t,e){for(var n=Fp.call(zp(this),t,e),r=Go(this,this.constructor),i=0,o=n.length,a=new(Bp(r))(o);o>i;)a[i]=n[i++];return a}),c((function(){new Int8Array(1).slice()})));var Up=Se.some,$p=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("some",(function(t){return Up($p(this),t,arguments.length>1?arguments[1]:void 0)}));var Vp=Vo.aTypedArray,Hp=Vo.exportTypedArrayMethod,Gp=s.Uint16Array,Qp=Gp&&Gp.prototype.sort,Wp=!!Qp&&!c((function(){var t=new Gp(2);t.sort(null),t.sort({})})),Yp=!!Qp&&!c((function(){if(Ht)return Ht<74;if(yi)return yi<67;if(bi)return!0;if(wi)return wi<602;var t,e,n=new Gp(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));Hp("sort",(function(t){var e=this;if(void 0!==t&&me(t),Yp)return Qp.call(e,t);Vp(e);var n,r=mt(e.length),i=Array(r);for(n=0;n<r;n++)i[n]=e[n];for(i=vi(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=i[n];return e}),!Yp||Wp);var Kp=Vo.aTypedArray;(0,Vo.exportTypedArrayMethod)("subarray",(function(t,e){var n=Kp(this),r=n.length,i=_t(t,r);return new(Go(n,n.constructor))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,mt((void 0===e?r:_t(e,r))-i))}));var Zp=s.Int8Array,Xp=Vo.aTypedArray,Jp=Vo.exportTypedArrayMethod,th=[].toLocaleString,eh=[].slice,nh=!!Zp&&c((function(){th.call(new Zp(1))}));Jp("toLocaleString",(function(){return th.apply(nh?eh.call(Xp(this)):Xp(this),arguments)}),c((function(){return[1,2].toLocaleString()!=new Zp([1,2]).toLocaleString()}))||!c((function(){Zp.prototype.toLocaleString.call([1,2])})));var rh=Vo.exportTypedArrayMethod,ih=s.Uint8Array,oh=ih&&ih.prototype||{},ah=[].toString,sh=[].join;c((function(){ah.call({})}))&&(ah=function(){return sh.call(this)});var ch=oh.toString!=ah;rh("toString",ah,ch);var uh=Ma.getWeakData,lh=ct.set,fh=ct.getterFor,dh=Se.find,ph=Se.findIndex,hh=0,gh=function(t){return t.frozen||(t.frozen=new vh)},vh=function(){this.entries=[]},mh=function(t,e){return dh(t.entries,(function(t){return t[0]===e}))};vh.prototype={get:function(t){var e=mh(this,t);if(e)return e[1]},has:function(t){return!!mh(this,t)},set:function(t,e){var n=mh(this,t);n?n[1]=e:this.entries.push([t,e])},delete:function(t){var e=ph(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}};var yh={getConstructor:function(t,e,n,r){var i=t((function(t,o){ji(t,i,e),lh(t,{type:e,id:hh++,frozen:void 0}),null!=o&&In(o,t[r],{that:t,AS_ENTRIES:n})})),o=fh(e),a=function(t,e,n){var r=o(t),i=uh(D(e),!0);return!0===i?gh(r).set(e,n):i[r.id]=n,t};return Ni(i.prototype,{delete:function(t){var e=o(this);if(!_(t))return!1;var n=uh(t);return!0===n?gh(e).delete(t):n&&C(n,e.id)&&delete n[e.id]},has:function(t){var e=o(this);if(!_(t))return!1;var n=uh(t);return!0===n?gh(e).has(t):n&&C(n,e.id)}}),Ni(i.prototype,n?{get:function(t){var e=o(this);if(_(t)){var n=uh(t);return!0===n?gh(e).get(t):n?n[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),i}};o((function(t){var e,n=ct.enforce,r=!s.ActiveXObject&&"ActiveXObject"in s,i=Object.isExtensible,o=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},a=t.exports=La("WeakMap",o,yh);if(H&&r){e=yh.getConstructor(o,"WeakMap",!0),Ma.REQUIRED=!0;var c=a.prototype,u=c.delete,l=c.has,f=c.get,d=c.set;Ni(c,{delete:function(t){if(_(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),u.call(this,t)||r.frozen.delete(t)}return u.call(this,t)},has:function(t){if(_(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),l.call(this,t)||r.frozen.has(t)}return l.call(this,t)},get:function(t){if(_(t)&&!i(t)){var r=n(this);return r.frozen||(r.frozen=new e),l.call(this,t)?f.call(this,t):r.frozen.get(t)}return f.call(this,t)},set:function(t,r){if(_(t)&&!i(t)){var o=n(this);o.frozen||(o.frozen=new e),l.call(this,t)?d.call(this,t,r):o.frozen.set(t,r)}else d.call(this,t,r);return this}})}}));La("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),yh);var bh={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var _h in bh){var wh=s[_h],Eh=wh&&wh.prototype;if(Eh&&Eh.forEach!==or)try{R(Eh,"forEach",or)}catch(t){Eh.forEach=or}}var Sh=le("iterator"),Ch=le("toStringTag"),xh=zr.values;for(var Th in bh){var Oh=s[Th],Ih=Oh&&Oh.prototype;if(Ih){if(Ih[Sh]!==xh)try{R(Ih,Sh,xh)}catch(t){Ih[Sh]=xh}if(Ih[Ch]||R(Ih,Ch,Th),bh[Th])for(var kh in zr)if(Ih[kh]!==zr[kh])try{R(Ih,kh,zr[kh])}catch(t){Ih[kh]=zr[kh]}}}var Ah=!s.setImmediate||!s.clearImmediate;zt({global:!0,bind:!0,enumerable:!0,forced:Ah},{setImmediate:Iu.set,clearImmediate:Iu.clear});var Dh=s.process;zt({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=Jr&&Dh.domain;Uu(e?e.bind(t):t)}});var Ph=[].slice,Mh=/MSIE .\./.test(Bt),Rh=function(t){return function(e,n){var r=arguments.length>2,i=r?Ph.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};zt({global:!0,bind:!0,forced:Mh},{setTimeout:Rh(s.setTimeout),setInterval:Rh(s.setInterval)});var Lh=le("iterator"),Nh=!c((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[Lh]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),jh=2147483647,qh=/[^\0-\u007E]/,zh=/[.\u3002\uFF0E\uFF61]/g,Bh="Overflow: input needs wider integers to process",Fh=Math.floor,Uh=String.fromCharCode,$h=function(t){return t+22+75*(t<26)},Vh=function(t,e,n){var r=0;for(t=n?Fh(t/700):t>>1,t+=Fh(t/e);t>455;r+=36)t=Fh(t/35);return Fh(r+36*t/(t+38))},Hh=function(t){var e,n,r=[],i=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(n=t[e])<128&&r.push(Uh(n));var c=r.length,u=c;for(c&&r.push("-");u<i;){var l=jh;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<l&&(l=n);var f=u+1;if(l-o>Fh((jh-a)/f))throw RangeError(Bh);for(a+=(l-o)*f,o=l,e=0;e<t.length;e++){if((n=t[e])<o&&++a>jh)throw RangeError(Bh);if(n==o){for(var d=a,p=36;;p+=36){var h=p<=s?1:p>=s+26?26:p-s;if(d<h)break;var g=d-h,v=36-h;r.push(Uh($h(h+g%v))),d=Fh(g/v)}r.push(Uh($h(d))),s=Vh(a,f,u==c),a=0,++u}}++a,++o}return r.join("")},Gh=function(t){var e=xn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return D(e.call(t))},Qh=dt("fetch"),Wh=dt("Headers"),Yh=le("iterator"),Kh="URLSearchParams",Zh="URLSearchParamsIterator",Xh=ct.set,Jh=ct.getterFor(Kh),tg=ct.getterFor(Zh),eg=/\+/g,ng=Array(4),rg=function(t){return ng[t-1]||(ng[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},ig=function(t){try{return decodeURIComponent(t)}catch(e){return t}},og=function(t){var e=t.replace(eg," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(rg(n--),ig);return e}},ag=/[!'()~]|%20/g,sg={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},cg=function(t){return sg[t]},ug=function(t){return encodeURIComponent(t).replace(ag,cg)},lg=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:og(r.shift()),value:og(r.join("="))}))},fg=function(t){this.entries.length=0,lg(this.entries,t)},dg=function(t,e){if(t<e)throw TypeError("Not enough arguments")},pg=Or((function(t,e){Xh(this,{type:Zh,iterator:Gh(Jh(t).entries),kind:e})}),"Iterator",(function(){var t=tg(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),hg=function(){ji(this,hg,Kh);var t,e,n,r,i,o,a,s,c,u=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(Xh(l,{type:Kh,entries:f,updateURL:function(){},updateSearchParams:fg}),void 0!==u)if(_(u))if("function"==typeof(t=xn(u)))for(n=(e=t.call(u)).next;!(r=n.call(e)).done;){if((a=(o=(i=Gh(D(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:a.value+"",value:s.value+""})}else for(c in u)C(u,c)&&f.push({key:c,value:u[c]+""});else lg(f,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},gg=hg.prototype;Ni(gg,{append:function(t,e){dg(arguments.length,2);var n=Jh(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){dg(arguments.length,1);for(var e=Jh(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){dg(arguments.length,1);for(var e=Jh(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){dg(arguments.length,1);for(var e=Jh(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){dg(arguments.length,1);for(var e=Jh(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){dg(arguments.length,1);for(var n,r=Jh(this),i=r.entries,o=!1,a=t+"",s=e+"",c=0;c<i.length;c++)(n=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=Jh(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=Jh(this).entries,r=ye(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new pg(this,"keys")},values:function(){return new pg(this,"values")},entries:function(){return new pg(this,"entries")}},{enumerable:!0}),ut(gg,Yh,gg.entries),ut(gg,"toString",(function(){for(var t,e=Jh(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(ug(t.key)+"="+ug(t.value));return n.join("&")}),{enumerable:!0}),ve(hg,Kh),zt({global:!0,forced:!Nh},{URLSearchParams:hg}),Nh||"function"!=typeof Qh||"function"!=typeof Wh||zt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(_(e=arguments[1])&&(n=e.body,Sn(n)===Kh&&((r=e.headers?new Wh(e.headers):new Wh).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=ne(e,{body:p(0,String(n)),headers:p(0,r)}))),i.push(e)),Qh.apply(this,i)}});var vg,mg={URLSearchParams:hg,getState:Jh},yg=Ef.codeAt,bg=s.URL,_g=mg.URLSearchParams,wg=mg.getState,Eg=ct.set,Sg=ct.getterFor("URL"),Cg=Math.floor,xg=Math.pow,Tg="Invalid scheme",Og="Invalid host",Ig="Invalid port",kg=/[A-Za-z]/,Ag=/[\d+-.A-Za-z]/,Dg=/\d/,Pg=/^(0x|0X)/,Mg=/^[0-7]+$/,Rg=/^\d+$/,Lg=/^[\dA-Fa-f]+$/,Ng=/[\0\t\n\r #%/:?@[\\]]/,jg=/[\0\t\n\r #/:?@[\\]]/,qg=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,zg=/[\t\n\r]/g,Bg=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return Og;if(!(n=Ug(e.slice(1,-1))))return Og;t.host=n}else if(Kg(t)){if(e=function(t){var e,n,r=[],i=t.toLowerCase().replace(zh,".").split(".");for(e=0;e<i.length;e++)n=i[e],r.push(qh.test(n)?"xn--"+Hh(n):n);return r.join(".")}(e),Ng.test(e))return Og;if(null===(n=Fg(e)))return Og;t.host=n}else{if(jg.test(e))return Og;for(n="",r=sr(e),i=0;i<r.length;i++)n+=Wg(r[i],Vg);t.host=n}},Fg=function(t){var e,n,r,i,o,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=c[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=Pg.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?Rg:8==o?Mg:Lg).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=xg(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*xg(256,3-r);return s},Ug=function(t){var e,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,f=0,d=function(){return t.charAt(f)};if(":"==d()){if(":"!=t.charAt(1))return;f+=2,l=++u}for(;d();){if(8==u)return;if(":"!=d()){for(e=n=0;n<4&&Lg.test(d());)e=16*e+parseInt(d(),16),f++,n++;if("."==d()){if(0==n)return;if(f-=n,u>6)return;for(r=0;d();){if(i=null,r>0){if(!("."==d()&&r<4))return;f++}if(!Dg.test(d()))return;for(;Dg.test(d());){if(o=parseInt(d(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;f++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;c[u++]=e}else{if(null!==l)return;f++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},$g=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Cg(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},Vg={},Hg=Cc({},Vg,{" ":1,'"':1,"<":1,">":1,"`":1}),Gg=Cc({},Hg,{"#":1,"?":1,"{":1,"}":1}),Qg=Cc({},Gg,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Wg=function(t,e){var n=yg(t,0);return n>32&&n<127&&!C(e,t)?t:encodeURIComponent(t)},Yg={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Kg=function(t){return C(Yg,t.scheme)},Zg=function(t){return""!=t.username||""!=t.password},Xg=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Jg=function(t,e){var n;return 2==t.length&&kg.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},tv=function(t){var e;return t.length>1&&Jg(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},ev=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&Jg(e[0],!0)||e.pop()},nv=function(t){return"."===t||"%2e"===t.toLowerCase()},rv={},iv={},ov={},av={},sv={},cv={},uv={},lv={},fv={},dv={},pv={},hv={},gv={},vv={},mv={},yv={},bv={},_v={},wv={},Ev={},Sv={},Cv=function(t,e,n,r){var i,o,a,s,c,u=n||rv,l=0,f="",d=!1,p=!1,h=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(qg,"")),e=e.replace(zg,""),i=sr(e);l<=i.length;){switch(o=i[l],u){case rv:if(!o||!kg.test(o)){if(n)return Tg;u=ov;continue}f+=o.toLowerCase(),u=iv;break;case iv:if(o&&(Ag.test(o)||"+"==o||"-"==o||"."==o))f+=o.toLowerCase();else{if(":"!=o){if(n)return Tg;f="",u=ov,l=0;continue}if(n&&(Kg(t)!=C(Yg,f)||"file"==f&&(Zg(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,n)return void(Kg(t)&&Yg[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?u=vv:Kg(t)&&r&&r.scheme==t.scheme?u=av:Kg(t)?u=lv:"/"==i[l+1]?(u=sv,l++):(t.cannotBeABaseURL=!0,t.path.push(""),u=wv)}break;case ov:if(!r||r.cannotBeABaseURL&&"#"!=o)return Tg;if(r.cannotBeABaseURL&&"#"==o){t.scheme=r.scheme,t.path=r.path.slice(),t.query=r.query,t.fragment="",t.cannotBeABaseURL=!0,u=Sv;break}u="file"==r.scheme?vv:cv;continue;case av:if("/"!=o||"/"!=i[l+1]){u=cv;continue}u=fv,l++;break;case sv:if("/"==o){u=dv;break}u=_v;continue;case cv:if(t.scheme=r.scheme,o==vg)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query;else if("/"==o||"\\"==o&&Kg(t))u=uv;else if("?"==o)t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query="",u=Ev;else{if("#"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.path.pop(),u=_v;continue}t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Sv}break;case uv:if(!Kg(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=r.username,t.password=r.password,t.host=r.host,t.port=r.port,u=_v;continue}u=dv}else u=fv;break;case lv:if(u=fv,"/"!=o||"/"!=f.charAt(l+1))continue;l++;break;case fv:if("/"!=o&&"\\"!=o){u=dv;continue}break;case dv:if("@"==o){d&&(f="%40"+f),d=!0,a=sr(f);for(var g=0;g<a.length;g++){var v=a[g];if(":"!=v||h){var m=Wg(v,Qg);h?t.password+=m:t.username+=m}else h=!0}f=""}else if(o==vg||"/"==o||"?"==o||"#"==o||"\\"==o&&Kg(t)){if(d&&""==f)return"Invalid authority";l-=sr(f).length+1,f="",u=pv}else f+=o;break;case pv:case hv:if(n&&"file"==t.scheme){u=yv;continue}if(":"!=o||p){if(o==vg||"/"==o||"?"==o||"#"==o||"\\"==o&&Kg(t)){if(Kg(t)&&""==f)return Og;if(n&&""==f&&(Zg(t)||null!==t.port))return;if(s=Bg(t,f))return s;if(f="",u=bv,n)return;continue}"["==o?p=!0:"]"==o&&(p=!1),f+=o}else{if(""==f)return Og;if(s=Bg(t,f))return s;if(f="",u=gv,n==hv)return}break;case gv:if(!Dg.test(o)){if(o==vg||"/"==o||"?"==o||"#"==o||"\\"==o&&Kg(t)||n){if(""!=f){var y=parseInt(f,10);if(y>65535)return Ig;t.port=Kg(t)&&y===Yg[t.scheme]?null:y,f=""}if(n)return;u=bv;continue}return Ig}f+=o;break;case vv:if(t.scheme="file","/"==o||"\\"==o)u=mv;else{if(!r||"file"!=r.scheme){u=_v;continue}if(o==vg)t.host=r.host,t.path=r.path.slice(),t.query=r.query;else if("?"==o)t.host=r.host,t.path=r.path.slice(),t.query="",u=Ev;else{if("#"!=o){tv(i.slice(l).join(""))||(t.host=r.host,t.path=r.path.slice(),ev(t)),u=_v;continue}t.host=r.host,t.path=r.path.slice(),t.query=r.query,t.fragment="",u=Sv}}break;case mv:if("/"==o||"\\"==o){u=yv;break}r&&"file"==r.scheme&&!tv(i.slice(l).join(""))&&(Jg(r.path[0],!0)?t.path.push(r.path[0]):t.host=r.host),u=_v;continue;case yv:if(o==vg||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&Jg(f))u=_v;else if(""==f){if(t.host="",n)return;u=bv}else{if(s=Bg(t,f))return s;if("localhost"==t.host&&(t.host=""),n)return;f="",u=bv}continue}f+=o;break;case bv:if(Kg(t)){if(u=_v,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=vg&&(u=_v,"/"!=o))continue}else t.fragment="",u=Sv;else t.query="",u=Ev;break;case _v:if(o==vg||"/"==o||"\\"==o&&Kg(t)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=f).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(ev(t),"/"==o||"\\"==o&&Kg(t)||t.path.push("")):nv(f)?"/"==o||"\\"==o&&Kg(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Jg(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(o==vg||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",u=Ev):"#"==o&&(t.fragment="",u=Sv)}else f+=Wg(o,Gg);break;case wv:"?"==o?(t.query="",u=Ev):"#"==o?(t.fragment="",u=Sv):o!=vg&&(t.path[0]+=Wg(o,Vg));break;case Ev:n||"#"!=o?o!=vg&&("'"==o&&Kg(t)?t.query+="%27":t.query+="#"==o?"%23":Wg(o,Vg)):(t.fragment="",u=Sv);break;case Sv:o!=vg&&(t.fragment+=Wg(o,Hg))}l++}},xv=function(t){var e,n,r=ji(this,xv,"URL"),i=arguments.length>1?arguments[1]:void 0,o=String(t),a=Eg(r,{type:"URL"});if(void 0!==i)if(i instanceof xv)e=Sg(i);else if(n=Cv(e={},String(i)))throw TypeError(n);if(n=Cv(a,o,null,e))throw TypeError(n);var s=a.searchParams=new _g,c=wg(s);c.updateSearchParams(a.query),c.updateURL=function(){a.query=String(s)||null},u||(r.href=Ov.call(r),r.origin=Iv.call(r),r.protocol=kv.call(r),r.username=Av.call(r),r.password=Dv.call(r),r.host=Pv.call(r),r.hostname=Mv.call(r),r.port=Rv.call(r),r.pathname=Lv.call(r),r.search=Nv.call(r),r.searchParams=jv.call(r),r.hash=qv.call(r))},Tv=xv.prototype,Ov=function(){var t=Sg(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==i?(u+="//",Zg(t)&&(u+=n+(r?":"+r:"")+"@"),u+=$g(i),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},Iv=function(){var t=Sg(this),e=t.scheme,n=t.port;if("blob"==e)try{return new xv(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&Kg(t)?e+"://"+$g(t.host)+(null!==n?":"+n:""):"null"},kv=function(){return Sg(this).scheme+":"},Av=function(){return Sg(this).username},Dv=function(){return Sg(this).password},Pv=function(){var t=Sg(this),e=t.host,n=t.port;return null===e?"":null===n?$g(e):$g(e)+":"+n},Mv=function(){var t=Sg(this).host;return null===t?"":$g(t)},Rv=function(){var t=Sg(this).port;return null===t?"":String(t)},Lv=function(){var t=Sg(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Nv=function(){var t=Sg(this).query;return t?"?"+t:""},jv=function(){return Sg(this).searchParams},qv=function(){var t=Sg(this).fragment;return t?"#"+t:""},zv=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(u&&Kt(Tv,{href:zv(Ov,(function(t){var e=Sg(this),n=String(t),r=Cv(e,n);if(r)throw TypeError(r);wg(e.searchParams).updateSearchParams(e.query)})),origin:zv(Iv),protocol:zv(kv,(function(t){var e=Sg(this);Cv(e,String(t)+":",rv)})),username:zv(Av,(function(t){var e=Sg(this),n=sr(String(t));if(!Xg(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=Wg(n[r],Qg)}})),password:zv(Dv,(function(t){var e=Sg(this),n=sr(String(t));if(!Xg(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=Wg(n[r],Qg)}})),host:zv(Pv,(function(t){var e=Sg(this);e.cannotBeABaseURL||Cv(e,String(t),pv)})),hostname:zv(Mv,(function(t){var e=Sg(this);e.cannotBeABaseURL||Cv(e,String(t),hv)})),port:zv(Rv,(function(t){var e=Sg(this);Xg(e)||(""==(t=String(t))?e.port=null:Cv(e,t,gv))})),pathname:zv(Lv,(function(t){var e=Sg(this);e.cannotBeABaseURL||(e.path=[],Cv(e,t+"",bv))})),search:zv(Nv,(function(t){var e=Sg(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Cv(e,t,Ev)),wg(e.searchParams).updateSearchParams(e.query)})),searchParams:zv(jv),hash:zv(qv,(function(t){var e=Sg(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Cv(e,t,Sv)):e.fragment=null}))}),ut(Tv,"toJSON",(function(){return Ov.call(this)}),{enumerable:!0}),ut(Tv,"toString",(function(){return Ov.call(this)}),{enumerable:!0}),bg){var Bv=bg.createObjectURL,Fv=bg.revokeObjectURL;Bv&&ut(xv,"createObjectURL",(function(t){return Bv.apply(bg,arguments)})),Fv&&ut(xv,"revokeObjectURL",(function(t){return Fv.apply(bg,arguments)}))}ve(xv,"URL"),zt({global:!0,forced:!Nh,sham:!u},{URL:xv}),zt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});o((function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",g={};function v(){}function m(){}function y(){}var b={};b[o]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(k([])));w&&w!==n&&r.call(w,o)&&(b=w);var E=y.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function x(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function k(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:A}}function A(){return{value:e,done:!0}}return m.prototype=E.constructor=y,y.constructor=m,m.displayName=c(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,s,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},S(C.prototype),C.prototype[a]=function(){return this},t.AsyncIterator=C,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(E),c(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function Uv(t){return(Uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hv(t,e,n){return e&&Vv(t.prototype,e),n&&Vv(t,n),t}function Gv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qv(Object(n),!0).forEach((function(e){Gv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zv(t,e)}function Kv(t){return(Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zv(t,e){return(Zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jv(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Xv(t):e}function tm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kv(t);if(e){var i=Kv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jv(this,n)}}function em(t,e,n){return(em="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||rm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rm(t,e){if(t){if("string"==typeof t)return im(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?im(t,e):void 0}}function im(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}"setImmediate"in window||function(){var t=0,e={},n=!0,r=Array.prototype.slice,i="setImmediatePolyfillMessage";function o(t){var n,o=t.data;"string"==typeof o&&0==o.indexOf(i)&&(n=e[o])&&(delete e[o],function(t){var e=t[0];switch(t.length){case 1:return e();case 2:return e(t[1]);case 3:return e(t[1],t[2])}e.apply(window,r.call(t,1))}(n))}window.setImmediate=function(){for(var r=t++,a=i+r,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return e[a]=c,n&&(n=!1,window.addEventListener("message",o)),window.postMessage(a,"*"),r},window.clearImmediate=function(t){delete e[i+t]}}(),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(t){t=0===arguments.length||!!t;var e=this.parentNode,n=window.getComputedStyle(e,null),r=parseInt(n.getPropertyValue("border-top-width")),i=parseInt(n.getPropertyValue("border-left-width")),o=this.offsetTop-e.offsetTop<e.scrollTop,a=this.offsetTop-e.offsetTop+this.clientHeight-r>e.scrollTop+e.clientHeight,s=this.offsetLeft-e.offsetLeft<e.scrollLeft,c=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,u=o&&!a;(o||a)&&t&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-r+this.clientHeight/2),(s||c)&&t&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(o||a||s||c)&&!t&&this.scrollIntoView(u)}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}),document.addEventListener("DOMContentLoaded",(function(){var t,e=!1,n=0,r=["input:not([type])","input[type=text]","input[type=search]","input[type=url]","input[type=tel]","input[type=email]","input[type=password]","input[type=number]","input[type=date]","input[type=month]","input[type=week]","input[type=time]","input[type=datetime]","input[type=datetime-local]","textarea","[role=textbox]"].join(","),i=(t=Element.prototype).matches?t.matches:t.matchesSelector?t.matchesSelector:t.webkitMatchesSelector?t.webkitMatchesSelector:t.mozMatchesSelector?t.mozMatchesSelector:t.msMatchesSelector?t.msMatchesSelector:void console.error("Couldn't find a matches method on Element.prototype.");function o(t){t.classList.contains("focus-ring")||(t.classList.add("focus-ring"),t.setAttribute("data-focus-ring-added",""))}document.body.addEventListener("keydown",(function(){e=!0,i&&i.call(document.activeElement,":focus")&&o(document.activeElement),0!==n&&clearTimeout(n),n=setTimeout((function(){e=!1,n=0}),100)}),!0),document.body.addEventListener("focus",(function(t){var n,a;(e||(n=t.target,a=!1,i&&(a=i.call(n,r)&&i.call(n,":not([readonly]")),a))&&o(t.target)}),!0),document.body.addEventListener("blur",(function(t){var e;(e=t.target).hasAttribute("data-focus-ring-added")&&(e.classList.remove("focus-ring"),e.removeAttribute("data-focus-ring-added"))}),!0)})),window,function(){var t=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},e=setTimeout;function n(){}function r(t,e){return function(){t.apply(e,arguments)}}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function o(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void s(e.promise,t)}a(e.promise,r)}else(1===t._state?a:s)(e.promise,t._value)}))):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===Uv(e)||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void l(r(n,e),t)}t._state=1,t._value=e,c(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn((function(){t._handled||i._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)o(t,t._deferreds[e]);t._deferreds=null}function u(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t((function(t){n||(n=!0,a(e,t))}),(function(t){n||(n=!0,s(e,t))}))}catch(t){if(n)return;n=!0,s(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var r=new this.constructor(n);return o(this,new u(t,e,r)),r},i.prototype.finally=t,i.all=function(t){return new i((function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"===Uv(a)||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},i.resolve=function(t){return t&&"object"===Uv(t)&&t.constructor===i?t:new i((function(e){e(t)}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){for(var r=0,i=t.length;r<i;r++)t[r].then(e,n)}))},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){e(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},window.Promise?window.Promise.prototype.finally||(window.Promise.prototype.finally=t):window.Promise=i}(),window.ResizeObserver=function(){var t=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,r){return t[0]===e&&(n=r,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(e,n){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,r=t(n,e);~r&&n.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];t.call(e,i[1],i[0])}},e}()}(),e="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,n=window,r="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(n):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},i=2;function o(t,e){var n=!1,o=!1,a=0;function s(){n&&(n=!1,t()),o&&u()}function c(){r(s)}function u(){var t=Date.now();if(n){if(t-a<i)return;o=!0}else n=!0,o=!1,setTimeout(c,e);a=t}return u}var a=20,s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=o(this.refresh.bind(this),a)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){e&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){e&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;s.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),l=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},f=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||n},d=E(0,0,0,0);function p(t){return parseFloat(t)||0}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+p(t["border-"+n+"-width"])}),0)}function g(t){for(var e={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=t["padding-"+i];e[i]=p(o)}return e}function v(t){var e=t.getBBox();return E(0,0,e.width,e.height)}function m(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return d;var r=f(t).getComputedStyle(t),i=g(r),o=i.left+i.right,a=i.top+i.bottom,s=p(r.width),c=p(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==e&&(s-=h(r,"left","right")+o),Math.round(c+a)!==n&&(c-=h(r,"top","bottom")+a)),!b(t)){var u=Math.round(s+o)-e,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return E(i.left,i.top,s,c)}var y="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof f(t).SVGGraphicsElement}:function(t){return t instanceof f(t).SVGElement&&"function"==typeof t.getBBox};function b(t){return t===f(t).document.documentElement}function _(t){return e?y(t)?v(t):m(t):d}function w(t){var e=t.x,n=t.y,r=t.width,i=t.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return l(a,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),a}function E(t,e,n,r){return{x:t,y:e,width:n,height:r}}var S=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=_(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),C=function(){function t(t,e){var n=w(e);l(this,{target:t,contentRect:n})}return t}(),x=function(){function e(e,n,r){if(this.activeObservations_=[],this.observations_=new t,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof f(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new C(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),T="undefined"!=typeof WeakMap?new WeakMap:new t,O=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new x(e,n,this);T.set(this,r)}return t}();return["observe","unobserve","disconnect"].forEach((function(t){O.prototype[t]=function(){var e;return(e=T.get(this))[t].apply(e,arguments)}})),void 0!==n.ResizeObserver?n.ResizeObserver:O}(),function(t,e){function n(t){this.time=t.time,this.target=t.target,this.rootBounds=t.rootBounds,this.boundingClientRect=t.boundingClientRect,this.intersectionRect=t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,n=e.width*e.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?i/n:this.isIntersecting?1:0}function r(t,e){var n,r,i,o=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" ")}function i(t,e,n,r){"function"==typeof t.addEventListener?t.addEventListener(e,n,r||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,n)}function o(t,e,n,r){"function"==typeof t.removeEventListener?t.removeEventListener(e,n,r||!1):"function"==typeof t.detatchEvent&&t.detatchEvent("on"+e,n)}function a(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(t,e){for(var n=e;n;){if(n==t)return!0;n=c(n)}return!1}function c(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}"IntersectionObserver"in t&&"IntersectionObserverEntry"in t&&"intersectionRatio"in t.IntersectionObserverEntry.prototype?"isIntersecting"in t.IntersectionObserverEntry.prototype||Object.defineProperty(t.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}):(r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},r.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,n){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==n[e-1]}))},r.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(t,"resize",this._checkForIntersections,!0),i(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in t&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(t,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),r=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var o=i.element,s=a(o),c=this._rootContainsTarget(o),u=i.entry,l=e&&c&&this._computeTargetAndRootIntersection(o,r),f=i.entry=new n({time:t.performance&&performance.now&&performance.now(),target:o,boundingClientRect:s,rootBounds:r,intersectionRect:l});u?e&&c?this._hasCrossedThreshold(u,f)&&this._queuedEntries.push(f):u&&u.isIntersecting&&this._queuedEntries.push(f):this._queuedEntries.push(f)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=t.getComputedStyle(n).display){for(var i,o,s,u,l,f,d,p,h=a(n),g=c(n),v=!1;!v;){var m=null,y=1==g.nodeType?t.getComputedStyle(g):{};if("none"==y.display)return;if(g==this.root||g==e?(v=!0,m=r):g!=e.body&&g!=e.documentElement&&"visible"!=y.overflow&&(m=a(g)),m&&(i=m,o=h,s=void 0,u=void 0,l=void 0,f=void 0,d=void 0,p=void 0,s=Math.max(i.top,o.top),u=Math.min(i.bottom,o.bottom),l=Math.max(i.left,o.left),f=Math.min(i.right,o.right),p=u-s,!(h=(d=f-l)>=0&&p>=0&&{top:s,bottom:u,left:l,right:f,width:d,height:p})))break;g=c(g)}return h}},r.prototype._getRootRect=function(){var t;if(this.root)t=a(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,n){return"px"==e.unit?e.value:e.value*(n%2?t.width:t.height)/100})),n={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(t,e){var n=t&&t.isIntersecting?t.intersectionRatio||0:-1,r=e.isIntersecting?e.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||s(e,this.root)},r.prototype._rootContainsTarget=function(t){return s(this.root||e,t)},r.prototype._registerInstance=function(){},r.prototype._unregisterInstance=function(){},t.IntersectionObserver=r,t.IntersectionObserverEntry=n)}(window,document),function(t){"object"==("undefined"==typeof exports?"undefined":Uv(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}((function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){return i(e[a][1][t]||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),c=Object.prototype.toString;function u(t){if(!(this instanceof u))return new u(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,l)))throw new Error(a[n]);this._dict_set=!0}}function l(t,e){var n=new u(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}u.prototype.push=function(t,e){var n,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===c.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=u,n.deflate=l,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,l(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,l(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,n){var r=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),c=t("./zlib/zstream"),u=t("./zlib/gzheader"),l=Object.prototype.toString;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(s[n])}function d(t,e){var n=new f(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(t,e){var n,s,c,u,f,d=this.strm,p=this.options.chunkSize,h=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?d.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(p),d.next_out=0,d.avail_out=p),(n=r.inflate(d,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&h&&(n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);d.next_out&&(0!==d.avail_out&&n!==a.Z_STREAM_END&&(0!==d.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(d.output,d.next_out),u=d.next_out-c,f=o.buf2string(d.output,c),d.next_out=u,d.avail_out=p-u,u&&i.arraySet(d.output,d.output,c,u,0),this.onData(f)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((0<d.avail_in||0===d.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(d.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=f,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e,n,r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!=Uv(i))throw new TypeError(i+"must be non-object");for(var o in i)e=i,n=o,Object.prototype.hasOwnProperty.call(e,n)&&(t[o]=i[o])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],4:[function(t,e,n){var r=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(t,e){if(e<65534&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,n.string2buf=function(t){var e,n,i,o,a,s=t.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(c),o=a=0;a<c;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e},n.buf2binstring=function(t){return c(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,o,s=e||t.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=t[n++])<128)u[r++]=i;else if(4<(o=a[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&t[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return c(u,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},{"./common":3}],5:[function(t,e,n){e.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],6:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,n){var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],8:[function(t,e,n){var r,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),c=t("./messages"),u=-2,l=258,f=262,d=113;function p(t,e){return t.msg=c[e],e}function h(t){return(t<<1)-(4<t?9:0)}function g(t){for(var e=t.length;0<=--e;)t[e]=0}function v(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function m(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,v(t.strm)}function y(t,e){t.pending_buf[t.pending++]=e}function b(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function _(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-f?t.strstart-(t.w_size-f):0,u=t.window,d=t.w_mask,p=t.prev,h=t.strstart+l,g=u[o+a-1],v=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===v&&u[n+a-1]===g&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<h);if(r=l-(h-o),o=h-l,a<r){if(t.match_start=e,s<=(a=r))break;g=u[o+a-1],v=u[o+a]}}}while((e=p[e&d])>c&&0!=--i);return a<=t.lookahead?a:t.lookahead}function w(t){var e,n,r,o,c,u,l,d,p,h,g=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=g+(g-f)){for(i.arraySet(t.window,t.window,g,g,0),t.match_start-=g,t.strstart-=g,t.block_start-=g,e=n=t.hash_size;r=t.head[--e],t.head[e]=g<=r?r-g:0,--n;);for(e=n=g;r=t.prev[--e],t.prev[e]=g<=r?r-g:0,--n;);o+=g}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,d=t.strstart+t.lookahead,h=void 0,(p=o)<(h=u.avail_in)&&(h=p),n=0===h?0:(u.avail_in-=h,i.arraySet(l,u.input,u.next_in,h,d),1===u.state.wrap?u.adler=a(u.adler,l,h,d):2===u.state.wrap&&(u.adler=s(u.adler,l,h,d)),u.next_in+=h,u.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=3)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+3-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<f&&0!==t.strm.avail_in)}function E(t,e){for(var n,r;;){if(t.lookahead<f){if(w(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-f&&(t.match_length=_(t,n)),t.match_length>=3)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function S(t,e){for(var n,r,i;;){if(t.lookahead<f){if(w(t),t.lookahead<f&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-f&&(t.match_length=_(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(m(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&m(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}function C(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function x(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function T(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:d,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):p(t,u)}function O(t){var e,n=T(t);return 0===n&&((e=t.state).window_size=2*e.w_size,g(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function I(t,e,n,r,o,a){if(!t)return u;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||e<0||9<e||a<0||4<a)return p(t,u);8===r&&(r=9);var c=new x;return(t.state=c).strm=t,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=a,c.method=n,O(t)}r=[new C(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(w(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,m(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-f&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(m(t,!1),t.strm.avail_out),1)})),new C(4,4,8,4,E),new C(4,5,16,8,E),new C(4,6,32,32,E),new C(4,4,16,16,S),new C(8,16,32,32,S),new C(8,16,128,128,S),new C(8,32,128,256,S),new C(32,128,258,1024,S),new C(32,258,258,4096,S)],n.deflateInit=function(t,e){return I(t,e,8,15,8,0)},n.deflateInit2=I,n.deflateReset=O,n.deflateResetKeep=T,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?u:(t.state.gzhead=e,0):u},n.deflate=function(t,e){var n,i,a,c;if(!t||!t.state||5<e||e<0)return t?p(t,u):u;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return p(t,0===t.avail_out?-5:u);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,y(i,31),y(i,139),y(i,8),i.gzhead?(y(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),y(i,255&i.gzhead.time),y(i,i.gzhead.time>>8&255),y(i,i.gzhead.time>>16&255),y(i,i.gzhead.time>>24&255),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(y(i,255&i.gzhead.extra.length),y(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(y(i,0),y(i,0),y(i,0),y(i,0),y(i,0),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,3),i.status=d);else{var f=8+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=d,b(i,f),0!==i.strstart&&(b(i,t.adler>>>16),b(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),v(t),a=i.pending,i.pending!==i.pending_buf_size));)y(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),v(t),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}y(i,c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),v(t),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}y(i,c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&v(t),i.pending+2<=i.pending_buf_size&&(y(i,255&t.adler),y(i,t.adler>>8&255),t.adler=0,i.status=d)):i.status=d),0!==i.pending){if(v(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&h(e)<=h(n)&&4!==e)return p(t,-5);if(666===i.status&&0!==t.avail_in)return p(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var _=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(w(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=l){if(w(t),t.lookahead<=l&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+l;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=l-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(m(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(m(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(m(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==_&&4!==_||(i.status=666),1===_||3===_)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===_&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(g(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),v(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(y(i,255&t.adler),y(i,t.adler>>8&255),y(i,t.adler>>16&255),y(i,t.adler>>24&255),y(i,255&t.total_in),y(i,t.total_in>>8&255),y(i,t.total_in>>16&255),y(i,t.total_in>>24&255)):(b(i,t.adler>>>16),b(i,65535&t.adler)),v(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==d&&666!==e?p(t,u):(t.state=null,e===d?p(t,-3):0):u},n.deflateSetDictionary=function(t,e){var n,r,o,s,c,l,f,d,p=e.length;if(!t||!t.state)return u;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return u;for(1===s&&(t.adler=a(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(g(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new i.Buf8(n.w_size),i.arraySet(d,e,p-n.w_size,n.w_size,0),e=d,p=n.w_size),c=t.avail_in,l=t.next_in,f=t.input,t.avail_in=p,t.next_in=0,t.input=e,w(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,w(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=l,t.input=f,t.avail_in=c,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,n){e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,n){e.exports=function(t,e){var n,r,i,o,a,s,c,u,l,f,d,p,h,g,v,m,y,b,_,w,E,S,C,x,T;n=t.state,r=t.next_in,x=t.input,i=r+(t.avail_in-5),o=t.next_out,T=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),c=n.dmax,u=n.wsize,l=n.whave,f=n.wnext,d=n.window,p=n.hold,h=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{h<15&&(p+=x[r++]<<h,h+=8,p+=x[r++]<<h,h+=8),b=g[p&m];e:for(;;){if(p>>>=_=b>>>24,h-=_,0==(_=b>>>16&255))T[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(p&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&b,(_&=15)&&(h<_&&(p+=x[r++]<<h,h+=8),w+=p&(1<<_)-1,p>>>=_,h-=_),h<15&&(p+=x[r++]<<h,h+=8,p+=x[r++]<<h,h+=8),b=v[p&y];n:for(;;){if(p>>>=_=b>>>24,h-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(p&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(E=65535&b,h<(_&=15)&&(p+=x[r++]<<h,(h+=8)<_&&(p+=x[r++]<<h,h+=8)),c<(E+=p&(1<<_)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=_,h-=_,(_=o-a)<E){if(l<(_=E-_)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(C=d,(S=0)===f){if(S+=u-_,_<w){for(w-=_;T[o++]=d[S++],--_;);S=o-E,C=T}}else if(f<_){if(S+=u+f-_,(_-=f)<w){for(w-=_;T[o++]=d[S++],--_;);if(S=0,f<w){for(w-=_=f;T[o++]=d[S++],--_;);S=o-E,C=T}}}else if(S+=f-_,_<w){for(w-=_;T[o++]=d[S++],--_;);S=o-E,C=T}for(;2<w;)T[o++]=C[S++],T[o++]=C[S++],T[o++]=C[S++],w-=3;w&&(T[o++]=C[S++],1<w&&(T[o++]=C[S++]))}else{for(S=o-E;T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],2<(w-=3););w&&(T[o++]=T[S++],1<w&&(T[o++]=T[S++]))}break}}break}}while(r<i&&o<s);r-=w=h>>3,p&=(1<<(h-=w<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}},{}],11:[function(t,e,n){var r=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),c=-2;function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):c}function d(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,f(t)):c}function p(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?c:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,d(t))):c}function h(t,e){var n,r;return t?(r=new l,(t.state=r).window=null,0!==(n=p(t,e))&&(t.state=null),n):c}var g,v,m=!0;function y(t){if(m){var e;for(g=new r.Buf32(512),v=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,v,0,t.work,{bits:5}),m=!1}t.lencode=g,t.lenbits=9,t.distcode=v,t.distbits=5}function b(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=d,n.inflateReset2=p,n.inflateResetKeep=f,n.inflateInit=function(t){return h(t,15)},n.inflateInit2=h,n.inflate=function(t,e){var n,l,f,d,p,h,g,v,m,_,w,E,S,C,x,T,O,I,k,A,D,P,M,R,L=0,N=new r.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return c;12===(n=t.state).mode&&(n.mode=13),p=t.next_out,f=t.output,g=t.avail_out,d=t.next_in,l=t.input,h=t.avail_in,v=n.hold,m=n.bits,_=h,w=g,P=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;m<16;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(2&n.wrap&&35615===v){N[n.check=0]=255&v,N[1]=v>>>8&255,n.check=o(n.check,N,2,0),m=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){t.msg="unknown compression method",n.mode=30;break}if(m-=4,D=8+(15&(v>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,t.adler=n.check=1,n.mode=512&v?10:12,m=v=0;break;case 2:for(;m<16;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(n.flags=v,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(N[0]=255&v,N[1]=v>>>8&255,n.check=o(n.check,N,2,0)),m=v=0,n.mode=3;case 3:for(;m<32;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.head&&(n.head.time=v),512&n.flags&&(N[0]=255&v,N[1]=v>>>8&255,N[2]=v>>>16&255,N[3]=v>>>24&255,n.check=o(n.check,N,4,0)),m=v=0,n.mode=4;case 4:for(;m<16;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(N[0]=255&v,N[1]=v>>>8&255,n.check=o(n.check,N,2,0)),m=v=0,n.mode=5;case 5:if(1024&n.flags){for(;m<16;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(N[0]=255&v,N[1]=v>>>8&255,n.check=o(n.check,N,2,0)),m=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(h<(E=n.length)&&(E=h),E&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,E,D)),512&n.flags&&(n.check=o(n.check,l,E,d)),h-=E,d+=E,n.length-=E),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===h)break t;for(E=0;D=l[d+E++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D)),D&&E<h;);if(512&n.flags&&(n.check=o(n.check,l,E,d)),h-=E,d+=E,D)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===h)break t;for(E=0;D=l[d+E++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D)),D&&E<h;);if(512&n.flags&&(n.check=o(n.check,l,E,d)),h-=E,d+=E,D)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;m<16;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(v!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}m=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;m<32;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}t.adler=n.check=u(v),m=v=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=p,t.avail_out=g,t.next_in=d,t.avail_in=h,n.hold=v,n.bits=m,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){v>>>=7&m,m-=7&m,n.mode=27;break}for(;m<3;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}switch(n.last=1&v,m-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(y(n),n.mode=20,6!==e)break;v>>>=2,m-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}v>>>=2,m-=2;break;case 14:for(v>>>=7&m,m-=7&m;m<32;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if((65535&v)!=(v>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,m=v=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(E=n.length){if(h<E&&(E=h),g<E&&(E=g),0===E)break t;r.arraySet(f,l,d,E,p),h-=E,d+=E,g-=E,p+=E,n.length-=E;break}n.mode=12;break;case 17:for(;m<14;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(n.nlen=257+(31&v),v>>>=5,m-=5,n.ndist=1+(31&v),v>>>=5,m-=5,n.ncode=4+(15&v),v>>>=4,m-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;m<3;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.lens[j[n.have++]]=7&v,v>>>=3,m-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},P=s(0,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,P){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=(L=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,O=65535&L,!((x=L>>>24)<=m);){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(O<16)v>>>=x,m-=x,n.lens[n.have++]=O;else{if(16===O){for(R=x+2;m<R;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(v>>>=x,m-=x,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],E=3+(3&v),v>>>=2,m-=2}else if(17===O){for(R=x+3;m<R;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}m-=x,D=0,E=3+(7&(v>>>=x)),v>>>=3,m-=3}else{for(R=x+7;m<R;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}m-=x,D=0,E=11+(127&(v>>>=x)),v>>>=7,m-=7}if(n.have+E>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;E--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,M={bits:n.lenbits},P=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,P){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},P=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,P){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=h&&258<=g){t.next_out=p,t.avail_out=g,t.next_in=d,t.avail_in=h,n.hold=v,n.bits=m,a(t,w),p=t.next_out,f=t.output,g=t.avail_out,d=t.next_in,l=t.input,h=t.avail_in,v=n.hold,m=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=(L=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,O=65535&L,!((x=L>>>24)<=m);){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(T&&0==(240&T)){for(I=x,k=T,A=O;T=(L=n.lencode[A+((v&(1<<I+k)-1)>>I)])>>>16&255,O=65535&L,!(I+(x=L>>>24)<=m);){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}v>>>=I,m-=I,n.back+=I}if(v>>>=x,m-=x,n.back+=x,n.length=O,0===T){n.mode=26;break}if(32&T){n.back=-1,n.mode=12;break}if(64&T){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&T,n.mode=22;case 22:if(n.extra){for(R=n.extra;m<R;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=(L=n.distcode[v&(1<<n.distbits)-1])>>>16&255,O=65535&L,!((x=L>>>24)<=m);){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(0==(240&T)){for(I=x,k=T,A=O;T=(L=n.distcode[A+((v&(1<<I+k)-1)>>I)])>>>16&255,O=65535&L,!(I+(x=L>>>24)<=m);){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}v>>>=I,m-=I,n.back+=I}if(v>>>=x,m-=x,n.back+=x,64&T){t.msg="invalid distance code",n.mode=30;break}n.offset=O,n.extra=15&T,n.mode=24;case 24:if(n.extra){for(R=n.extra;m<R;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===g)break t;if(E=w-g,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}E>n.wnext?(E-=n.wnext,S=n.wsize-E):S=n.wnext-E,E>n.length&&(E=n.length),C=n.window}else C=f,S=p-n.offset,E=n.length;for(g<E&&(E=g),g-=E,n.length-=E;f[p++]=C[S++],--E;);0===n.length&&(n.mode=21);break;case 26:if(0===g)break t;f[p++]=n.length,g--,n.mode=21;break;case 27:if(n.wrap){for(;m<32;){if(0===h)break t;h--,v|=l[d++]<<m,m+=8}if(w-=g,t.total_out+=w,n.total+=w,w&&(t.adler=n.check=n.flags?o(n.check,f,w,p-w):i(n.check,f,w,p-w)),w=g,(n.flags?v:u(v))!==n.check){t.msg="incorrect data check",n.mode=30;break}m=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;m<32;){if(0===h)break t;h--,v+=l[d++]<<m,m+=8}if(v!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}m=v=0}n.mode=29;case 29:P=1;break t;case 30:P=-3;break t;case 31:return-4;case 32:default:return c}return t.next_out=p,t.avail_out=g,t.next_in=d,t.avail_in=h,n.hold=v,n.bits=m,(n.wsize||w!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&b(t,t.output,t.next_out,w-t.avail_out)?(n.mode=31,-4):(_-=t.avail_in,w-=t.avail_out,t.total_in+=_,t.total_out+=w,n.total+=w,n.wrap&&w&&(t.adler=n.check=n.flags?o(n.check,f,w,t.next_out-w):i(n.check,f,w,t.next_out-w)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===_&&0===w||4===e)&&0===P&&(P=-5),P)},n.inflateEnd=function(t){if(!t||!t.state)return c;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?c:((n.head=e).done=!1,0):c},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?c:11===n.mode&&i(1,e,r,0)!==n.check?-3:b(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):c},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,n){var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,c,u,l,f,d){var p,h,g,v,m,y,b,_,w,E=d.bits,S=0,C=0,x=0,T=0,O=0,I=0,k=0,A=0,D=0,P=0,M=null,R=0,L=new r.Buf16(16),N=new r.Buf16(16),j=null,q=0;for(S=0;S<=15;S++)L[S]=0;for(C=0;C<c;C++)L[e[n+C]]++;for(O=E,T=15;1<=T&&0===L[T];T--);if(T<O&&(O=T),0===T)return u[l++]=20971520,u[l++]=20971520,d.bits=1,0;for(x=1;x<T&&0===L[x];x++);for(O<x&&(O=x),S=A=1;S<=15;S++)if(A<<=1,(A-=L[S])<0)return-1;if(0<A&&(0===t||1!==T))return-1;for(N[1]=0,S=1;S<15;S++)N[S+1]=N[S]+L[S];for(C=0;C<c;C++)0!==e[n+C]&&(f[N[e[n+C]]++]=C);if(0===t?(M=j=f,y=19):1===t?(M=i,R-=257,j=o,q-=257,y=256):(M=a,j=s,y=-1),S=x,m=l,k=C=P=0,g=-1,v=(D=1<<(I=O))-1,1===t&&852<D||2===t&&592<D)return 1;for(;;){for(b=S-k,f[C]<y?(_=0,w=f[C]):f[C]>y?(_=j[q+f[C]],w=M[R+f[C]]):(_=96,w=0),p=1<<S-k,x=h=1<<I;u[m+(P>>k)+(h-=p)]=b<<24|_<<16|w|0,0!==h;);for(p=1<<S-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,C++,0==--L[S]){if(S===T)break;S=e[n+f[C]]}if(O<S&&(P&v)!==g){for(0===k&&(k=O),m+=x,A=1<<(I=S-k);I+k<T&&!((A-=L[I+k])<=0);)I++,A<<=1;if(D+=1<<I,1===t&&852<D||2===t&&592<D)return 1;u[g=P&v]=O<<24|I<<16|m-l|0}}return 0!==P&&(u[m+P]=S-k<<24|64<<16|0),d.bits=O,0}},{"../utils/common":3}],13:[function(t,e,n){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,n){var r=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,a=286,s=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],l=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=new Array(576);i(p);var h=new Array(60);i(h);var g=new Array(512);i(g);var v=new Array(256);i(v);var m=new Array(29);i(m);var y,b,_,w=new Array(s);function E(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function S(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function C(t){return t<256?g[t]:g[256+(t>>>7)]}function x(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function T(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,x(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function O(t,e,n){T(t,n[2*e],n[2*e+1])}function I(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function k(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=c;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=I(o[s]++,s))}}function A(t){var e;for(e=0;e<a;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function D(t){8<t.bi_valid?x(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function P(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function M(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&P(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!P(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function R(t,e,n){var r,i,a,s,c=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*c]<<8|t.pending_buf[t.d_buf+2*c+1],i=t.pending_buf[t.l_buf+c],c++,0===r?O(t,i,e):(O(t,(a=v[i])+o+1,e),0!==(s=u[a])&&T(t,i-=m[a],s),O(t,a=C(--r),n),0!==(s=l[a])&&T(t,r-=w[a],s)),c<t.last_lit;);O(t,256,e)}function L(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)M(t,o,n);for(i=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],M(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,M(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,l=e.max_code,f=e.stat_desc.static_tree,d=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,g=e.stat_desc.max_length,v=0;for(o=0;o<=c;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)g<(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)&&(o=g,v++),u[2*r+1]=o,l<r||(t.bl_count[o]++,a=0,h<=r&&(a=p[r-h]),s=u[2*r],t.opt_len+=s*(o+a),d&&(t.static_len+=s*(f[2*r+1]+a)));if(0!==v){do{for(o=g-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[g]--,v-=2}while(0<v);for(o=g;0!==o;o--)for(r=t.bl_count[o];0!==r;)l<(i=t.heap[--n])||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),k(o,l,t.bl_count)}function N(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<c&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,(s=0)===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4))}function j(t,e,n){var r,i,o=-1,a=e[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<c&&i===a)){if(s<u)for(;O(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(O(t,i,t.bl_tree),s--),O(t,16,t.bl_tree),T(t,s-3,2)):s<=10?(O(t,17,t.bl_tree),T(t,s-3,3)):(O(t,18,t.bl_tree),T(t,s-11,7));o=i,(s=0)===a?(c=138,u=3):i===a?(c=6,u=3):(c=7,u=4)}}i(w);var q=!1;function z(t,e,n,i){var o,a,s;T(t,0+(i?1:0),3),a=e,s=n,D(o=t),x(o,s),x(o,~s),r.arraySet(o.pending_buf,o.window,a,s,o.pending),o.pending+=s}n._tr_init=function(t){q||(function(){var t,e,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(m[r]=n,t=0;t<1<<u[r];t++)v[n++]=r;for(v[n-1]=r,r=i=0;r<16;r++)for(w[r]=i,t=0;t<1<<l[r];t++)g[i++]=r;for(i>>=7;r<s;r++)for(w[r]=i<<7,t=0;t<1<<l[r]-7;t++)g[256+i++]=r;for(e=0;e<=c;e++)o[e]=0;for(t=0;t<=143;)p[2*t+1]=8,t++,o[8]++;for(;t<=255;)p[2*t+1]=9,t++,o[9]++;for(;t<=279;)p[2*t+1]=7,t++,o[7]++;for(;t<=287;)p[2*t+1]=8,t++,o[8]++;for(k(p,287,o),t=0;t<s;t++)h[2*t+1]=5,h[2*t]=I(t,5);y=new E(p,u,257,a,c),b=new E(h,l,0,s,c),_=new E(new Array(0),f,0,19,7)}(),q=!0),t.l_desc=new S(t.dyn_ltree,y),t.d_desc=new S(t.dyn_dtree,b),t.bl_desc=new S(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,A(t)},n._tr_stored_block=z,n._tr_flush_block=function(t,e,n,r){var i,a,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),L(t,t.l_desc),L(t,t.d_desc),s=function(t){var e;for(N(t,t.dyn_ltree,t.l_desc.max_code),N(t,t.dyn_dtree,t.d_desc.max_code),L(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*d[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?z(t,e,n,r):4===t.strategy||a===i?(T(t,2+(r?1:0),3),R(t,p,h)):(T(t,4+(r?1:0),3),function(t,e,n,r){var i;for(T(t,e-257,5),T(t,n-1,5),T(t,r-4,4),i=0;i<r;i++)T(t,t.bl_tree[2*d[i]+1],3);j(t,t.dyn_ltree,e-1),j(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),R(t,t.dyn_ltree,t.dyn_dtree)),A(t),r&&D(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(v[n]+o+1)]++,t.dyn_dtree[2*C(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){var e;T(t,2,3),O(t,256,p),16===(e=t).bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,n){e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,n){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}));var om=Object.freeze({__proto__:null,name:"disablePullToRefresh",module:function(t){return{name:"Disable pull to refresh",version:1,immediate:!1,init:function(){$("body,html").css({"overscroll-behavior-y":"contain","overscroll-behavior-x":"none"})}}}}),am=Object.freeze({__proto__:null,name:"responsive",module:function(t){var e=t.utils,n=t.observer,r=t.events;return{name:"Responsive",version:1,immediate:!1,init:function(){$(window).on("resize",e.debounce((function(){n.notify(r.SHELL_RESIZED,{newWidth:window.innerWidth,newHeight:window.innerHeight})}),250)),$(e.getScrollContainer()).on("scroll",e.throttle((function(t){var e=t.target;n.notify(r.PAGE_SCROLL,{element:e,percent:Math.round(e.scrollTop/(e.scrollHeight-e.clientHeight)*100)})}),250))}}}}),sm=Object.freeze({__proto__:null,name:"dataBinding",module:function(t){var e=t.config,n=t.core;return{name:"Element Data Binding",version:1,immediate:!0,init:function(){},BindableElementData:function(t){var r,i,o,a,s=(i={callbacks:{},on:function(t,e){this.callbacks[t]=this.callbacks[t]||[],this.callbacks[t].push(e)},publish:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.callbacks[t]=this.callbacks[t]||[];for(var r=0,i=this.callbacks[t].length;r<i;r++)this.callbacks[t][r].apply(this,e)}},o="data-bind-"+(r=t),a=r+":change",document.addEventListener("change",(function(t){var e=t.target;if(e){var n=e.getAttribute(o);n&&""!==n&&i.publish(a,n,e.value)}}),!1),i.on(a,(function(t,r){for(var i,a=document.querySelectorAll("["+o+"="+t+"]"),s=0,c=a.length;s<c;s++)"input"===(i=a[s].tagName.toLowerCase())||"textarea"===i||"select"===i?a[s].value=r:a[s].innerHTML=n.replaceVariableKeywords(r,e.currentStep)})),i),c={attributes:{},set:function(t,e){this._internal_set(t,e)},get:function(t){return this._internal_get(t)},defineSetter:function(t){this.set=function(e,n){this._internal_set(e,t(n))}},defineGetter:function(t){this.get=function(e){var n=t(this.attributes[e]);return this.attributes[e]!==n&&this._internal_set(e,n),n}},_internal_get:function(t){return this.attributes[t]},_internal_set:function(e,n){this.attributes[e]=n,s.publish(t+":change",e,n,this)},_binder:s};return s.on(t+":change",(function(t,e,n){n!==c&&c.set(t,e)})),c}}}}),cm=Object.freeze({__proto__:null,name:"internallink",module:function(t){var e=t.core,n=t.utils,r=t.config;return{name:"Internal link",version:1,immediate:!1,init:function(){},getLinkStatus:function(t,i){if(!t)return i({complete:null});var o=t.split(":"),a=o.shift();if(a){var s=o.length>0?o.join(":"):a;switch(a){case"page":var c=n.determineStepNumber(s);if(void 0===c||!r.stepData[c])return void window.SparkAPI.warn("internallink::Specified page link doesn't exist: "+s);r.stepData[c].complete?i({complete:!0}):i({complete:!1});break;case"group":if(!r.stepGroups[s])return void window.SparkAPI.warn("internallink::Specified group link doesn't exist: "+s);r.stepGroups[s].complete?i({complete:!0}):i({complete:!1});break;case"sr":var u=s.split("|"),l=e.getDataset(u[0]);if(!l)return void window.SparkAPI.warn("internallink:sr :: Dataset "+u[0]+" not found.");var f=l.getItemData(parseInt(u[1],10));if(!f)return void window.SparkAPI.warn("internallink:sr :: Content not found at index "+u[1]+".");i({complete:"completed"===f.state});break;case"next":var d=r.stepData[r.currentStep+1];i({complete:!!d&&d.complete});break;case"complete":i({complete:null});break;case"previous":default:i({complete:!1})}}},exec:function(r,i,o){if(!r)return o({forcenotify:!1});"function"==typeof i&&(o=i,i=null);var a=r.split(":"),s=a.shift(),c=a.length>0?a.join(":"):s;if(s)switch(s){case"complete":o({forcenotify:!0});break;case"url":var u=""+c;u.indexOf("http")>-1||u.indexOf("www.")>-1?(0!==u.indexOf("http")&&0!==u.indexOf("//")&&(u="//"+u),window.open(u)):window.open(t.core.getAssetPath(u,""),""),o({forcenotify:!1});break;case"mailto":case"tel":window.location.href=r,o({forcenotify:!1});break;case"page":o({forcenotify:!1,leaving:!0}),e.gotoStep(c);break;case"next":o({forcenotify:!1,leaving:!0}),e.nextStep();break;case"previous":o({forcenotify:!1,leaving:!0}),e.previousStep();break;case"group":o({forcenotify:!1,leaving:!0}),e.gotoGroup(c);break;case"sr":var l=c.split("|"),f=e.getDataset(l[0]).type(),d=i?i.triggerElement:null;"srm"!==f&&"sr"!==f||(window.SparkAPI.showSRItem(l[0],parseInt(l[1]),{triggerElement:d,onComplete:function(){o({forcenotify:!1})}}),"sr"===f&&o({forcenotify:!1}));break;case"scroll":var p=c.split("|");n.scrollToElement(p[0],void 0,(function(){o({forcenotify:!1})}));break;case"file":var h=e.extractFilePathInfo(c);window.open(e.getAssetPath(h.filename,h.path)),o({forcenotify:!1});break;case"project":window.open(c),o({forcenotify:!1});break;default:o({forcenotify:!1})}else o({forcenotify:!1})}}}}),um=Object.freeze({__proto__:null,name:"advancedLinks",module:function(t){var e=t.core,n=t.config,r=t.modules;return{name:"Advanced Links",version:1,immediate:!1,init:function(){e.addTextModifier("AdvancedLinks",(function(i){$(i).find("a[rel=modalPanel],button[rel=modalPanel]").off("click").on("click",(function(e){e.preventDefault();var n=$(this),r=$(n.attr("data-target")||"").html(),i=n.attr("href");"#"!==i&&(r="<iframe src='"+i+"' frameborder='0' width='100%' height='100%'></iframe>"),function(e,n){t.core.showFullscreenOverlay(e,n)}(r,n.attr("data-transition")||"fade")})),$(i).find("a[rel=showROItem],button[rel=showROItem]").off("click").on("click",(function(t){t.preventDefault();var e=$(this),r=parseInt(e.attr("href")||"",10);if(!isNaN(r)){var i=n.stepData[n.currentStep].component;if("function"==typeof i.invokePopup)try{i.invokePopup(r,i)}catch(t){window.SparkAPI.log("Shell.js :: 'showROItem' Unable to show RO item.",t)}else window.SparkAPI.log("Shell.js :: 'showROItem' - function 'invokePopup' does not exist on specified step. Step must be of RO type.")}})),$(i).find("a[rel=showSRItem],button[rel=showSRItem]").off("click").on("click",(function(t){t.preventDefault();var r=($(this).attr("href")||"").split(":"),i=r[0],o=parseInt(r[1]||"0",10),a=e.getDataset(i).getItemData(o),s="string"==typeof a.content?"popup":"modpopup";isNaN(o)||(n.stepData[n.currentStep].currentContent=a,e.runModuleFunction("srDatasetToPopup","show",[s,i,o,{}]))})),$(i).find("a[rel=showInPopup],button[rel=showInPopup]").off("click").on("click",(function(t){t.preventDefault();var e=$(this),n=$(e.attr("data-target")||"").html(),i=e.attr("data-options")||"",o=e.attr("data-class")||"",a=e.attr("href");"#"!==a&&(n="<iframe src='"+a+"' frameborder='0' width='100%' height='100%'></iframe>");var s=i.split(",");r.popup.show({text:n,processURLs:!1,customClass:o,overlay:"1"===s[4]||void 0===s[4]})})),$(i).find("a[rel=closeOwnPopup],button[rel=closeOwnPopup]").off("click").on("click",(function(t){t.preventDefault();var e=$(this).parents(".popupInner").data("pid");r.popup.hide({id:e})})),$(i).find("a[rel=scrollto],button[rel=scrollto]").off("click").on("click",(function(t){t.preventDefault();var e=$(this).attr("href")||"";if(e){var n=$(e).offset(),r=$(this).data("viewportoffset");void 0===r&&(r=100),TweenLite.to(window,2,{scrollTo:{x:n.left-r,y:n.top-r},ease:"Power2.easeOut"})}}))}))}}}}),lm=Object.freeze({__proto__:null,name:"popup",module:function(t){var e=t.core,n=t.config,r=t.observer,i=t.utils,o=t.transitions,a=t.events,s={},c=[],u=0,l={};function f(t){27===t.keyCode&&p({id:t.data.id,triggeredBy:"close"})}function d(t){var n=t.popupObject.popup.getTextBox(),r=t.popupObject.popup.getCloser();e.setText(n,t.pages[t.currentPage].content,t.processURLs),t.pages[t.currentPage].visited=!0,t.pageReady=!1,t.lastPage>-1?(!function(t){if(window.__ISAUTHOR)return void(t.pages[t.lastPage]._tlx=null);if(void 0!==t.lastPage)if(null!==t.pages[t.lastPage].timelineexit){var n=$.extend(!0,{},t.pages[t.lastPage].timelineexit);!function(t,e,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if("slide"===t[r].presetIn.effect)switch(t[r].presetIn.options[0]){case"autoH":0===e&&e===n?(t[r].presetIn.options[0]="none",t[r].presetIn.options[1]="none"):t[r].presetIn.options[0]=e>=n?"left":"right";break;case"autoV":0===e&&e===n?(t[r].presetIn.options[0]="none",t[r].presetIn.options[1]="none"):t[r].presetIn.options[0]=e>=n?"up":"down"}if("slide"===t[r].presetOut.effect)switch(t[r].presetOut.options[0]){case"autoH":0===e&&e===n?(t[r].presetOut.options[0]="none",t[r].presetOut.options[1]="none"):t[r].presetOut.options[0]=e>=n?"left":"right";break;case"autoV":0===e&&e===n?(t[r].presetOut.options[0]="none",t[r].presetOut.options[1]="none"):t[r].presetOut.options[0]=e>=n?"up":"down"}}}(n,t.currentPage,t.lastPage||0),t.pages[t.lastPage]._tlx=e.createTimeline(n,!1,[])}else t.pages[t.lastPage]._tlx=null}(t),t.pages[t.lastPage]._tlx?(t.overlapPageAnimation,t.pages[t.lastPage]._tlx.eventCallback("onComplete",(function(t){t.pages[t.lastPage]._tlx.eventCallback("onComplete",null),t.pageReady=!0}),[t]),t.pages[t.lastPage]._tlx.play()):t.pageReady=!0):t.pageReady=!0,t.closeOnLastPage&&(t.currentPage===t.pages.length-1?r.removeClass("hidden"):r.addClass("hidden"))}function p(t){var n,i=void 0===t.animate||t.animate,s=!1;if(!0===t.hideAll)for(n=c.length-1;n>=0;n--)u(c[n].id,i);else u(t.id,i);function u(t,n){var r,i,a,u,l=h(t);null!==l&&(r=l.popup,i=r.getBox(),a=r.getOverlay(),(u="function"==typeof r.getPageControl?r.getPageControl():null)&&u.off("click",".popupPageButton"),l.isOpen=!1,l.current.lightbox&&l.current.morph&&$(document).off("keydown",f),!1===s&&!0===l.current.hasAudio&&(s=!0),"function"==typeof l.current.onBeforeClose&&l.current.onBeforeClose.apply(l,[l.current.onBeforeCloseContext,l.current.onBeforeCloseParam]),!0===n?o[l.current.transitionOut](i,"off",{speed:(l.current.speedOut||l.current.speed)/1e3,xProperty:l.current.xProperty,yProperty:l.current.yProperty,ease:l.current.transitionOutEase},(function(){i.remove(),l.current.triggerElement&&l.current.triggerElement.focus(),"function"==typeof l.current.onClose&&l.current.onClose.apply(l,[l.current.onCloseContext,l.current.onCloseParam])})):(i.remove(),l.current.triggerElement&&l.current.triggerElement.focus()),l.current.overlay?o.fade(a,"off",{speed:(l.current.speedOut||l.current.speed)/1e3,ease:l.current.transitionOutEase},(function(){a.remove()})):a.remove(),function(t){var e=0,n=c.length;for(e=0;e<n;e++)if(c[e].id===t){c.splice(e,1);break}}(t),c.length||(e.enablePageScroll(),e.releaseModal()))}t.element="popupInner"+t.id,r.notify(a.POPUP_CLOSED,t)}function h(t){var e=0,n=c.length;for(e=0;e<n;e++)if(c[e].id===t)return c[e];return null}return{name:"Popup",version:1,immediate:!1,init:function(){var t,e,n,i=new window.shellPopup,o=i.getOverlay(),f=i.getBox(),d=i.getCloser(),h=i.getTextBox(),g=f.css("margin"),v=f.css("position");if("getComputedStyle"in window){var m=window.getComputedStyle(h[0]);g=[m.getPropertyValue("margin-top"),m.getPropertyValue("margin-right"),m.getPropertyValue("margin-bottom"),m.getPropertyValue("margin-left")].join(" ")}else g="0px";var y=f.css("width"),b=f.css("height");if(n=h.css("width"),s.belongsTo="none",s.w=parseInt(y,10)||f.width(),s.h=parseInt(b,10)||f.height(),s.wMax="none",s.wMaxUnit="px",s.wMin="none",s.wMinUnit="px",s.hMax="none",s.hMaxUnit="px",s.hMin="none",s.hMinUnit="px",s.position=v,s.xProperty="auto"===f.css("right")?"left":"right",s.yProperty="auto"===f.css("bottom")?"top":"bottom",t=f.css(s.xProperty),e=f.css(s.yProperty),s.x="auto"==t?"centre":parseFloat(t),s.y="auto"==e?"centre":parseFloat(e),s.sxUnit=y.indexOf("%")>-1?"%":"px",s.syUnit=b.indexOf("%")>-1?"%":"px",s.pxUnit=f.css(s.xProperty).indexOf("%")>-1?"%":"px",s.pyUnit=f.css(s.yProperty).indexOf("%")>-1?"%":"px",s.transitionIn="fade",s.transitionOut="fade",s.transitionInEase="Cubic.easeOut",s.transitionOutEase="Cubic.easeOut",s.speed=300,s.lightbox=!1,s.text="",s.pages=[],s.currentPage=0,s.overlapPageAnimation=0,s.scrollable=!1,s.processURLs=!0,s.textWidth="0px"===n?"auto":parseInt(n,10),s.centreText="0px auto 0px auto"===g,s.twUnit=n.indexOf("%")>-1?"%":"px",s.morph=!0,s.morphAnimate=!0,s.media=null,s.stopAudio=!1,s.closer=!0,s.closeOnLastPage=!1,s.closeLabel=d.text(),s.overlay=!0,s.useID=-1,s.customClass="",s.tabIndexStart=1,s.onBeforeClose=null,s.onBeforeCloseContext=null,s.onClose=null,s.onCloseContext=null,s.onCloseParam=null,s.onOpen=null,s.onOpenContext=null,s.onOpenParam=null,s.delayMedia=!0,"function"==typeof i.getGlobalDefaultOptions){var _=i.getGlobalDefaultOptions();s=$.extend(!0,s,_)}l.all=s,r.add(a.STEP_BEFOREREADY,(function(){u=0,c.length>0&&p({id:0,animate:!1,hideAll:!0})})),o.remove(),f.remove()},getDefaults:function(){return l.all},getDefaultsForBreakpoint:function(t){if(!("matchMedia"in window))return l.all;for(var e in l)if("all"!=e&&!0===matchMedia(e).matches&&!0===matchMedia(t).matches)return l[e];return l.all},show:function(t){var s,g,v,m,y,b,_,w,E,S,C,x,T,O,I={},k={};if(I=$.extend(!0,I,l.all,t),t&&void 0!==I.x||(I.x=.5*window.innerWidth-.5*I.w),t&&void 0!==I.y||(I.y=.5*window.innerHeight-.5*I.h),y=I.w,b=isNaN(I.h)?0:I.h,_=isNaN(I.x)?0:I.x,w=isNaN(I.y)?0:I.y,S=I.textWidth,C=I.morph,x=I.closer,I.media&&I.media.audios?(I.hasAudio=I.media.audios.length>0,!1===I.hasAudio&&delete I.media.audios):I.hasAudio=!1,I.stopAudio,!1===C?(I.useID>-1?null===(T=h(I.useID))&&(T=R(x,I.overlay,I.useID,n.currentStep)):T=R(x,I.overlay,void 0,n.currentStep),O=T.popup):(null===(T=h(u))?T=R(x,I.overlay,void 0,n.currentStep):(""!=T.current.customClass&&(T.popup.getBox().removeClass(T.current.customClass),T.popup.getOverlay().removeClass(T.current.customClass.split(" ").join("-overlay")+"-overlay ")),T.current=I),O=T.popup),I.popupObject=T,s=O.getOverlay(),g=O.getBox(),v=O.getTextBox(),m=O.getCloser(),E="function"==typeof O.getPageControl?O.getPageControl():null,g.attr("data-belongsTo",I.belongsTo),g.attr("data-pid",T.id),e.translateElement(m[0]),""!=I.customClass&&(g.addClass(I.customClass),s.addClass(I.customClass.split(" ").join("-overlay ")+"-overlay ")),I.delayMedia?g.find("#popupMedia"+T.id).empty().css("display","none"):g.find("#popupMedia"+T.id).empty(),v.attr("tabindex","0"),!0===I.scrollable&&v.addClass("scrollable-y"),I){if(I.pages.length>0){if(E){var A=i.array.map(Array.apply(null,Array(I.pages.length)),(function(t,e){return"<div class='popupMediaHolder' data-page='"+e+"'></div>"}));g.find(".popupMedia").append(A.join(""))}else g.find(".popupMedia").append("<div class='popupMediaHolder' data-page='0'></div>");d(I)}else e.setText(v,I.text,I.processURLs);E&&I.pages.length<=1?E.addClass("hidden"):(I.lastPage=-1,"function"==typeof O.setPageIndicator&&E&&(O.setPageIndicator(I.pages.length,I.endPageAction),O.updatePageIndicator(I.currentPage+1),E.removeClass("hidden"),E.off("click",".popupPageButton"),E.on("click",".popupPageButton",(function(){if(I.pageReady){var t=I.currentPage;switch($(this).hasClass("popupPageNext")&&(I.lastPage=I.currentPage,I.currentPage++),$(this).hasClass("popupPagePrev")&&(I.lastPage=I.currentPage,I.currentPage--),I.endPageAction){case"loop":I.currentPage>I.pages.length-1&&(I.currentPage=0),I.currentPage<0&&(I.currentPage=I.pages.length-1);case"disable":default:I.currentPage>=I.pages.length-1&&(I.currentPage=I.pages.length-1),I.currentPage<=0&&(I.currentPage=0)}t!=I.currentPage&&(d(I),O.updatePageIndicator(I.currentPage+1),r.notify(a.POPUP_PAGE_CHANGE,{element:"popupInner"+I.popupObject.id,popupid:I.popupObject.id,page:I.currentPage,belongsTo:I.belongsTo}))}}))))}if(m.attr("tabindex","0"),!0===x?(m.on("click",{id:T.id},(function(t){p({id:t.data.id,triggeredBy:"close"})})),I.closeOnLastPage||(m.removeClass("hidden"),TweenLite.to(m,window.__ISAUTHOR?0:.2,{css:{autoAlpha:1}}))):m.css("display","none"),!0===I.lightbox&&(s.on("click",{id:T.id},(function(t){p({id:t.data.id,triggeredBy:"close"})})),$(document).on("keydown",{id:T.id},f)),"auto"===I.h)if(I.transitionIn.indexOf("grow")>-1){var D=$('<div style="position:absolute;left:100%;top:100%;visibility:hidden"></div>').appendTo(n.overlayLocation).append(v.clone());b=D.outerHeight(),D.remove()}else b="auto";function P(){g.on("touchmove",(function(t){t.preventDefault()})),v.on("touchmove",(function(t){t.stopPropagation()})),setTimeout(M,50),"function"==typeof I.onOpen&&I.onOpen.apply(T,[I.onOpenContext,I.onOpenParam])}function M(t){$("#popupInner"+t).find("[tabindex]").removeAttr("disabled").attr("tabindex","0"),n.accessibility&&v.focus()}function R(t,e,r,i){var o={};return void 0===r||-1===r?(u+=1,o.id=u):o.id=r,o.isOpen=!1,o.popup=new window.shellPopup(o.id,e,t,n.overlayLocation),o.current=I,o.stepid=i,c.push(o),o}return k={},window.__ISAUTHOR&&(k.transform=[!1,!1]),"centre"===I.x&&(_="50",I.pxUnit="%",I.xProperty="left",g.css({left:"50%"}),k.transform="translate(-50%,0)"),"centre"===I.y&&(w="50",I.pyUnit="%",I.yProperty="top",g.css({top:"50%"}),k.transform||(k.transform=[!1]),k.transform="translate("+("centre"===I.x?"-50%":"0")+",-50%)"),k.position=I.position,k[I.xProperty]=_+I.pxUnit,k[I.yProperty]=w+I.pyUnit,k.width=y+I.sxUnit,k.height="auto"===b?b:b+I.syUnit,k["left"===I.xProperty?"right":"left"]="auto",k["top"===I.yProperty?"bottom":"top"]="auto","none"!==I.wMin&&(k["min-width"]=I.wMin+I.wMinUnit),"none"!==I.wMax&&(k["max-width"]=I.wMax+I.wMaxUnit),"none"!==I.hMin&&(k["min-height"]=I.hMin+I.hMinUnit),"none"!==I.hMax&&(k["max-height"]=I.hMax+I.hMaxUnit),k.transform?(g.css({"-webkit-transform":k.transform,transform:k.transform}),delete k.transform):window.__ISAUTHOR?g.css({"-webkit-transform":"none",transform:"none","margin-left":"0","margin-top":"0"}):g.css({"-webkit-transform":"none",transform:"none"}),!0===T.isOpen&&!0===C?(window.__ISAUTHOR&&(g.css(k),I.morphAnimate=!1),I.delayMedia||P(T.id),TweenLite.to(g,!0===I.morphAnimate?I.speed/1e3:0,{css:k,onComplete:function(){I.delayMedia&&P(T.id)}})):(g.css(k),!0===T.isOpen&&!1===C?P(T.id):(I.delayMedia||P(T.id),o[I.transitionIn](g,"on",{x:_+I.pxUnit,y:w+I.pyUnit,xProperty:I.xProperty,yProperty:I.yProperty,speed:(I.speedIn||I.speed)/1e3,ease:I.transitionInEase},(function(){I.delayMedia&&P(T.id)})))),v.css({width:S+("auto"!==S?I.twUnit||"px":""),margin:I.centreText?"0 auto":"0"}),!0===I.overlay?(g.removeClass("noOverlay hasOverlay").addClass("hasOverlay"),o.fade(s,"on",{speed:(I.speedIn||I.speed)/1e3,ease:I.transitionInEase})):(g.removeClass("noOverlay hasOverlay").addClass("noOverlay"),s.css({display:"none"})),T.isOpen=!0,e.disablePageScroll(),g[0].parentElement===document.body?e.makeModal(g[0]):s[0].parentElement===document.body&&e.makeModal(s[0]),r.notify(a.POPUP_OPENED,{id:T.id,belongsTo:I.belongsTo,element:"popupInner"+T.id}),{popupID:T.id,boxElement:g}},hide:p,showPage:function(t){var e=h(t.id);e.current.lastPage=e.current.currentPage,void 0!==t.page&&t.page<e.current.pages.length&&t.page>=0&&(e.current.currentPage=t.page),d(e.current),e.popup.updatePageIndicator(e.current.currentPage+1)},getPopupObjectByID:h}}}),fm=function(){function t(e,n){$v(this,t),"string"==typeof e&&(n=n||"#shell",this._root=$(e),$(n).append(this._root))}return Hv(t,[{key:"getGlobalDefaultOptions",value:function(t){switch(t=t||"modal"){case"fullscreen":return{xProperty:"left",yProperty:"top",w:100,sxUnit:"%",h:"auto",x:"centre",pxUnit:"%",y:0,pyUnit:"%",hMax:100,hMaxUnit:"%",transitionIn:"fade",transitionOut:"fade"};case"modal":default:return{xProperty:"left",yProperty:"top",w:100,sxUnit:"%",h:"auto",x:"centre",pxUnit:"%",y:"centre",pyUnit:"%",wMax:900,wMaxUnit:"px",hMax:100,hMaxUnit:"%",transitionIn:"fade",transitionOut:"fade"}}}},{key:"getAll",value:function(){return this._root}},{key:"getOverlay",value:function(){return this._root.find(".popup-overlay")}},{key:"getBox",value:function(){return this._root.find(".popup-box")}},{key:"getTextBox",value:function(){return this._root.find(".popup-text")}},{key:"getCloser",value:function(){return this._root.find(".popup-close")}}]),t}(),dm=Object.freeze({__proto__:null,name:"modpopup",module:function(t){var e=t.config,n=t.core,r=t.observer,i=t.events,o={},a=null,s=!1,c={},u=[],l=0,f={},d={},p=null;function h(t){var e,n,o=g({closer:!0,overlay:!0},0).popup,a=o.getAll(),s=o.getBox(),d=o.getCloser(),p=o.getTextBox(),h=s.css("margin"),v=s.css("position");if("getComputedStyle"in window){var y=window.getComputedStyle(p[0]);h=[y.getPropertyValue("margin-top"),y.getPropertyValue("margin-right"),y.getPropertyValue("margin-bottom"),y.getPropertyValue("margin-left")].join(" ")}else h="0px";var b=s.css("width"),_=s.css("height");c.belongsTo="none",c.template="mdl_modularPopup",c.w=parseInt(b,10)||s.width(),c.h=parseInt(_,10)||s.height(),c.wMax="none",c.wMaxUnit="px",c.wMin="none",c.wMinUnit="px",c.hMax="none",c.hMaxUnit="px",c.hMin="none",c.hMinUnit="px",c.position=v,c.xProperty="auto"===s.css("right")?"left":"right",c.yProperty="auto"===s.css("bottom")?"top":"bottom",e=s.css(c.xProperty),n=s.css(c.yProperty),c.x="auto"==e?"centre":parseFloat(e),c.y="auto"==n?"centre":parseFloat(n),c.sxUnit=b.indexOf("%")>-1?"%":"px",c.syUnit=_.indexOf("%")>-1?"%":"px",c.pxUnit=s.css(c.xProperty).indexOf("%")>-1?"%":"px",c.pyUnit=s.css(c.yProperty).indexOf("%")>-1?"%":"px",c.transitionIn="fade",c.transitionOut="fade",c.transitionInEase="Cubic.easeOut",c.transitionOutEase="Cubic.easeOut",c.speed=300,c.lightbox=!0,c.padding=!0,c.displayMode="modal",c.text="",c.pages=[],c.currentPage=0,c.scrollable=!0,c.centreText="0px auto 0px auto"===h,c.triggerElement=null,c.morph=!1,c.morphAnimate=!1,c.stopAudio=!1,c.closer=!0,c.preventCloseUntilComplete=!1,c.closeOnComplete=!1,c.autoCloseDelay=400,c.closeLabel=d.text(),c.overlay=!0,c.anchor=null,c.useID=-1,c.contentID="",c.customClass="",c.tabIndexStart=1,c.onComplete=function(){},c.onProgress=function(){},c.onBeforeClose=null,c.onBeforeCloseContext=null,c.onClose=null,c.onCloseContext=null,c.onCloseParam=null,c.onOpen=null,c.onOpenContext=null,c.onOpenParam=null,f.all=c,a.remove(),r.add(i.STEP_BEFOREREADY,(function(){l=0,u.length>0&&m({id:0,animate:!1,hideAll:!0})})),setTimeout((function(){t()}),1)}function g(r,i){var o={};if(l+=1,"undefined"==typeof useID||-1===r.useID?o.id=l:o.id=r.useID,s){var a=n.getCompiledHTMLTemplate("mdl_modularPopup",r.template||"mdl_modularPopup");a||(a=n.getCompiledHTMLTemplate("mdl_modularPopup","mdl_modularPopup")),a||alert('The popup template "'.concat(r.template||"mdl_modularPopup",'" was not found.'));var c=a({id:o.id,overlay:r.overlay,closer:r.closer});o.popup=new p(c,e.overlayLocation)}else o.popup=new p(t,o.id,r.overlay,r.closer,e.overlayLocation);return o.isOpen=!1,o.current=r,o.stepid=i,o}function v(t){for(var e=100*t.length,n=0,r=0;r<t.length;r++)n+=t[r].getPercentComplete();return{numComplete:n,total:e,isComplete:n>=e}}function m(t){var e=void 0===t.animate||t.animate;if(!0===t.hideAll)for(var a=u.length-1;a>=0;a--)s(u[a].id,e);else s(t.id,e);function s(t,e){var a=y(t);if(null!==a){var s=a.popup.getAll();a.isOpen=!1,a.current.activeTransition&&a.current.activeTransition.cancel(),r.removeByID(i.COMPONENT_COMPLETE,"POP-"+a.current.contentID),a.current.lightbox&&a.current.morph&&$(document).off("keydown",a.current.__onDocumentKeyDown),"function"==typeof a.current.onBeforeClose&&a.current.onBeforeClose.apply(a,[a.current.onBeforeCloseContext,a.current.onBeforeCloseParam]);var c=d[a.current.contentID]||[];!0===e&&o[a.current.transitionOut]?(n.enablePageScroll(),a.current.activeTransition=o[a.current.transitionOut].hide(a.current,(function(){a.current.activeTransition=null,a.current.isComplete&&a.current.onComplete(),s.remove(),c.forEach((function(t){t.unload()})),a.current.triggerElement&&a.current.triggerElement.focus(),"function"==typeof a.current.onClose&&a.current.onClose.apply(a,[a.current.onCloseContext,a.current.onCloseParam])}))):(u.length||n.enablePageScroll(),a.current.isComplete&&a.current.onComplete(),s.remove(),c.forEach((function(t){t.unload()})),a.current.triggerElement&&a.current.triggerElement.focus()),function(t){var e=0,n=u.length;for(e=0;e<n;e++)if(u[e].id===t){u.splice(e,1);break}}(t)}}n.releaseModal(),t.element="popupInner"+t.id,r.notify(i.POPUP_CLOSED,t)}function y(t){var e=0,n=u.length;for(e=0;e<n;e++)if(u[e].id===t)return u[e];return null}return{name:"Modular Popup",version:1,immediate:!1,init:function(t){if("function"!=typeof(p=e.constructors.modShellPopup))p=fm,s=!0,n.getCompiledHTMLTemplate("mdl_modularPopup","mdl_modularPopup")?h(t):$.ajax({url:"modules/modularPopup/modularPopup.html",dataType:"text"}).done((function(e){n.addHTMLTemplates(e),h(t)})).fail((function(){n.addHTMLTemplates('<script data-for="mdl_modularPopup" data-template="mdl_modularPopup" type="text/x-handlebars-template">\n<div id="popupContainer{{id}}" class="popup-container" role="dialog">\n{{#if overlay}}<div id="popup{{id}}" class="popup popup-overlay"></div>{{/if}}\n<div id="popupBox{{id}}" class="popup-box">\n    <div id="popupText{{id}}" class="popup-text" aria-live="assertive"></div>\n    {{#if closer}}<button id="popupClose{{id}}" class="popup-close focus noTapSelection" tabindex="0">Close</button>{{/if}}\n</div>\n</div>\n<\/script>'),h(t)}));else try{h(t)}catch(e){console.log(e),setTimeout((function(){t()}),1)}},async:!0,getDefaults:function(){return f.all},getDefaultsForBreakpoint:function(t){if(!("matchMedia"in window))return f.all;for(var e in f)if("all"!=e&&!0===matchMedia(e).matches&&!0===matchMedia(t).matches)return f[e];return f.all},show:function(t){var c,h,b,_,w,E,S,C,x,T,O,I,k,A,D={},P={},M=p.prototype.getGlobalDefaultOptions(t.displayMode);if(D=$.extend(!0,D,f.all,M,t),t&&void 0!==D.x||(D.x=.5*window.innerWidth-.5*D.w),t&&void 0!==D.y||(D.y=.5*window.innerHeight-.5*D.h),D.triggerElement){var R=$(D.triggerElement)[0],L=n.a11y.getTabIndex(R);n.a11y.isFocussable(R)||L||$(D.triggerElement).attr("tabindex","-1")}if(E=D.w,S=isNaN(D.h)?0:D.h,C=isNaN(D.x)?0:D.x,x=isNaN(D.y)?0:D.y,T=D.morph,O=D.closer,!0===D.stopAudio&&SparkAPI.warn("Modular popup: stopAudio not yet implemented."),!1===T?(D.useID>-1?null===(k=y(D.useID))&&(k=g(D,e.currentStep),u.push(k)):(k=g(D,e.currentStep),u.push(k)),A=k.popup):(null===(k=y(l))?(k=g(D,e.currentStep),u.push(k)):(""!=k.current.customClass&&(k.popup.getBox().removeClass(k.current.customClass),k.popup.getOverlay().removeClass(k.current.customClass.split(" ").join("-overlay")+"-overlay ")),k.current=D),A=k.popup),I=A.getConfig&&A.getConfig("internalScroll")||!1,D.popupObject=k,c=A.getAll(),h=A.getOverlay(),b=A.getBox(),_=A.getTextBox(),w=A.getCloser(),b.attr("data-belongsTo",D.belongsTo),b.attr("data-pid",k.id),s||n.translateElement(w[0]),""!=D.customClass&&(b.addClass(D.customClass),h.addClass(D.customClass.split(" ").join("-overlay ")+"-overlay ")),D.padding?b.addClass("popup-padding"):b.removeClass("popup-padding"),"fullscreen"===D.displayMode?c.addClass("fullscreen-popup"):c.removeClass("fullscreen-popup"),!0===D.scrollable&&(I?A.getScrollBox().addClass("scrollable-y"):b.addClass("scrollable-y")),D){if(_.children().length&&_.empty(),"string"==typeof D.text){var N=e.stepData[e.currentStep].guid;D.text=[{blocks:[{components:[{pageid:N,settings:{},textcontent:D.text,type:"text",uid:"GEN-C-"+(D.contentID||Math.round(1e6*Math.random()))}],conditions:[],pageid:N,settings:{},size:"fullwidth",type:"grid",uid:"GEN-B-"+(D.contentID||Math.round(1e6*Math.random()))}],pageid:N,settings:{},type:"section",uid:"GEN-S-"+(D.contentID||Math.round(1e6*Math.random()))}]}n.componentRenderer.render({scope:D.contentID||"modpopup",pageid:e.stepData[e.currentStep].stepOptions.id,renderid:D.contentID,domtarget:_,sectionsdata:D.text,resumedata:a||{},done:function(t){d[D.contentID]=t.loadedSections;var a=v(t.loadedSections);function s(t){(!D.preventCloseUntilComplete||D.preventCloseUntilComplete&&D.isComplete)&&($(document).off("keydown",s),function(t){27===t.keyCode&&m({id:t.data.id,triggeredBy:"close"})}(t))}if(a.isComplete&&(D.isComplete=!0),w.attr("tabindex","0"),!0===O?(w.removeClass("hidden"),w.on("click",{id:k.id},(function(t){m({id:t.data.id,triggeredBy:"close"})}))):w.addClass("hidden"),!0===D.lightbox&&(h.on("click",{id:k.id},(function(t){(!D.preventCloseUntilComplete||D.preventCloseUntilComplete&&D.isComplete)&&m({id:t.data.id,triggeredBy:"close"})})),$(document).on("keydown",{id:k.id},s),D.__onDocumentKeyDown=s),"auto"===D.h&&(S="auto"),P={},"centre"===D.x&&(C="50",D.pxUnit="%",D.xProperty="left",b.css({left:"50%"}),P.transform="translate(-50%,0)"),"centre"===D.y&&(x="50",D.pyUnit="%",D.yProperty="top",b.css({top:"50%"}),P.transform||(P.transform=[!1]),P.transform="translate("+("centre"===D.x?"-50%":"0")+",-50%)"),P.position=D.position,P[D.xProperty]=C+D.pxUnit,P[D.yProperty]=x+D.pyUnit,P.width=E+("none"!==D.sxUnit?D.sxUnit:""),P.height="auto"===S?S:S+("none"!==D.syUnit?D.syUnit:""),P["left"===D.xProperty?"right":"left"]="auto",P["top"===D.yProperty?"bottom":"top"]="auto","none"!==D.wMin&&(P["min-width"]=D.wMin+D.wMinUnit),"none"!==D.wMax&&(P["max-width"]=D.wMax+D.wMaxUnit),"none"!==D.hMin&&(P["min-height"]=D.hMin+D.hMinUnit),"none"!==D.hMax&&(P["max-height"]=D.hMax+D.hMaxUnit),P.transform?(b.css({"-webkit-transform":P.transform,transform:P.transform}),delete P.transform):b.css({"-webkit-transform":"none",transform:"none"}),!0===k.isOpen&&!0===T){var u=!0===D.morphAnimate?(D.speedIn||D.speed)/1e3:0;TweenLite.to(b,u,{css:P})}else b.css(P),I&&P["max-height"]&&setTimeout((function(){A.getScrollBox().css({"max-height":b.height()+2+"px"})}),1),!0===k.isOpen&&!1===T||(o[k.current.transitionIn]?k.current.activeTransition=o[k.current.transitionIn].show(D,(function(){k.current.activeTransition=null,e.accessibility&&b.find("[tabindex]:not(.popup-close)")[0].focus()})):(k.current.activeTransition=null,b.css("display","block"),h.css("display","block"),e.accessibility&&b.find("[tabindex]:not(.popup-close)")[0].focus()));b.removeClass("noOverlay hasOverlay"),c.removeClass("noOverlay hasOverlay"),!0===D.overlay?(b.addClass("hasOverlay"),c.addClass("hasOverlay")):(b.addClass("noOverlay"),c.addClass("noOverlay"),h.css({display:"none"})),k.isOpen=!0,r.add(i.COMPONENT_COMPLETE,(function(){var t=v(d[D.contentID]);t.isComplete&&(r.removeByID(i.COMPONENT_COMPLETE,"POP-"+D.contentID),D.isComplete=!0,w.removeClass("hidden"),D.closeOnComplete&&setTimeout((function(){m({id:D.useID,triggeredBy:"completion"})}),D.autoCloseDelay)),t.numComplete>0&&D.onProgress(t.numComplete,t.total),r.notify(i.POPUP_PROGRESS,{id:k.id,completed:t.numComplete,total:t.total,percent:Math.round(t.numComplete/t.total*100)})}),{id:"POP-"+D.contentID}),n.disablePageScroll(),n.makeModal(c[0]),"function"==typeof k.current.onOpen&&k.current.onOpen.apply(k,[k.current.onOpenContext,k.current.onOpenParam]),n.componentRenderer.notifyMountedComponents(),r.notify(i.POPUP_OPENED,{id:k.id,belongsTo:D.belongsTo,element:"popupInner"+k.id}),a.numComplete>0&&D.onProgress(a.numComplete,a.total),D.preventCloseUntilComplete&&!D.isComplete&&w.addClass("hidden")}})}return{popupID:k.id,boxElement:b}},hide:m,getPopupObjectByID:y,registerTransition:function(t,e,n){o[t]={show:e,hide:n}},reset:function(t){var e=function(t){"function"==typeof t.reset&&t.reset()};if(void 0===t)Object.values(d).forEach((function(t){t.forEach(e)})),d={},a=null;else{if(!d[t])return;d[t].forEach(e)}},getResumeData:function(){var t={};for(var e in d)for(var n=0;n<d[e].length;n++)for(var r=d[e][n].getChildren(),i=0;i<r.length;i++)for(var o=r[i].getChildren(),a=0;a<o.length;a++){var s=o[a];if("getResumeData"in s){var c=s.getResumeData();c&&(t[s.getUID()]=c)}}return"{}"===(t=JSON.stringify(t))?"":t},setResumeData:function(t){try{a=JSON.parse(t)}catch(t){a=null}}}}}),pm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:1}),$(r).css({display:"block",opacity:0}),$(i).css({display:"block",opacity:1});var o=n[0].getBoundingClientRect(),a={left:-1*o.width,top:o.top,width:o.width,height:o.height},s=a.left,c=a.top;$(n).css({top:0,left:0,transform:"translate("+s+"px, "+c+"px)"});var u=(t.speedIn||t.speed)/1e3;return TweenLite.to(r,u,{opacity:1,ease:t.transitionInEase||"Cubic.easeOut"}),TweenLite.to(n,u,{x:o.left,y:o.top,ease:t.transitionInEase||"Cubic.easeOut",onComplete:function(){e()}}),{cancel:function(){TweenLite.killTweensOf(n),e()}}},hm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=n[0].getBoundingClientRect(),o={left:-1*i.width,top:i.top,width:i.width,height:i.height},a=i.left,s=i.top;$(n).css({top:0,left:0,transform:"translate("+a+"px, "+s+"px)"});var c=(t.speedOut||t.speed)/1e3;TweenLite.to(r,c,{opacity:0,ease:t.transitionOutEase||"Cubic.easeOut"}),TweenLite.to(n,c,{x:o.left,y:o.top,ease:t.transitionOutEase||"Cubic.easeOut",onComplete:function(){e()}})},gm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:1}),$(r).css({display:"block",opacity:0}),$(i).css({display:"block",opacity:1});var o=n[0].getBoundingClientRect(),a={left:window.innerWidth+o.width,top:o.top,width:o.width,height:o.height},s=a.left,c=a.top;$(n).css({top:0,left:0,transform:"translate("+s+"px, "+c+"px)"});var u=(t.speedIn||t.speed)/1e3;return TweenLite.to(r,u,{opacity:1,ease:t.transitionInEase||"Cubic.easeOut"}),TweenLite.to(n,u,{x:o.left,y:o.top,ease:t.transitionInEase||"Cubic.easeOut",onComplete:function(){e()}}),{cancel:function(){TweenLite.killTweensOf(n),e()}}},vm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=n[0].getBoundingClientRect(),o={left:window.innerWidth+i.width,top:i.top,width:i.width,height:i.height},a=i.left,s=i.top;$(n).css({top:0,left:0,transform:"translate("+a+"px, "+s+"px)"});var c=(t.speedOut||t.speed)/1e3;TweenLite.to(r,c,{opacity:0,ease:t.transitionOutEase||"Cubic.easeOut"}),TweenLite.to(n,c,{x:o.left,y:o.top,ease:t.transitionOutEase||"Cubic.easeOut",onComplete:function(){e()}})},mm=function(t,e){var n=t.popupObject.popup.getAll(),r=t.popupObject.popup.getBox(),i=t.popupObject.popup.getOverlay(),o=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:0}),$(r).css({display:"block",opacity:1}),$(i).css({display:"block",opacity:1}),$(o).css({display:"block",opacity:1});var a=(t.speedIn||t.speed)/1e3;return TweenLite.to(n,a,{opacity:1,ease:t.transitionInEase||"Cubic.easeOut",onComplete:function(){e()}}),{cancel:function(){TweenLite.killTweensOf(n),e()}}},ym=function(t,e){var n=t.popupObject.popup.getAll(),r=(t.speedOut||t.speed)/1e3;TweenLite.to(n,r,{opacity:0,ease:t.transitionOutEase||"Cubic.easeOut",onComplete:function(){e()}})},bm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:1}),$(r).css({display:"block",opacity:0}),$(i).css({display:"block",opacity:1});var o=n[0].getBoundingClientRect(),a={left:o.left,top:o.top+50,width:o.width,height:o.height},s=a.left,c=a.top;$(n).css({top:0,left:0,transform:"translate("+s+"px, "+c+"px)"});var u=(t.speedIn||t.speed)/1e3;return TweenLite.to(r,u,{opacity:1,ease:t.transitionInEase||"Cubic.easeOut"}),TweenLite.to(n,u,{x:o.left,y:o.top,ease:t.transitionInEase||"Cubic.easeOut",onComplete:function(){e()}}),{cancel:function(){TweenLite.killTweensOf(n),e()}}},_m=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=n[0].getBoundingClientRect(),o={left:i.left,top:i.top+50,width:i.width,height:i.height},a=i.left,s=i.top;$(n).css({top:0,left:0,transform:"translate("+a+"px, "+s+"px)"});var c=(t.speedOut||t.speed)/1e3;TweenLite.to(r,c,{opacity:0,ease:t.transitionOutEase||"Cubic.easeOut"}),TweenLite.to(n,c,{x:o.left,y:o.top,ease:t.transitionOutEase||"Cubic.easeOut",onComplete:function(){e()}})},wm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:0}),$(r).css({display:"block",opacity:0});var o=$("<div></div>").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",background:"transparent"}).append("<svg style='position:absolute;fill:#222' preserveAspectRatio='none' width='100%' height='100%' viewBox='0 0 100 100'><path d='M0,0 L100,0, L0,0 L0,100z'></rect></svg>").appendTo("body"),a={time:0};return TweenLite.to(a,.6,{time:100,ease:"Expo.easeInOut",onUpdate:function(){var t=a.time;o.find("path").attr("d","M0,0 L100,0, L"+t+","+t+" L0,100z")},onComplete:function(){TweenLite.to(n,.3,{css:{opacity:1}}),TweenLite.to(i,.3,{css:{opacity:1}}),TweenLite.to(r,.3,{css:{opacity:1},onComplete:function(){o.remove(),e()}})}}),{cancel:function(){TweenLite.killTweensOf(a),TweenLite.killTweensOf(i),TweenLite.killTweensOf(n),TweenLite.killTweensOf(r),o.remove(),e()}}},Em=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getCloser(),i=t.popupObject.popup.getOverlay(),o=$("<div></div>").css({position:"fixed",left:0,top:0,width:"100%",height:"100%",background:"transparent",zIndex:"2010"}).append("<svg style='position:absolute;fill:#222' preserveAspectRatio='none' width='100%' height='100%' viewBox='0 0 100 100'><path d='M0,0 L100,0, L100,100 L0,100z'></rect></svg>").appendTo("body"),a={time:100};TweenLite.to(n,.2,{css:{opacity:0}}),TweenLite.to(r,.2,{css:{opacity:0}}),TweenLite.to(i,.2,{css:{opacity:0},onComplete:function(){TweenLite.to(a,.6,{time:0,ease:"Expo.easeInOut",onUpdate:function(){var t=a.time;o.find("path").attr("d","M0,0 L"+t+","+(100-t)+" L100,100 L0,100z")},onComplete:function(){o.remove(),e()}})}})},Sm=function(t,e){t.triggerElement||console.error("modularPopupTransition::buttonMorph - Trigger element not provided.");var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=t.popupObject.popup.getCloser();$(n).css({display:"block",opacity:0}),$(r).css({display:"block",opacity:0});var o=(t.speedIn||t.speed)/1e3,a=t.triggerElement?t.triggerElement.getBoundingClientRect():{left:0,top:0,width:100,height:100},s=n[0].getBoundingClientRect(),c=a.left,u=a.top,l=a.width/s.width,f=a.height/s.height,d=t.triggerElement?window.getComputedStyle(t.triggerElement).backgroundColor:"#FFF",p=$("<div></div>").css({position:"fixed",left:0,top:0,width:s.width+"px",height:s.height+"px",transform:"translate("+c+"px, "+u+"px) scale("+l+","+f+")",background:d,transformOrigin:"0 0",opacity:0,zIndex:2105}).appendTo("body");return TweenLite.to(r,.4*o,{delay:.2,css:{opacity:1}}),TweenLite.to(p,.15,{css:{opacity:1},ease:"Expo.easeIn",onComplete:function(){t.triggerElement&&$(t.triggerElement).css("visibility","hidden"),TweenLite.to(p,o,{scale:1,background:window.getComputedStyle(n[0]).backgroundColor,x:s.left,y:s.top,ease:"Expo.easeInOut",onComplete:function(){TweenLite.to(i,.2,{css:{opacity:1}}),$(n).css({opacity:""}),TweenLite.to(p,.1,{css:{opacity:0},onComplete:function(){p.remove(),e()}})}})}}),{cancel:function(){TweenLite.killTweensOf(p),TweenLite.killTweensOf(i),TweenLite.killTweensOf(n),TweenLite.killTweensOf(r),p.remove(),e()}}},Cm=function(t,e){var n=t.popupObject.popup.getBox(),r=t.popupObject.popup.getOverlay(),i=(t.speedIn||t.speed)/1e3,o=n[0].getBoundingClientRect(),a=t.triggerElement?t.triggerElement.getBoundingClientRect():{left:0,top:0,width:100,height:100},s=t.triggerElement?window.getComputedStyle(t.triggerElement).backgroundColor:"#FFF",c=o.left,u=o.top,l=o.width/a.width,f=o.height/a.height,d=$("<div></div>").css({position:"fixed",left:0,top:0,width:a.width+"px",height:a.height+"px",transform:"translate("+c+"px, "+u+"px) scale("+l+","+f+")",background:window.getComputedStyle(n[0]).backgroundColor,transformOrigin:"0 0",opacity:0,zIndex:2105}).appendTo("body");TweenLite.to(d,.2,{css:{opacity:1},onComplete:function(){$(n).css({display:"block",opacity:0}),$(r).css({display:"block",opacity:1}),TweenLite.to(r,.5*i,{delay:.5*i,css:{opacity:0}}),TweenLite.to(d,i,{scale:1,x:a.left,y:a.top,background:s,ease:"Expo.easeInOut",onComplete:function(){t.triggerElement&&$(t.triggerElement).css("visibility",""),TweenLite.to(d,.15,{css:{opacity:0},onComplete:function(){d.remove(),e()}})}})}})},xm=Object.freeze({__proto__:null,name:"modularPopupTransitions",module:function(t){var e=t.modules;return{name:"Modular Popup Transitions",version:1,immediate:!1,init:function(){e.modpopup?(e.modpopup.registerTransition("slideLeft",pm,hm),e.modpopup.registerTransition("slideRight",gm,vm),e.modpopup.registerTransition("squaremorph",wm,Em),e.modpopup.registerTransition("buttonmorph",Sm,Cm),e.modpopup.registerTransition("fade",mm,ym),e.modpopup.registerTransition("fadeUp",bm,_m)):alert("Modular popup module not found. Make sure it has been loaded in shell.html.")}}}}),Tm=Object.freeze({__proto__:null,name:"soundManager",module:function(t){var e=t.config,n=t.observer,r=t.events,i=e.globalVolume;return{name:"",version:1,immediate:!1,init:function(){n.add(r.TEXT_TRACK_CHANGED,(function(t){var n=t.track;e.mediaTextTrack=n})),n.add(r.VOLUME_CHANGED,(function(t){var n=t.volume;e.globalVolumeIsSet=!0,e.globalVolume=n})),n.add(r.MUTE,(function(t){t.muted?(i=e.globalVolume,e.audio=!1,n.notify(r.VOLUME_CHANGED,{sourceType:"soundManager",component:null,volume:0})):(e.audio=!0,n.notify(r.VOLUME_CHANGED,{sourceType:"soundManager",component:null,volume:i}))}))}}}}),Om={none:"none",xs:"xsmall",s:"small",m:"medium",l:"large",xl:"xlarge"},Im=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$v(this,t),Gv(this,"type","component"),this.shell=e,this.options=n,this.core=e.core,this.config=e.config,this.observer=e.observer,this.events=e.events,this.utils=e.utils,this.version=1,this.containertemplate="<div class='cmp_component'></div>",this.container=null,this.data=null,this.parentdata=null,this.resumedata=null,this.active=!0,this.complete=!0,this.mandatory="auto",this.loaded=!1,this.interactive=!1,this.initialised=!1,this.activeClasses=""}return Hv(t,[{key:"name",get:function(){return this.type.toUpperCase()}},{key:"initialise",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.initialised=!0,this.container=t||$(this.containertemplate),this.data=e,this.parentdata=n,this.mandatory=e.mandatory,this.initClasses=this.container.attr("class"),this.container}},{key:"load",value:function(){}},{key:"unload",value:function(){var t=this;this.loaded=!1,this.container&&this.container.empty(),this.data._breakpoints&&Object.entries(this.data._breakpoints).forEach((function(e){var n=nm(e,2),r=n[0],i=n[1];t.core.mediaQuery.removeQuery(t.data.uid,r,i)})),this.data.actions&&this.core.actions.unbindActions({id:this.data.uid})}},{key:"renderTemplate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data.template,n=this.getTemplate(e);return"function"==typeof n&&($(this.container).append(n(Wv({uid:this.data.uid,template:e||"cmp_".concat(this.type),dynamicvariables:this.parentdata.variables},t))),!0)}},{key:"element",value:function(){return this.container}},{key:"getData",value:function(){return this.data}},{key:"getUID",value:function(){return this.data.uid}},{key:"getScope",value:function(){for(var t=this.parent();t&&"function"==typeof t.parent&&!t.scope;)t=t.parent();return t.scope||void 0}},{key:"getEventData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.events.COMPONENT_COMPLETE;return t===this.events.COMPONENT_COMPLETE?{scope:this.getScope(),uid:this.data.uid,component:this.data.uid,step:this.data.pageid,pageid:this.data.pageid,componentdata:this.data}:{scope:this.getScope(),uid:this.data.uid}}},{key:"isActive",value:function(){return this.active}},{key:"isInteractive",value:function(){return this.interactive}},{key:"isInitialised",value:function(){return this.initialised}},{key:"isComplete",value:function(){return this.checkComplete()}},{key:"isMandatory",value:function(){return this.config.lockout?"not-mandatory"!==this.mandatory:"mandatory"===this.mandatory}},{key:"isStrictlyMandatory",value:function(){return"mandatory"===this.mandatory}},{key:"canMoveOn",value:function(){if(this.children&&this.children.length)for(var t=0;t<this.children.length;t++){var e=this.children[t].component||this.children[t];if(e&&e.isActive()&&e.isInteractive()&&!e.canMoveOn())return!1}return!this.isMandatory()&&!this.isStrictlyMandatory()||this.isComplete()}},{key:"activate",value:function(){this.active=!0}},{key:"checkComplete",value:function(){return this.complete}},{key:"deactivate",value:function(){this.active=!1}},{key:"getTemplate",value:function(t){return this.core.getCompiledHTMLTemplate("cmp_".concat(this.type),t)}},{key:"reset",value:function(){this.complete=!1,this.initialised=!1,this.container&&this.container.attr("class",this.initClasses)}},{key:"setContainer",value:function(t){this.container=t}},{key:"getLayoutProperties",value:function(t){var e=[];t.overflow&&e.push("overflow: "+t.overflow+";"),t.position&&e.push("position: "+t.position+";"),t.width&&e.push("width: "+t.width+";"),t.height&&e.push("height: "+t.height+";"),t.minwidth&&e.push("min-width: "+t.minwidth+";"),t.minheight&&e.push("min-height: "+t.minheight+";"),t.maxwidth&&e.push("max-width: "+t.maxwidth+";"),t.maxheight&&e.push("max-height: "+t.maxheight+";"),t.margin&&e.push("margin: "+t.margin+";"),t.padding&&(Om[t.padding]?e.push("padding: var(--space-"+Om[t.padding]+");"):e.push("padding: "+t.padding+";"));var n=[];if(t.x?"center"===t.x?(e.push("left:50%;"),n.push("translateX(-50%)")):e.push(" "+t.x+";"):(t.left&&e.push("left: "+t.left+";"),t.right&&e.push("right: "+t.right+";")),t.y?"center"===t.y?(e.push("top:50%;"),n.push("translateY(-50%)")):e.push(" "+t.y+";"):(t.top&&e.push("top: "+t.left+";"),t.bottom&&e.push("bottom: "+t.right+";")),t.perspective&&(e.push("-webkit-perspective: "+t.perspective+";"),e.push("perspective: "+t.perspective+";")),t.transformstyle&&(e.push("-webkit-transform-style: "+t.transformstyle+";"),e.push("transform-style: "+t.transformstyle+";")),t.z&&n.push("translateZ("+t.z+")"),t.rotate&&n.push("rotate("+t.rotate+")"),t.scale&&n.push("scale("+t.scale+")"),n.length&&(e.push("-webkit-transform: "+n.join(" ")+";"),e.push("transform: "+n.join(" ")+";")),t.vheight){var r=window.innerHeight;e.push("height: "+Math.floor(r*(parseFloat(t.vheight)/100))+"px;")}if(t.vwidth){var i=window.innerWidth;e.push("width: "+Math.floor(i*(parseFloat(t.vwidth)/100))+"px;")}return e}},{key:"getThemeValues",value:function(){var t=$("<div style='display:none;' class='primary_background primary_foreground'></div>").appendTo("body"),e=$("<div style='display:none;' class='secondary_background secondary_foreground'></div>").appendTo("body"),n=$("<div style='display:none;' class='tertiary_background tertiary_foreground'></div>").appendTo("body");this.theme={primary:{background:t.css("background-color"),foreground:t.css("color")},secondary:{background:e.css("background-color"),foreground:e.css("color")},tertiary:{background:n.css("background-color"),foreground:n.css("color")}},t.remove(),e.remove(),n.remove()}},{key:"getStyleProperties",value:function(t){var e,n,r=[];if(t.background)if(0===(n=t.background).indexOf("@"))this.theme||this.getThemeValues(),e=n.substr(1),r.push("background-color: "+this.theme[e].background+";");else if(0===n.indexOf("swatch:")){var i=this.getSwatchValue(n.substring(7))||"";i.indexOf("-gradient(")>-1?r.push("background-image: "+i+";"):r.push("background-color: "+i+";")}else 0===n.indexOf("url:")?(n=this.getBackgroundImage(n),r.push("background-image: "+n+";")):n.indexOf("gradient:")>-1?(n=this.getBackgroundGradient(n),r.push("background-image: -webkit-"+n+";"),r.push("background-image: "+n+";")):0!==n.indexOf("rgb(")&&0!==n.indexOf("rgba(")&&0!==n.indexOf("#")&&0!==n.indexOf("hsl(")&&0!==n.indexOf("hsla(")||r.push("background-color: "+n+";");if(t.backgroundimage){if(0===(n=t.backgroundimage).indexOf("url:"))n=this.getBackgroundImage(n);else if(n.indexOf("swatch:")>-1){var o=this.getSwatchValue(n.substring(7))||"";o.indexOf("-gradient(")>-1?r.push("background-image: "+o+";"):r.push("background-color: "+o+";")}else n.indexOf("gradient:")>-1&&(n=this.getBackgroundGradient(n),r.push("background-image: -webkit-"+n+";"));r.push("background-image: "+n+";")}if(t.backgroundcolour&&(t.backgroundcolor=t.backgroundcolour),t.backgroundcolor)if(n.indexOf("@")>-1)this.theme||this.getThemeValues(),e=n.substr(1),r.push("background-color: "+this.theme[e].background+";");else if(0===t.backgroundcolor.indexOf("swatch:")){var a=this.getSwatchValue(t.backgroundcolor.substring(7))||"";a.indexOf("-gradient(")>-1?r.push("background-image: "+a+";"):r.push("background-color: "+a+";")}else r.push("background-color: "+n+";");return t.backgroundattachment&&r.push("background-attachment: "+t.backgroundattachment+";"),t.backgroundrepeat&&r.push("background-repeat: "+t.backgroundrepeat+";"),t.backgroundsize&&r.push("background-size: "+t.backgroundsize+";"),t.backgroundposition&&r.push("background-position: "+t.backgroundposition+";"),t.align&&r.push("text-align: "+t.align+";"),t.textshadow&&r.push("text-shadow: "+t.textshadow+";"),t.boxshadow&&r.push("box-shadow: "+t.boxshadow+";"),t.blendmode&&r.push("mix-blend-mode: "+t.blendmode+";"),t.border&&r.push("border: "+t.border+";"),t.bordertop&&r.push("border-top: "+t.bordertop+";"),t.borderright&&r.push("border-right: "+t.borderright+";"),t.borderbottom&&r.push("border-bottom: "+t.borderbottom+";"),t.borderleft&&r.push("border-left: "+t.borderleft+";"),t.borderradius&&r.push("border-radius: "+t.borderradius+";"),t.colour&&(t.color=t.colour),t.color&&(t.color.indexOf("@")>-1?(this.theme||this.getThemeValues(),e=t.color.substring(1),r.push("color: ".concat(this.theme[e].foreground,";"))):0===t.color.indexOf("swatch:")&&this.config.swatches[t.color.substring(7)]?r.push("color: ".concat(this.getSwatchValue(t.color.substring(7))," !important;")):r.push("color: ".concat(t.color," !important;"))),r}},{key:"getCSSProperties",value:function(t){var e={main:this.getLayoutProperties(t).concat(this.getStyleProperties(t)),breakpoints:{}};if(t._breakpoints)for(var n in t._breakpoints)Object.prototype.hasOwnProperty.call(t._breakpoints,n)&&(e.breakpoints[n]=this.getLayoutProperties(t._breakpoints[n]).concat(this.getStyleProperties(t._breakpoints[n])));return e}},{key:"getSwatchValue",value:function(t){return this.config.swatches[t]?this.config.swatches[t].value:""}},{key:"getBackgroundImage",value:function(t){return'url("'.concat(this.core.getAssetPath(t.substring(4),"images"),'")')}},{key:"getBackgroundGradient",value:function(t){var e=t.split(":");return[e[0],"(",e[1],")"].join("")}},{key:"applyCSS",value:function(t,e){var n,r=!1;if(e.constructor===Array)n="".concat(t," { ").concat(e.join("\n\t")," }"),r=e.length>0;else for(var i in n="".concat(t," { ").concat(e.main.join("\n\t")," }"),r=e.main.length>0,e.breakpoints)Object.prototype.hasOwnProperty.call(e.breakpoints,i)&&(n+="@media ".concat(this.core.mediaQuery.namedQueries[i]||i," { ").concat(t," { ").concat(e.breakpoints[i].join("")," } }"),r||(r=e.breakpoints[i].length>0));r&&$("#content > .styles").append("<style>".concat(n,"</style>"))}},{key:"applyOptions",value:function(t,e){var n=this.data,r=[];r.push("cmp_".concat(this.type)),n.classlist&&(r.push(n.classlist),this.activeClasses=n.classlist),e.addClass(r.join(" "));var i={};i["data-uid"]=n.uid,i.id="CMP-"+n.uid,n.span&&(i["data-span"]=n.span),n.pull&&(i["data-pull"]=n.pull),n.size&&(i["data-size"]=n.size),e.attr(i)}},{key:"setupProperties",value:function(t){var e=this,n=this.data,r=this.getCSSProperties(n);if("function"==typeof t&&t(r),this.applyCSS("[data-uid='".concat(n.uid,"']"),r),this.applyOptions(this.type,this.container),n._breakpoints&&Object.entries(n._breakpoints).forEach((function(t){var r=nm(t,2),i=r[0],o=r[1];e.core.mediaQuery.addQuery(n.uid,i,o,n,(function(t){return e.applySettings(t)}))})),n.actions){var i=n.uid+"_ax";this.observer.removeByID(this.events.COMPONENTS_ADDED_TO_DOM,i),this.observer.add(this.events.COMPONENTS_ADDED_TO_DOM,(function(t){t.components.indexOf(n.uid)>-1&&(e.observer.removeByID(e.events.COMPONENTS_ADDED_TO_DOM,i),e.core.actions.bindActions({id:e.data.uid,actions:n.actions,parent:e.container[0]}))}),{id:i})}}},{key:"setupViewController",value:function(t){var e=null,n=this.options.defaultController,r=t||this.data.controller;return(n||r)&&(this.config.components[this.type].controllers[r]?e=this.config.components[this.type].controllers[r].controller(this.container,this.data,this):this.config.components[this.type].controllers[n]&&(e=this.config.components[this.type].controllers[n].controller(this.container,this.data,this))),e}},{key:"executeHooks",value:function(t,e,n){if(this.hooks[t]&&e){for(var r=!1,i=0;i<this.hooks[t].length;i++){var o=this.hooks[t][i];if("*"===e||e.includes(o.name)){var a=o.exec.apply(this,n);a&&(r=a)}}return r}return!1}},{key:"applySettings",value:function(t){t.classlist&&(this.container.removeClass(this.activeClasses).addClass(t.classlist),this.activeClasses=t.classlist)}},{key:"setResumeData",value:function(t){}},{key:"getResumeData",value:function(){return null}}]),t}(),km=function(t){Yv(n,t);var e=tm(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $v(this,n),(r=e.call(this,t,i)).children=[],r.childrenMap={},r.interactiveComponents=[],r.restrictChildTypes=[],r}return Hv(n,[{key:"getInteractiveComponents",value:function(){return this.interactiveComponents}},{key:"getChildren",value:function(){return this.children}},{key:"unload",value:function(){em(Kv(n.prototype),"unload",this).call(this);for(var t=0;t<this.children.length;t++){var e=this.children[t].component?this.children[t].component:this.children[t];"function"==typeof e.unload&&e.unload()}}},{key:"deactivate",value:function(){this.active=!1;for(var t=0;t<this.children.length;t++){var e=this.children[t].component?this.children[t].component:this.children[t];"function"==typeof e.deactivate&&e.deactivate()}}},{key:"canLoadComponent",value:function(t){return this.core.hasComponent(t)&&(!this.restrictChildTypes.length||this.restrictChildTypes.length&&this.restrictChildTypes.indexOf(this.type)>-1)}},{key:"initChildren",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.childoptions,r=void 0===n?[]:n,i=this.data;this.restrictChildTypes=this.restrictChildTypes||[],this.children=this.children||[],this.resumedata=this.resumedata||{};var o=$(this.container).find(".cmp_"+this.type+"-child");if(this.children.length)return console.log("[".concat(this.type,"] initChildren() - children already exist - ignoring initialisation.")),null;var a=[],s={},c=!1;if(i.children)for(var u=0;u<i.children.length;u++)if(this.canLoadComponent(i.children[u].type)){var l=void 0;if(l=this.config.componentRegistry[i.children[u].uid]?this.config.componentRegistry[i.children[u].uid]:this.core.createComponent(i.children[u].type)){var f=$(o[u]);s[i.children[u].uid]=l,l.parent=function(){return t},this.resumedata._&&this.resumedata._[i.children[u].uid]?l.setResumeData(this.resumedata._[i.children[u].uid]):this.resumedata[i.children[u].uid]&&l.setResumeData(this.resumedata[i.children[u].uid]),i.children[u].pageid=this.getData().pageid,this.config.componentRegistry[i.children[u].uid]=l;var d=this.getChildParentData(r[u]);(l.isInitialised()?l.element():l.initialise(f,i.children[u],d))?a.push({component:l,container:f}):a.push(null),l.isInteractive()&&(c=!0)}}for(var p=a.length-1;p>=0;p--)a[p]||(i.children.splice(p,1),a.splice(p,1));return{interactiveChildren:c,children:a,childrenMap:s}}},{key:"loadChildren",value:function(){var t=this;this.restrictChildTypes=this.restrictChildTypes||[],this.children=this.children||[],this.resumedata=this.resumedata||{};var e=this.data,n=$(this.container).find(".cmp_"+this.type+"-child");if(this.children.length){for(var r=0;r<this.children.length;r++){var i=$(n[r]),o=this.children[r].component?this.children[r].component:this.children[r];o.setContainer(i),this.renderChild(o)}return null}var a=[],s={},c=!1;if(e.children)for(var u=0;u<e.children.length;u++)if(this.canLoadComponent(e.children[u].type)){var l=this.core.createComponent(e.children[u].type);if(l){var f=$(n[u]);a.push({component:l,container:f}),s[e.children[u].uid]=l,l.parent=function(){return t},this.resumedata._&&this.resumedata._[e.children[u].uid]?l.setResumeData(this.resumedata._[e.children[u].uid]):this.resumedata[e.children[u].uid]&&l.setResumeData(this.resumedata[e.children[u].uid]),e.children[u].pageid=this.getData().pageid,this.config.componentRegistry[e.children[u].uid]=l,l.setContainer(f),this.renderChild(l),l.isInteractive()&&(c=!0)}}return{interactiveChildren:c,children:a,childrenMap:s}}},{key:"getChildParentData",value:function(t){var e=[];return this.parentdata&&e.push(this.parentdata),t&&e.push(t),e=e.length?e.reduce((function(t,e){return Wv(Wv({},t),e)}),{}):void 0}},{key:"updateActiveChild",value:function(t){var e=t.getData();if(!0===this.core.checkDisplayConditions(e.conditions).active){var n=this.children.findIndex((function(e){return e.component===t})),r=this.children.slice(0,n).map((function(t){return t.component.element()[0]})).filter((function(t){return!!t})).reverse().find((function(t){return document.body.contains(t)})),i=t.element();r?$(r).after(i):this.container.prepend(i),t.load()}else"function"==typeof t.deactivate&&t.deactivate(),t.element().detach();this.complete=!1}},{key:"renderChild",value:function(t){var e=t.getData();!0===this.core.checkDisplayConditions(e.conditions).active?t.load():"function"==typeof t.deactivate&&t.deactivate()}},{key:"getPercentComplete",value:function(){if(this.complete)return 100;for(var t=100*this.children.length,e=0,n=0;n<this.children.length;n++){var r=this.children[n].component?this.children[n].component:this.children[n];r&&r.isInteractive()?"function"==typeof r.getPercentComplete?e+=r.getPercentComplete():r.canMoveOn()&&(e+=100):t--}return e/t*100}}]),n}(Im),Am=function(t){Yv(n,t);var e=tm(n);function n(t){var r,i,o;return $v(this,n),Gv(Xv(o=e.call(this,t)),"type","section"),Gv(Xv(o),"initialise",(function(){for(var t,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(t=em((r=Xv(o),Kv(n.prototype)),"initialise",r)).call.apply(t,[r].concat(i)),o.children=[],o.childrenMap={},o.container})),Gv(Xv(o),"load",(function(){if(!o.loaded){o.activate(),o.setupProperties(),o.renderChildren();var t=o.data;return o.observer.add(o.events.BLOCK_COMPLETE,(function(t){void 0!==o.childrenMap[t.block]&&o.checkComplete(!0)}),{id:t.uid}),o.container.attr("data-uid",t.uid),t.label&&o.container.attr("data-label",t.label),t.classlist&&o.container.addClass(t.classlist),t.size&&o.container.addClass(t.size),o.checkComplete(!1),o.loaded=!0,!0}o.redisplay()})),Gv(Xv(o),"unload",(function(){em((i=Xv(o),Kv(n.prototype)),"unload",i).call(i),o.observer.removeByID(o.events.BLOCK_COMPLETE,o.data.uid)})),Gv(Xv(o),"redisplay",(function(){o.loaded=!1,o.container.empty(),o.unload(),o.load()})),Gv(Xv(o),"renderChildren",(function(){for(var t=0;t<o.children.length;t++)o.renderChild(o.children[t]);o.checkComplete(!1)})),Gv(Xv(o),"addBlock",(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o.children.push(e),o.childrenMap[n.uid]=o.children.length,e.parent=function(){return Xv(o)},e.initialise(t,n,Wv(Wv({},o.parentdata),r))})),Gv(Xv(o),"renderChild",(function(t){var e=t.getData();!0===o.core.checkDisplayConditions(e.conditions).active?(t.element().appendTo(o.container),t.load()):(t.deactivate(),t.element().detach())})),Gv(Xv(o),"updateActiveChild",(function(t){var e=t.getData();if(!0===o.core.checkDisplayConditions(e.conditions).active){var n=o.children.slice(0,o.children.indexOf(t)).map((function(t){return t.element()[0]})).filter((function(t){return!!t})).reverse().find((function(t){return document.body.contains(t)}));n?$(n).after(t.element()):o.container.prepend(t.element()),t.load()}else t.deactivate(),t.element().detach();o.complete=!1})),Gv(Xv(o),"getPercentComplete",(function(){if(!o.children.length)return 100;for(var t=100*o.children.length,e=0,n=0;n<o.children.length;n++){var r=o.children[n];"function"==typeof r.getPercentComplete?e+=r.getPercentComplete():r.canMoveOn()&&(e+=100)}return e/t*100})),Gv(Xv(o),"checkComplete",(function(t){if(o.complete)return!0;for(var e=!0,n=0;n<o.children.length;n++)if(!o.children[n].canMoveOn()){e=!1;break}return e&&!o.complete&&(o.complete=!0,t&&o.observer.notify(o.events.SECTION_COMPLETE,o.getEventData())),e||(o.complete=!1),o.complete&&o.container.addClass("completed"),o.complete})),Gv(Xv(o),"reset",(function(){o.complete=!1,o.loaded=!1,o.children.forEach((function(t){"function"==typeof t.reset&&t.reset()})),o.container&&o.container.attr("class",o.initClasses)})),Gv(Xv(o),"getEventData",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.events.SECTION_COMPLETE;return t===o.events.SECTION_COMPLETE?{scope:o.getScope(),uid:o.data.uid,section:o.data.uid,step:o.data.pageid,pageid:o.data.pageid,sectiondata:o.data}:{scope:o.getScope(),uid:o.data.uid}})),Gv(Xv(o),"getBlocks",(function(){return o.children})),o.data={},o.container=null,o.complete=!1,o.loaded=!1,o.active=!0,o.containertemplate="<div class='cmp_section'></div>",o}return n}(km),Dm=function(t){Yv(n,t);var e=tm(n);function n(t){var r,i,o,a;return $v(this,n),Gv(Xv(a=e.call(this,t)),"type","grid"),Gv(Xv(a),"isBlock",!0),Gv(Xv(a),"version",1),Gv(Xv(a),"initialise",(function(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=em((r=Xv(a),Kv(n.prototype)),"initialise",r)).call.apply(t,[r].concat(i)),a.childrenMap={},a.children=[],a.interactiveComponents=[],a.container})),Gv(Xv(a),"load",(function(){if(a.loaded)a.redisplay();else{a.activate(),a.setupProperties(),a.renderChildren();var t=a.data;t.size&&a.container.addClass(t.size),t.padding&&a.container.css("padding",t.padding),t.columns?a.container.attr("data-columns",t.columns):a.container.attr("data-columns",1),t.split&&parseInt(t.columns,10)>1&&a.container.addClass("split-"+t.split),a.observer.add(a.events.COMPONENT_COMPLETE,a.onComponentComplete,{id:t.uid}),a.checkComplete(!1),a.loaded=!0}})),Gv(Xv(a),"onComponentComplete",(function(t){(void 0!==a.childrenMap[t.component]||t.scope&&void 0!==a.childrenMap[t.scope])&&a.checkComplete(!0)})),Gv(Xv(a),"unload",(function(){em((i=Xv(a),Kv(n.prototype)),"unload",i).call(i),a.observer.removeByID(a.events.COMPONENT_COMPLETE,a.data.uid)})),Gv(Xv(a),"redisplay",(function(){a.loaded=!1,a.container.empty(),a.unload(),a.load()})),Gv(Xv(a),"addComponent",(function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.children.push(e),a.childrenMap[n.uid]=a.children.length-1,e.parent=function(){return Xv(a)},e.initialise(t,n,Wv(Wv({},a.parentdata),r)),e.isInteractive()&&(a.interactive=!0,a.interactiveComponents.push(e))})),Gv(Xv(a),"renderChild",(function(t){var e=t.element(),n=t.getData();if(!0===a.core.checkDisplayConditions(n.conditions).active){if(!t.wrapper){var r=$(a.cmpcontainer);n.span&&r.attr("data-span",n.span),t.wrapper=r}t.wrapper.append(e).appendTo(a.container),t.load()}else t.deactivate(),t.wrapper&&t.wrapper.detach()})),Gv(Xv(a),"updateActiveChild",(function(t){var e=t.getData();if(!0===a.core.checkDisplayConditions(e.conditions).active){var n=a.children.slice(0,a.children.indexOf(t)).map((function(t){return t.element()[0]})).filter((function(t){return!!t})).reverse().find((function(t){return document.body.contains(t)}));n?$(n).after(t.element()):a.container.prepend(t.element()),t.load()}else"function"==typeof t.deactivate&&t.deactivate(),t.element().detach();a.complete=!1})),Gv(Xv(a),"getPercentComplete",(function(){if(!a.interactiveComponents.length)return 100;for(var t=100*a.interactiveComponents.length,e=0,n=0;n<a.interactiveComponents.length;n++)a.interactiveComponents[n].isActive()?"function"==typeof a.interactiveComponents[n].getPercentComplete?e+=a.interactiveComponents[n].getPercentComplete():a.interactiveComponents[n].canMoveOn()&&(e+=100):t-=100;return e/t*100})),Gv(Xv(a),"checkComplete",(function(t){for(var e=!0,n=0;n<a.interactiveComponents.length;n++)if(a.interactiveComponents[n].isActive()&&!a.interactiveComponents[n].canMoveOn()){e=!1;break}return e&&!a.complete&&(a.complete=!0,t&&a.observer.notify(a.events.BLOCK_COMPLETE,a.getEventData())),e||(a.complete=!1),a.complete&&a.container.addClass("completed"),a.complete})),Gv(Xv(a),"reset",(function(){a.complete=!1,a.children.forEach((function(t){"function"==typeof t.reset&&t.reset()})),a.container&&a.container.attr("class",a.initClasses)})),Gv(Xv(a),"applySettings",(function(t){em((o=Xv(a),Kv(n.prototype)),"applySettings",o).call(o,t),t.size&&a.container.removeClass("fullwidth restrict").addClass(t.size),t.padding&&a.container.css("padding",t.padding),t.columns&&a.container.attr("data-columns",t.columns),t.split&&parseInt(t.columns,10)>1&&a.container.addClass("split-"+t.split)})),Gv(Xv(a),"getEventData",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.events.BLOCK_COMPLETE;return t===a.events.BLOCK_COMPLETE?{scope:a.getScope(),uid:a.data.uid,block:a.data.uid,step:a.data.pageid,pageid:a.data.pageid,blockdata:a.data}:{scope:a.getScope(),uid:a.data.uid}})),Gv(Xv(a),"getComponents",(function(){return a.children})),a.data={},a.container=null,a.interactiveComponents=[],a.active=!0,a.complete=!1,a.cmpcontainer="<div class='cmp_componentwrapper'></div>",a.containertemplate="<div class='cmp_block'></div>",a.loaded=!1,a}return Hv(n,[{key:"renderChildren",value:function(){for(var t=0;t<this.children.length;t++)this.renderChild(this.children[t]);this.checkComplete(!1)}}]),n}(km),Pm=Object.freeze({__proto__:null,name:"dataset_fb_ci",module:function(t){var e=t.core;function n(t){var e={};t=$(t),e.id=t.attr("uid"),e.feedbacks={component:{},question:{},answer:{}};var n,r,i=t.find("component > feedback");for(n=0;n<i.length;n++)i[n]=$(i[n]),r={questionindex:["*"],state:i[n].attr("state"),text:i[n].find("text").text()},e.feedbacks.component[r.state]||(e.feedbacks.component[r.state]=[]),e.feedbacks.component[r.state].push(r);for(i=t.find("question > feedback"),n=0;n<i.length;n++)i[n]=$(i[n]),r={questionindex:(i[n].attr("question")||"*").split(","),state:i[n].attr("state"),text:i[n].find("text").text()},e.feedbacks.question[r.state]||(e.feedbacks.question[r.state]=[]),e.feedbacks.question[r.state].push(r);for(i=t.find("answer > feedback"),n=0;n<i.length;n++)i[n]=$(i[n]),r={questionindex:(i[n].attr("question")||"*").split(","),state:i[n].attr("state"),text:i[n].find("text").text()},e.feedbacks.answer[r.state]||(e.feedbacks.answer[r.state]=[]),e.feedbacks.answer[r.state].push(r);return e}function r(t){function e(e,r){if(!t.feedbacks[r]||!t.feedbacks[r][e.state])return SparkAPI.warn("FBCI_Controller :: Feedback ["+r+":"+e.state+"] in "+t.id+" not found."),"";var i=n(t.feedbacks[r][e.state],e.questionindex||"0");if(i)return i.text;var o=n(t.feedbacks[r].default,e.questionindex||"0");return o?o.text:""}function n(t,e){if(!t||!t.length)return null;for(var n=0;n<t.length;n++)if(t[n].questionindex.includes(""+e)||t[n].questionindex.includes("*"))return t[n];return null}return{type:function(){return"fb_ci"},getID:function(){return t.id},canSaveState:function(){return!1},getComponentFeedback:function(t){return e(t,"component")},getQuestionFeedback:function(t){return e(t,"question")},getAnswerFeedback:function(t){return e(t,"answer")}}}return{name:"dataset_fb_ci",version:1,immediate:!0,init:function(){e.registerDatasetParser("fb_ci",n,r)}}}}),Mm=Object.freeze({__proto__:null,name:"dataset_fb_ctx",module:function(t){var e=t.core,n=t.utils;function r(t){var e={};t=$(t),e.id=t.attr("uid"),e.feedbacks={component:[],question:[],answer:[]};for(var r=t.find("component > feedback"),i=0;i<r.length;i++){r[i]=$(r[i]);var o={questionindex:["*"],rule:n.getNodeAttributesAsObject(r[i].find("rule")[0]),text:r[i].find("text").text()};void 0!==o.rule.pattern&&(o.rule.pattern=(""+o.rule.pattern).split(",").map((function(t){return parseInt(t,10)}))),e.feedbacks.component.push(o)}r=t.find("question > feedback");for(var a=0;a<r.length;a++){r[a]=$(r[a]);var s={questionindex:(r[a].attr("question")||"*").split(","),rule:n.getNodeAttributesAsObject(r[a].find("rule")[0]),text:r[a].find("text").text()};void 0!==s.rule.pattern&&(s.rule.pattern=(""+s.rule.pattern).split(",").map((function(t){return parseInt(t,10)}))),e.feedbacks.question.push(s)}r=t.find("answer > feedback");for(var c=0;c<r.length;c++){r[c]=$(r[c]);var u={questionindex:(r[c].attr("question")||"*").split(","),rule:n.getNodeAttributesAsObject(r[c].find("rule")[0]),text:r[c].find("text").text()};void 0!==u.rule.pattern&&(u.rule.pattern=(""+u.rule.pattern).split(",").map((function(t){return parseInt(t,10)}))),e.feedbacks.answer.push(u)}return e}function i(t){function e(e){for(var n=0;n<t.feedbacks[e].length;n++)if("default"===t.feedbacks[e][n].rule.condition&&t.feedbacks[e][n].questionindex.includes("*"))return t.feedbacks[e][n];return{text:""}}function n(n,r){switch(r){case"component":var o=function(t,e,n){if(!t.length)return null;for(var r=0;r<t.length;r++)if((t[r].questionindex.includes(""+n)||t[r].questionindex.includes("*"))&&t[r].rule.condition===e)return t[r];return null}(t.feedbacks[r],n.state,n.questionindex||"*");if(o)return o.text;break;case"question":for(var a,s=[],c=0;c<t.feedbacks[r].length;c++){if(t.feedbacks[r][c].questionindex.includes(""+n.questionindex)||t.feedbacks[r][c].questionindex.includes("*"))if(a=i(n.selection,t.feedbacks[r][c].rule.pattern,t.feedbacks[r][c].rule.condition),s.push({index:c,accuracy:a}),1===a)return t.feedbacks[r][c].text||e(r).text}break;case"answer":for(var u=0;u<t.feedbacks[r].length;u++)if("default"===t.feedbacks[r][u].rule.condition||t.feedbacks[r][u].rule.pattern.includes(n.answerindex))return t.feedbacks[r][u].text||e(r).text}return e(r).text}var r={all:function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&e++;return e===t.length?1:0},none:function(t){for(var e=0,n=0;n<t.length;n++)t[n]&&e++;return 0===e?1:0},onlyAllOf:function(t,e){for(var n=0,r=0;r<e.length;r++)t[e[r]]&&n++;for(var i=0,o=0;o<t.length;o++)t[o]&&i++;return(n/e.length+i/e.length)/2},onlyAnyOf:function(t,e){for(var n=0,r=0,i=0;i<t.length;i++)t[i]&&(r++,e.includes(i)||n++);return r>0&&!n?1:0},includesAnyOf:function(t,e){for(var n=0;n<e.length;n++)if(t[e[n]])return 1;return 0},includesAllOf:function(t,e){for(var n=0,r=0;r<e.length;r++)t[e[r]]&&n++;return n===e.length?1:0},excludesAnyOf:function(t,e){for(var n=0,r=0;r<e.length;r++)t[e[r]]&&n++;return 0===n?1:0},excludesAllOf:function(t,e){for(var n=0,r=0;r<e.length;r++)t[e[r]]&&n++;for(var i=0,o=0;o<t.length;o++)t[o]&&i++;return i>0&&0===n?1:0}};function i(t,e,n){return"default"===n?1:"function"==typeof r[n]?r[n](t,e):(console.warn("Condition [".concat(n,"] is not found.")),0)}return{type:function(){return"fb_ctx"},getID:function(){return t.id},canSaveState:function(){return!1},getComponentFeedback:function(t){return n(t,"component")},getQuestionFeedback:function(t){return n(t,"question")},getAnswerFeedback:function(t){return n(t,"answer")}}}return{name:"dataset_fb_ctx",version:1,immediate:!0,init:function(){e.registerDatasetParser("fb_ctx",r,i)}}}}),Rm=Object.freeze({__proto__:null,name:"dataset_fb_smp",module:function(t){var e=t.core;function n(t){var e={};t=$(t),e.id=t.attr("uid"),e.feedbacks=[];for(var n=t.find("feedback"),r=0;r<n.length;r++){n[r]=$(n[r]);var i={questionindex:(n[r].attr("question")||"*").split(","),text:n[r].find("text").text()};e.feedbacks.push(i)}return e}function r(t){function e(e){var r=n(t.feedbacks,e.questionindex||"0");if(r)return r.text;var i=n(t.feedbacks,"*");return i?i.text:""}function n(t,e){if(!t||!t.length)return null;for(var n=0;n<t.length;n++)if(t[n].questionindex.includes(""+e))return t[n];return null}return{type:function(){return"fb_smp"},getID:function(){return t.id},canSaveState:function(){return!1},getComponentFeedback:function(t){return e(t)},getQuestionFeedback:function(t){return e(t)},getAnswerFeedback:function(t){return e(t)}}}return{name:"dataset_fb_smp",version:1,immediate:!0,init:function(){e.registerDatasetParser("fb_smp",n,r)}}}}),Lm=Object.freeze({__proto__:null,name:"dataset_mcq",module:function(t){var e=t.core,n=t.observer,r=t.events,i=t.utils;function o(t){var e={};t=$(t),e.id=t.attr("uid"),e.mode=t.attr("mode")||"default",e.state="initial",e.questions=[],e.multiSelect=!1;for(var n=t.find("> question"),r=0;r<n.length;r++){n[r]=$(n[r]);for(var o=n[r].find("answers > answer"),a=n[r].attr("shuffleanswers"),s={index:r,uid:n[r].attr("uid")||"".concat(e.id,"_Q").concat(r),text:n[r].find("> text").text(),type:n[r].attr("type")||"auto",mandatory:"true"===n[r].attr("mandatory"),shuffleanswers:a||"inherit",state:"initial",answers:[],totalCorrect:0},c=0;c<o.length;c++)o[c]=$(o[c]),s.answers.push({index:c,text:o[c].find("> text").text(),correct:"true"===o[c].attr("correct"),state:"initial",uid:o[c].attr("uid")||"".concat(e.id,"_Q").concat(r,"_A").concat(c)}),s.answers[s.answers.length-1].correct&&(s.totalCorrect+=1);e.questions.push(s)}var u=t.find("> settings")[0];return e.modeSettings=i.getNodeAttributesAsObject(u,!0),e}function a(t){var e={D_INITIAL:"initial",D_INCOMPLETE:"incomplete",D_COMPLETED_PASSED:"completed:passed",D_COMPLETED_FAILED:"completed:failed",D_COMPLETED_NEUTRAL:"completed:neutral",Q_INITIAL:"initial",Q_INCOMPLETE:"incomplete",Q_COMPLETED_CORRECT:"completed:correct",Q_COMPLETED_INCORRECT:"completed:incorrect",Q_COMPLETED_NEUTRAL:"completed:neutral",A_INITIAL:"initial",A_SELECTED_CORRECT:"selected:correct",A_SELECTED_INCORRECT:"selected:incorrect",A_SELECTED_NEUTRAL:"selected:neutral"},o={suppressEvents:!1,allowIncorrectAnswers:!1},a=null,s=0,c=!0;function u(e){return t.questions[e]}function l(e,n){return t.questions[e].answers[n].state}function f(n,r){for(var i=0;i<t.questions[n].answers.length;i++)r?t.questions[n].answers[i].state=e.A_INITIAL:p(n,i,e.D_INITIAL)}function d(t,e){return"all"===t||"scored"===t||"failedscored"===t&&!e.includes(":correct")&&!e.includes(":neutral")}function p(i,a,s){s!==e.A_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE),t.multiSelect||1!==t.questions[i].totalCorrect||o.allowIncorrectAnswers||f(i,!0);var c=t.questions[i].answers[a].state;t.questions[i].answers[a].state=s,o.suppressEvents||c!==s&&n.notifyByID(r.DATASET_ITEM_STATE_CHANGE,t.id,{type:"mcq:answer",dataset:t.id,question:i,answer:a,oldstate:c,newstate:s}),function(i){for(var a=t.questions[i],s=0,c=0,u=0;u<a.answers.length;u++)a.answers[u].state===e.A_SELECTED_CORRECT?s++:a.answers[u].state===e.A_SELECTED_INCORRECT&&c++;var l=a.state,f=e.Q_INITIAL;(c>0||s>0)&&(f=e.Q_INCOMPLETE);if(o.allowIncorrectAnswers)s===a.totalCorrect&&(f=e.Q_COMPLETED_CORRECT);else{var d=c+s;s===a.totalCorrect&&0===c?f=e.Q_COMPLETED_CORRECT:(c>0&&a.totalCorrect<=1||d>=a.totalCorrect)&&(f=e.Q_INCOMPLETE)}a.state=f,o.suppressEvents||l===f||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"mcq:question",dataset:t.id,question:a,oldstate:l,newstate:f,numcorrect:s,numincorrect:c})}(i),v()}function h(e){return t.questions[e].state}function g(i,o){var a=t.questions[i].state;t.questions[i].state=o,a!==o&&n.notify(r.DATASET_ITEM_STATE_CHANGE,{type:"mcq:question",dataset:t.id,item:i,oldstate:a,newstate:o}),o!==e.Q_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE),v()}function v(){for(var i=t.state,a=0,s=0,c=0,u=0;u<t.questions.length;u++)switch(t.questions[u].state){case e.Q_INITIAL:case e.Q_INCOMPLETE:c++;break;case e.Q_COMPLETED_CORRECT:a++;break;case e.Q_COMPLETED_INCORRECT:a++,s++}a===t.questions.length&&(t.state=0===s?e.D_COMPLETED_PASSED:e.D_COMPLETED_FAILED),c>0&&(t.state=e.D_INCOMPLETE),i!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"mcq",dataset:t.id,oldstate:i,newstate:t.state}))}function m(e,n){t.questions[e].response=n}function y(e){return t.questions[e].response||""}function b(t,e){void 0!==o[t]&&(o[t]=e)}return{type:function(){return"mcq"},getID:function(){return t.id},canSaveState:function(){return!0},states:function(){return e},getState:function(){return t.state},setState:function(i){var a=t.state;if(t.state=i,a!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"mcq",dataset:t.id,oldstate:a,newstate:t.state}),i===e.D_COMPLETED_FAILED))for(var s=0;s<t.questions.length;s++){h(s)===e.Q_INCOMPLETE&&g(s,e.Q_COMPLETED_INCORRECT)}},getResumeData:function(){var n={s:"0",q:[]};switch(a&&(n.o=a.join(",")),t.state){case e.D_INITIAL:n.s="0";break;case e.D_INCOMPLETE:n.s="1";break;case e.D_COMPLETED_FAILED:n.s="2";break;case e.D_COMPLETED_PASSED:n.s="3";break;case e.D_COMPLETED_NEUTRAL:n.s="4";break;default:n.s="0"}for(var r=0;r<t.questions.length;r++){var i={s:"0",r:y(r),a:[]};switch(t.questions[r].state){case e.Q_INITIAL:i.s="0";break;case e.Q_INCOMPLETE:i.s="1";break;case e.Q_COMPLETED_INCORRECT:i.s="2";break;case e.Q_COMPLETED_CORRECT:i.s="3";break;case e.Q_COMPLETED_NEUTRAL:i.s="4";break;default:i.s="0"}for(var o=0;o<t.questions[r].answers.length;o++){var s={s:"0"};switch(t.questions[r].answers[o].state){case e.A_INITIAL:s.s="0";break;case e.A_SELECTED_INCORRECT:s.s="1";break;case e.A_SELECTED_CORRECT:s.s="2";break;case e.A_SELECTED_NEUTRAL:s.s="3";break;default:s.s="0"}i.a.push(s)}n.q.push(i)}return n=(n=(n=(n=(n=(n=JSON.stringify(n)).split('"').join("'")).split("'},{'s':'").join("[~]")).split("':[{'s':'").join("[|]")).split("{'q':[{'").join("[@]")).split("}]}]}").join("[^]")},setResumeData:function(n){b("suppressEvents",!0),n=(n=(n=(n=(n=n.split("[^]").join("}]}]}")).split("[@]").join("{'q':[{'")).split("[|]").join("':[{'s':'")).split("[~]").join("'},{'s':'")).split("'").join('"');var r=JSON.parse(n);switch(r.o&&(a=(r.o||"").split(",").filter((function(t){return!!t})).map((function(t){return parseInt(t,10)})),c=!0),r.s){case"0":t.state=e.D_INITIAL;break;case"1":t.state=e.D_INCOMPLETE;break;case"2":t.state=e.D_COMPLETED_FAILED;break;case"3":t.state=e.D_COMPLETED_PASSED;break;case"4":t.state=e.D_COMPLETED_NEUTRAL;break;default:t.state=e.D_INITIAL}for(var i=0;i<r.q.length;i++){switch(r.q[i].r&&m(i,r.q[i].r),r.q[i].s){case"0":t.questions[i].state=e.Q_INITIAL;break;case"1":t.questions[i].state=e.Q_INCOMPLETE;break;case"2":t.questions[i].state=e.Q_COMPLETED_INCORRECT;break;case"3":t.questions[i].state=e.Q_COMPLETED_CORRECT;break;case"4":t.questions[i].state=e.Q_COMPLETED_NEUTRAL;break;default:t.questions[i].state=e.Q_INITIAL}for(var o=0;o<r.q[i].a.length;o++)switch(r.q[i].a[o].s){case"0":t.questions[i].answers[o].state=e.A_INITIAL;break;case"1":t.questions[i].answers[o].state=e.A_SELECTED_INCORRECT;break;case"2":t.questions[i].answers[o].state=e.A_SELECTED_CORRECT;break;case"3":t.questions[i].answers[o].state=e.A_SELECTED_NEUTRAL;break;default:t.questions[i].answers[o].state=e.A_INITIAL}}b("suppressEvents",!1)},getReport:function(e,n){n=n||{};for(var r=u(e=e||0),i={uid:n.uid||t.uid,type:n.type||"choice",percent:void 0!==n.percent?n.percent:100,weight:n.weight||1,result:n.result||"neutral",response:[],time:n.time||"00:00:00.00",latency:n.latency||"00:00:00.00",name:r.text,description:r.text,correctResponsesPattern:[],choices:[]},o=0;o<r.answers.length;o++){var a="abcdefghijklmnopqrstuvwxyz".charAt(o).toLowerCase(),s=r.answers[o].text;r.answers[o].correct&&i.correctResponsesPattern.push(a),l(e,o).indexOf("selected")>-1&&i.response.push(a),i.choices.push({id:a,description:{"en-US":s}})}return i.response=i.response.join("[,]"),i.correctResponsesPattern=[i.correctResponsesPattern.join("[,]")],i},getNumQuestions:function(){return t.questions.length},getQuestionData:u,getQuestionState:h,setQuestionState:g,clearSelection:function(t){return f(t,!1)},getAnswerState:l,setAnswerState:p,getSelection:function(e){for(var n=[],r=0;r<t.questions[e].answers.length;r++)t.questions[e].answers[r].state.indexOf("selected:")>-1&&n.push(r);return n},getAnswerCorrect:function(e,n){return t.questions[e].answers[n].correct},getQuestionResponse:y,setQuestionResponse:m,getMode:function(){return t.mode},getNextPoolQuestion:function(){return a?c||s++:(c=!0,s=0,a=function(){var e=Array.from({length:t.questions.length}).map((function(t,e){return e}));t.modeSettings.shuffle&&(e=i.array.shuffle(e));var n=nm(e.reduce((function(e,n){return t.questions[n].mandatory?e[0].push(n):e[1].push(n),e}),[[],[]]),2),r=n[0],o=n[1];return r.concat(o)}()),void 0===a[s]?(console.error(new Error("Attempted to get next pool question but no more questions are available.")),null):(c=!1,a[s])},reset:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",a=t.state,s=[];t.questions.forEach((function(t,n){d(i,t.state)&&(t.state=e.Q_INITIAL,t.response="",s.push(n),t.answers.forEach((function(t){t.state=e.A_INITIAL})))})),t.state=e.D_INITIAL,o.suppressEvents||n.notifyByID(r.DATASET_RESET,t.id,{type:"mcq",dataset:t.id,oldstate:a,newstate:t.state,resetitems:s})},getFlag:function(t){return o[t]},setFlag:b}}return{name:"dataset_mcq",version:1,immediate:!0,init:function(){e.registerDatasetParser("mcq",o,a)}}}}),Nm=Object.freeze({__proto__:null,name:"dataset_likert",module:function(t){var e=t.core,n=t.config;function r(t){var e={};t=$(t),e.id=t.attr("uid"),e.scale=[],e.state="initial",e.questions=[];for(var n=t.find("> scale > item"),r=0;r<n.length;r++)e.scale.push({index:r,number:r+1,text:$(n[r]).text()});for(var i=t.find("> question"),o=0;o<i.length;o++){i[o]=$(i[o]);for(var a={index:o,text:i[o].find("> text").text(),type:"radio",state:"initial",answers:[]},s=0;s<e.scale.length;s++)a.answers.push({index:s,text:e.scale[s].text,state:"initial"});e.questions.push(a)}return e}function i(t){n.datasetParsers.mcq||alert("Likert data controller - unable to find MCQ data controller.");var e=new n.datasetParsers.mcq.control(t);return e.getScale=function(){return t.scale},e.getReport=function(n,r){n=n||0,r=r||{};for(var i=e.getQuestionData(n),o={uid:r.uid||t.uid,type:r.type||"likert",percent:void 0!==r.percent?r.percent:100,weight:r.weight||1,result:r.result||"neutral",response:[],time:r.time||"00:00:00.00",latency:r.latency||"00:00:00.00",name:i.text,description:i.text,scale:[]},a=0;a<i.answers.length;a++){var s="abcdefghijklmnopqrstuvwxyz".charAt(a).toLowerCase(),c=i.answers[a].text;e.getAnswerState(n,a).indexOf("selected")>-1&&o.response.push(s),o.scale.push({id:s,description:{"en-US":c}})}return o.response=o.response.join("[,]"),o},e}return{name:"dataset_likert",version:1,immediate:!0,init:function(){e.registerDatasetParser("likert",r,i)}}}}),jm=Object.freeze({__proto__:null,name:"dataset_matrix",module:function(t){var e=t.core,n=t.utils,r=t.config;function i(t){var e={};t=$(t),e.id=t.attr("uid"),e.options=[],e.state="initial",e.multiSelect="multi"===t.find("> options").attr("type"),e.questions=[];for(var r=t.find("> options > item"),i=0;i<r.length;i++)e.options.push({index:i,number:i+1,text:$(r[i]).text()});for(var o=t.find("> question"),a=0;a<o.length;a++){o[a]=$(o[a]);var s=n.array.map((""+o[a].attr("correct")).split(","),(function(t){return parseInt(t,10)})),c={index:a,text:o[a].find("> text").text(),type:"auto",state:"initial",totalCorrect:s.length,answers:[]};s.length>1&&!e.multiSelect&&(e.multiSelect=!0);for(var u=0;u<e.options.length;u++)c.answers.push({index:u,text:e.options[u].text,state:"initial",correct:s.indexOf(u)>-1});e.questions.push(c)}return e}function o(t){r.datasetParsers.mcq||alert("Matrix data controller - unable to find MCQ data controller.");var e=new r.datasetParsers.mcq.control(t);return e.getMultiSelect=function(){return t.multiSelect},e.getOptions=function(){return t.options},e.getReport=function(n,r){n=n||0,r=r||{};for(var i=e.getQuestionData(n),o={uid:r.uid||t.uid,type:r.type||"choice",percent:void 0!==r.percent?r.percent:100,weight:r.weight||1,result:r.result||"neutral",response:[],time:r.time||"00:00:00.00",latency:r.latency||"00:00:00.00",name:i.text,description:i.text,correctResponsesPattern:[],options:[]},a=0;a<i.answers.length;a++){var s="abcdefghijklmnopqrstuvwxyz".charAt(a).toLowerCase(),c=i.answers[a].text;i.answers[a].correct&&o.correctResponsesPattern.push(s),e.getAnswerState(n,a).indexOf("selected")>-1&&o.response.push(s),o.options.push({id:s,description:{"en-US":c}})}return o.response=o.response.join("[,]"),o.correctResponsesPattern=[o.correctResponsesPattern.join("[,]")],o},e}return{name:"dataset_matrix",version:1,immediate:!0,init:function(){e.registerDatasetParser("matrix",i,o)}}}});function qm(t,e){return t?"not-mandatory"!==e.mandatory:"strict"===e.mandatory}function zm(t,e){return t?"not-mandatory"!==e.mandatory:"strict"===e.mandatory}var Bm=[Pm,Mm,Rm,Lm,Object.freeze({__proto__:null,name:"dataset_match",module:function(t){var e=t.core,n=t.observer,r=t.events,i=t.utils;function o(t){var e={};t=$(t),e.id=t.attr("uid"),e.state="initial",e.questions=[];for(var n=t.find("> question"),r=0;r<n.length;r++){n[r]=$(n[r]);var o={index:r,uid:n[r].attr("uid"),text:n[r].find("> text").text(),mandatory:"true"===n[r].attr("mandatory"),shufflegroup_a:"false"!==n[r].attr("shufflea"),shufflegroup_b:"false"!==n[r].attr("shuffleb"),state:"initial",pairs:[],group_a:{title:"",items:[]},group_b:{title:"",items:[]},itemmap:{}},a=n[r].find("groups");o.group_a.title=a.attr("labelA"),o.group_b.title=a.attr("labelB");for(var s=n[r].find("pair"),c=0;c<s.length;c++){s[c]=$(s[c]);var u=s[c].attr("uid");o.pairs.push({index:c,id:u,state:"initial"});for(var l=s[c].find("item"),f=Math.min(2,l.length),d=0;d<f;d++){l[d]=$(l[d]);var p={index:d,uid:l[d].attr("uid"),text:l[d].find("> text").text(),pairid:u,state:"initial",response:null};0===d?o.group_a.items.push(p):o.group_b.items.push(p),o.itemmap[p.uid]=p}}e.questions.push(o)}var h=t.find("> settings")[0];return e.modeSettings=i.getNodeAttributesAsObject(h,!0),e}function a(t){var e={D_INITIAL:"initial",D_INCOMPLETE:"incomplete",D_COMPLETED_PASSED:"completed:passed",D_COMPLETED_FAILED:"completed:failed",D_COMPLETED_NEUTRAL:"completed:neutral",Q_INITIAL:"initial",Q_INCOMPLETE:"incomplete",Q_COMPLETED_CORRECT:"completed:correct",Q_COMPLETED_INCORRECT:"completed:incorrect",Q_COMPLETED_NEUTRAL:"completed:neutral",P_INITIAL:"initial",P_CORRECT:"correct",P_INCORRECT:"incorrect",I_INITIAL:"initial",I_SELECTED_INDETERMINATE:"selected:indeterminate",I_SELECTED_CORRECT:"selected:correct",I_SELECTED_INCORRECT:"selected:incorrect"},o={suppressEvents:!1},a=null,s=0,c=!0;function u(e){return t.questions[e]}function l(i,a,s){s!==e.I_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE);var c=t.questions[i].itemmap[a].state;t.questions[i].itemmap[a].state=s,o.suppressEvents||c!==s&&n.notifyByID(r.DATASET_ITEM_STATE_CHANGE,t.id,{type:"match:item",dataset:t.id,question:i,item:a,oldstate:c,newstate:s})}function f(e,n,r){t.questions[e].pairs.find((function(t){return t.id===n})).state=r}function d(e){return t.questions[e].state}function p(i,a){var s=t.questions[i].state;t.questions[i].state=a,s!==a&&n.notify(r.DATASET_ITEM_STATE_CHANGE,{type:"match:question",dataset:t.id,item:i,oldstate:s,newstate:a}),a!==e.Q_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE),function(){for(var i=t.state,a=0,s=0,c=0,u=0;u<t.questions.length;u++)switch(t.questions[u].state){case e.Q_INITIAL:case e.Q_INCOMPLETE:c++;break;case e.Q_COMPLETED_CORRECT:a++;break;case e.Q_COMPLETED_INCORRECT:a++,s++}a===t.questions.length&&(t.state=0===s?e.D_COMPLETED_PASSED:e.D_COMPLETED_FAILED);c>0&&(t.state=e.D_INCOMPLETE);i!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"match",dataset:t.id,oldstate:i,newstate:t.state}))}()}function h(t,e){void 0!==o[t]&&(o[t]=e)}return{type:function(){return"match"},getID:function(){return t.id},canSaveState:function(){return!0},states:function(){return e},getState:function(){return t.state},setState:function(i){var a=t.state;if(t.state=i,a!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"match",dataset:t.id,oldstate:a,newstate:t.state}),i===e.D_COMPLETED_FAILED))for(var s=0;s<t.questions.length;s++){d(s)===e.Q_INCOMPLETE&&p(s,e.Q_COMPLETED_INCORRECT)}},getResumeData:function(){var n={s:"0",q:[]};switch(a&&(n.o=a.join(",")),t.state){case e.D_INITIAL:n.s="0";break;case e.D_INCOMPLETE:n.s="1";break;case e.D_COMPLETED_FAILED:n.s="2";break;case e.D_COMPLETED_PASSED:n.s="3";break;case e.D_COMPLETED_NEUTRAL:n.s="4";break;default:n.s="0"}for(var r=0;r<t.questions.length;r++){var i={s:"0",i:{},p:{}};switch(t.questions[r].state){case e.Q_INITIAL:i.s="0";break;case e.Q_INCOMPLETE:i.s="1";break;case e.Q_COMPLETED_INCORRECT:i.s="2";break;case e.Q_COMPLETED_CORRECT:i.s="3";break;case e.Q_COMPLETED_NEUTRAL:i.s="4";break;default:i.s="0"}for(var o=0;o<t.questions[r].pairs.length;o++){var s={s:"0"};switch(t.questions[r].pairs[o].state){case e.P_INITIAL:s.s="0";break;case e.P_CORRECT:s.s="1";break;case e.P_INCORRECT:s.s="2";break;default:s.s="0"}i.p[t.questions[r].pairs[o].id]=s}for(var c=Object.values(t.questions[r].itemmap),u=0;u<c.length;u++){var l={s:"0"};switch(c[u].response&&(l.r=c[u].response),c[u].state){case e.I_INITIAL:l.s="0";break;case e.I_SELECTED_INDETERMINATE:l.s="1";break;case e.I_SELECTED_CORRECT:l.s="2";break;case e.I_SELECTED_INCORRECT:l.s="3";break;default:l.s="0"}i.i[c[u].uid]=l}n.q.push(i)}return n=JSON.stringify(n)},setResumeData:function(n){h("suppressEvents",!0);var r=JSON.parse(n);switch(r.o&&(a=(r.o||"").split(",").filter((function(t){return!!t})).map((function(t){return parseInt(t,10)})),c=!0),r.s){case"0":t.state=e.D_INITIAL;break;case"1":t.state=e.D_INCOMPLETE;break;case"2":t.state=e.D_COMPLETED_FAILED;break;case"3":t.state=e.D_COMPLETED_PASSED;break;case"4":t.state=e.D_COMPLETED_NEUTRAL;break;default:t.state=e.D_INITIAL}for(var i=0;i<r.q.length;i++){switch(r.q[i].s){case"0":t.questions[i].state=e.Q_INITIAL;break;case"1":t.questions[i].state=e.Q_INCOMPLETE;break;case"2":t.questions[i].state=e.Q_COMPLETED_INCORRECT;break;case"3":t.questions[i].state=e.Q_COMPLETED_CORRECT;break;case"4":t.questions[i].state=e.Q_COMPLETED_NEUTRAL;break;default:t.questions[i].state=e.Q_INITIAL}Object.entries(r.q[i].p).forEach((function(n){var r=nm(n,2),o=r[0],a=r[1],s=t.questions[i].pairs.find((function(t){return t.id===o}));if(s)switch(a.s){case"0":s.state=e.P_INITIAL;break;case"1":s.state=e.P_CORRECT;break;case"2":s.state=e.P_INCORRECT;break;default:s.state=e.P_INITIAL}})),Object.entries(r.q[i].i).forEach((function(n){var r=nm(n,2),o=r[0],a=r[1],s=t.questions[i].itemmap[o];if(s)switch(a.r&&(s.response=a.r),a.s){case"0":s.state=e.I_INITIAL;break;case"1":s.state=e.I_SELECTED_INDETERMINATE;break;case"2":s.state=e.I_SELECTED_CORRECT;break;case"3":s.state=e.I_SELECTED_INCORRECT;break;default:s.state=e.I_INITIAL}}))}h("suppressEvents",!1)},getReport:function(e,n){n=n||{};for(var r=u(e=e||0),i={uid:n.uid||t.uid,type:n.type||"match",percent:void 0!==n.percent?n.percent:100,weight:n.weight||1,result:n.result||"neutral",response:[],time:n.time||"00:00:00.00",latency:n.latency||"00:00:00.00",name:r.text,description:r.text,correctResponsesPattern:[],source:[],target:[]},o=function(t){var e=r.group_a.items[t],n=r.group_b.items.find((function(t){return t.pairid===e.pairid}));e&&n&&i.correctResponsesPattern.push([e.uid,n.uid].join("[.]"));var o=r.group_b.items.find((function(t){return t.uid===e.response}));o&&i.response.push([e.uid,o.uid].join("[.]")),i.source.push({id:e.uid,description:{"en-US":e.text}})},a=0;a<r.group_a.items.length;a++)o(a);for(var s=0;s<r.group_b.items.length;s++){var c=r.group_b.items[s];i.target.push({id:c.uid,description:{"en-US":c.text}})}return i.response=i.response.join("[,]"),i.correctResponsesPattern=[i.correctResponsesPattern.join("[,]")],i},reset:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",a=t.state,s=[];t.questions.forEach((function(t,n){if("all"===i||"scored"===i||"failedscored"===i&&!t.state.includes(":correct")&&!t.state.includes(":neutral"))for(var r in t.state=e.Q_INITIAL,s.push(n),t.pairs.forEach((function(t){t.state=e.P_INITIAL})),t.itemmap)t.itemmap[r].state=e.I_INITIAL,t.itemmap[r].response=null})),t.state=e.D_INITIAL,o.suppressEvents||n.notifyByID(r.DATASET_RESET,t.id,{type:"match",dataset:t.id,oldstate:a,newstate:t.state,resetitems:s})},getMode:function(){return t.mode},getNextPoolQuestion:function(){return a?c||s++:(c=!0,s=0,a=function(){var e=Array.from({length:t.questions.length}).map((function(t,e){return e}));t.modeSettings.shuffle&&(e=i.array.shuffle(e));var n=nm(e.reduce((function(e,n){return t.questions[n].mandatory?e[0].push(n):e[1].push(n),e}),[[],[]]),2),r=n[0],o=n[1];return r.concat(o)}()),void 0===a[s]?(console.error(new Error("Attempted to get next pool question but no more questions are available.")),null):(c=!1,a[s])},getFlag:function(t){return o[t]},setFlag:h,getNumQuestions:function(){return t.questions.length},getQuestionData:u,getNumPairs:function(e){return t.questions[e].pairs.length},getItems:function(e){return Object.values(t.questions[e].itemmap)},getItemData:function(e,n){return t.questions[e].itemmap[n]},setItemState:l,getPairState:function(e,n){return t.questions[e].pairs.find((function(t){return t.id===n})).state},setPairState:f,clearItemMatch:function(n,r,i){t.questions[n].itemmap[r].response=null,t.questions[n].itemmap[i].response=null,f(n,t.questions[n].itemmap[r].pairid,e.P_INITIAL)},getItemMatch:function(e,n){var r=t.questions[e].itemmap[n];if(r.response){var i=t.questions[e].itemmap[r.response],o=0===r.index?r:i,a=1===r.index?r:i;return{match:[o.uid,a.uid],pairid:o.pairid,correct:o.pairid===a.pairid}}return null},setItemMatch:function(n,r,i){t.questions[n].itemmap[r].response=i,t.questions[n].itemmap[i].response=r,t.questions[n].itemmap[r].pairid===t.questions[n].itemmap[i].pairid?f(n,t.questions[n].itemmap[r].pairid,e.P_CORRECT):f(n,t.questions[n].itemmap[r].pairid,e.P_INCORRECT)},clearResponses:function(n){t.questions[n].pairs.forEach((function(t){f(n,t.id,e.P_INITIAL)})),Object.values(t.questions[n].itemmap).map((function(t){t.response=null,l(n,t.uid,e.I_INITIAL)}))},getQuestionState:d,setQuestionState:p}}return{name:"dataset_match",version:1,immediate:!0,init:function(){e.registerDatasetParser("match",o,a)}}}}),Object.freeze({__proto__:null,name:"dataset_seq",module:function(t){var e=t.core,n=t.observer,r=t.events,i=t.utils;function o(t){var e={};t=$(t),e.id=t.attr("uid"),e.mode=t.attr("mode")||"default",e.state="initial",e.questions=[],e.multiSelect=!1;for(var n=t.find("> question"),r=0;r<n.length;r++){n[r]=$(n[r]);for(var o=n[r].find("answers > answer"),a={uid:n[r].attr("uid"),index:r,text:n[r].find("> text").text(),type:n[r].attr("type")||"auto",mandatory:"true"===n[r].attr("mandatory"),state:"initial",answers:[]},s=0;s<o.length;s++)o[s]=$(o[s]),a.answers.push({uid:o[s].attr("uid"),index:s,order:s,text:o[s].find("> text").text(),response:"",state:"initial"});e.questions.push(a)}var c=t.find("> settings")[0];return e.modeSettings=i.getNodeAttributesAsObject(c,!0),e}function a(t){var e={D_INITIAL:"initial",D_INCOMPLETE:"incomplete",D_COMPLETED_PASSED:"completed:passed",D_COMPLETED_FAILED:"completed:failed",D_COMPLETED_NEUTRAL:"completed:neutral",Q_INITIAL:"initial",Q_INCOMPLETE:"incomplete",Q_COMPLETED_CORRECT:"completed:correct",Q_COMPLETED_INCORRECT:"completed:incorrect",Q_COMPLETED_NEUTRAL:"completed:neutral",A_INITIAL:"initial",A_CORRECT:"correct",A_INCORRECT:"incorrect"},o={suppressEvents:!1},a=null,s=0,c=!0,u="abcdefghijklmnopqrstuvwxyz";function l(e){return t.questions[e]}function f(i,a,s){s!==e.A_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE);var c=t.questions[i].answers[a].state;t.questions[i].answers[a].state=s,o.suppressEvents||c!==s&&n.notifyByID(r.DATASET_ITEM_STATE_CHANGE,t.id,{type:"seq:answer",dataset:t.id,question:i,answer:a,oldstate:c,newstate:s}),function(i){for(var a=t.questions[i],s=0,c=0,u=0;u<a.answers.length;u++)a.answers[u].state===e.A_CORRECT?s++:a.answers[u].state===e.A_INCORRECT&&c++;var l=a.state,f=e.Q_INITIAL;f=s===a.answers.length?e.Q_COMPLETED_CORRECT:e.Q_COMPLETED_INCORRECT;a.state=f,o.suppressEvents||l===f||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"seq:question",dataset:t.id,question:a,oldstate:l,newstate:f,numcorrect:s,numincorrect:c})}(i)}function d(e){return t.questions[e].state}function p(i,o){var a=t.questions[i].state;t.questions[i].state=o,a!==o&&n.notify(r.DATASET_ITEM_STATE_CHANGE,{type:"seq:question",dataset:t.id,item:i,oldstate:a,newstate:o}),o!==e.Q_INITIAL&&t.state===e.D_INITIAL&&(t.state=e.D_INCOMPLETE)}function h(n,r,i){i=""!==i&&"string"==typeof i?parseInt(i,10):i,t.questions[n].answers[r].response=i,f(n,r,i===r?e.A_CORRECT:e.A_INCORRECT)}function g(e){var n=t.questions[e].answers.map((function(t){return t.response}));return n.filter((function(t){return!!t})).length?n:null}function v(t,e){e.forEach((function(e,n){h(t,n,e)}))}function m(t,e){void 0!==o[t]&&(o[t]=e)}return{type:function(){return"seq"},getID:function(){return t.id},canSaveState:function(){return!0},states:function(){return e},getState:function(){return t.state},setState:function(i){var a=t.state;if(t.state=i,a!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"seq",dataset:t.id,oldstate:a,newstate:t.state}),i===e.D_COMPLETED_FAILED))for(var s=0;s<t.questions.length;s++){d(s)===e.Q_INCOMPLETE&&p(s,e.Q_COMPLETED_INCORRECT)}},calculateCompletion:function(){for(var i=t.state,a=0,s=0,c=0,u=0;u<t.questions.length;u++)switch(t.questions[u].state){case e.Q_INITIAL:case e.Q_INCOMPLETE:c++;break;case e.Q_COMPLETED_CORRECT:a++;break;case e.Q_COMPLETED_INCORRECT:a++,s++}a===t.questions.length&&(t.state=0===s?e.D_COMPLETED_PASSED:e.D_COMPLETED_FAILED),c>0&&(t.state=e.D_INCOMPLETE),i!==t.state&&(o.suppressEvents||n.notifyByID(r.DATASET_STATE_CHANGE,t.id,{type:"seq",dataset:t.id,oldstate:i,newstate:t.state}))},getResumeData:function(){var n={s:"0",q:[]};switch(a&&(n.o=a.join(",")),t.state){case e.D_INITIAL:n.s="0";break;case e.D_INCOMPLETE:n.s="1";break;case e.D_COMPLETED_FAILED:n.s="2";break;case e.D_COMPLETED_PASSED:n.s="3";break;case e.D_COMPLETED_NEUTRAL:n.s="4";break;default:n.s="0"}for(var r=0;r<t.questions.length;r++){var i,o={s:"0",r:(null===(i=g(r))||void 0===i?void 0:i.join(","))||"",a:[]};switch(t.questions[r].state){case e.Q_INITIAL:o.s="0";break;case e.Q_INCOMPLETE:o.s="1";break;case e.Q_COMPLETED_INCORRECT:o.s="2";break;case e.Q_COMPLETED_CORRECT:o.s="3";break;case e.Q_COMPLETED_NEUTRAL:o.s="4";break;default:o.s="0"}for(var s=0;s<t.questions[r].answers.length;s++){var c={s:"0"};switch(t.questions[r].answers[s].state){case e.A_INITIAL:c.s="0";break;case e.A_INCORRECT:c.s="1";break;case e.A_CORRECT:c.s="2";break;default:c.s="0"}o.a.push(c)}n.q.push(o)}return n=(n=(n=(n=(n=(n=JSON.stringify(n)).split('"').join("'")).split("'},{'s':'").join("[~]")).split("':[{'s':'").join("[|]")).split("{'q':[{'").join("[@]")).split("}]}]}").join("[^]")},setResumeData:function(n){m("suppressEvents",!0),n=(n=(n=(n=(n=n.split("[^]").join("}]}]}")).split("[@]").join("{'q':[{'")).split("[|]").join("':[{'s':'")).split("[~]").join("'},{'s':'")).split("'").join('"');var r=JSON.parse(n);switch(r.o&&(a=(r.o||"").split(",").filter((function(t){return!!t})).map((function(t){return parseInt(t,10)})),c=!0),r.s){case"0":t.state=e.D_INITIAL;break;case"1":t.state=e.D_INCOMPLETE;break;case"2":t.state=e.D_COMPLETED_FAILED;break;case"3":t.state=e.D_COMPLETED_PASSED;break;case"4":t.state=e.D_COMPLETED_NEUTRAL;break;default:t.state=e.D_INITIAL}for(var i=0;i<r.q.length;i++){switch(r.q[i].r&&v(i,r.q[i].r.split(",")),r.q[i].s){case"0":t.questions[i].state=e.Q_INITIAL;break;case"1":t.questions[i].state=e.Q_INCOMPLETE;break;case"2":t.questions[i].state=e.Q_COMPLETED_INCORRECT;break;case"3":t.questions[i].state=e.Q_COMPLETED_CORRECT;break;case"4":t.questions[i].state=e.Q_COMPLETED_NEUTRAL;break;default:t.questions[i].state=e.Q_INITIAL}for(var o=0;o<r.q[i].a.length;o++)switch(r.q[i].a[o].s){case"0":t.questions[i].answers[o].state=e.A_INITIAL;break;case"1":t.questions[i].answers[o].state=e.A_INCORRECT;break;case"2":t.questions[i].answers[o].state=e.A_CORRECT;break;default:t.questions[i].answers[o].state=e.A_INITIAL}}m("suppressEvents",!1)},getReport:function(e,n){n=n||{};for(var r=l(e=e||0),i={uid:n.uid||t.uid,type:n.type||"sequencing",percent:void 0!==n.percent?n.percent:100,weight:n.weight||1,result:n.result||"neutral",response:[],time:n.time||"00:00:00.00",latency:n.latency||"00:00:00.00",name:r.text,description:r.text,correctResponsesPattern:[],choices:[]},o=0;o<r.answers.length;o++){var a=u.charAt(o).toLowerCase(),s=r.answers[o].text;i.correctResponsesPattern.push(a);var c=r.answers.findIndex((function(t,e){return e===r.answers[o].response}));i.response.push(u.charAt(c).toLowerCase()),i.choices.push({id:a,description:{"en-US":s}})}return i.response=i.response.join("[,]"),i.correctResponsesPattern=[i.correctResponsesPattern.join("[,]")],i},getNumQuestions:function(){return t.questions.length},getQuestionData:l,getQuestionState:d,setQuestionState:p,getItemByUid:function(e,n){return t.questions[e].answers.findIndex((function(t){return t.uid===n}))},clearSelection:function(n){return function(n,r){for(var i=0;i<t.questions[n].answers.length;i++)r?t.questions[n].answers[i].state=e.A_INITIAL:f(n,i,e.D_INITIAL)}(n,!1)},getAnswerState:function(e,n){return t.questions[e].answers[n].state},setAnswerState:f,getSelection:function(e){for(var n=[],r=0;r<t.questions[e].answers.length;r++)t.questions[e].answers[r].state.indexOf("selected:")>-1&&n.push(r);return n},getQuestionResponse:g,setQuestionResponse:v,getItemResponse:function(e,n){return t.questions[e].answers[n].response||""},setItemResponse:h,getMode:function(){return t.mode},getNextPoolQuestion:function(){return a?c||s++:(c=!0,s=0,a=function(){var e=Array.from({length:t.questions.length}).map((function(t,e){return e}));t.modeSettings.shuffle&&(e=i.array.shuffle(e));var n=nm(e.reduce((function(e,n){return t.questions[n].mandatory?e[0].push(n):e[1].push(n),e}),[[],[]]),2),r=n[0],o=n[1];return r.concat(o)}()),void 0===a[s]?(console.error(new Error("Attempted to get next pool question but no more questions are available.")),null):(c=!1,a[s])},reset:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",a=t.state,s=[];t.questions.forEach((function(t,n){"all"!==i&&"scored"!==i&&("failedscored"!==i||t.state.includes(":correct")||t.state.includes(":neutral"))||(t.state=e.Q_INITIAL,s.push(n),t.answers.forEach((function(t){t.state=e.A_INITIAL,t.response=""})))})),t.state=e.D_INITIAL,o.suppressEvents||n.notifyByID(r.DATASET_RESET,t.id,{type:"seq",dataset:t.id,oldstate:a,newstate:t.state,resetitems:s})},getFlag:function(t){return o[t]},setFlag:m}}return{name:"dataset_seq",version:1,immediate:!0,init:function(){e.registerDatasetParser("seq",o,a)}}}}),Nm,jm,Object.freeze({__proto__:null,name:"dataset_sr",module:function(t){var e=t.config,n=t.core,r=t.utils,i=t.observer,o=t.events;function a(t){var r={};t=$(t),r.id=t.attr("uid"),r.state="initial",r.items=[];for(var i=t.find("item"),o=0;o<i.length;o++){i[o]=$(i[o]);var a=c(i[o].find("options")[0]);void 0===a.mandatory?a.mandatory="auto":"boolean"==typeof a.mandatory&&(a.mandatory=a.mandatory?"strict":"auto");var s={index:o,number:o+1,popup:c(i[o].find("popup")[0]),options:c(i[o].find("options")[0]),title:i[o].find("title").text(),content:i[o].find("content").text(),uid:r.id+"-"+(i[o].attr("uid")||"P"+o),thumbnail:{},mandatory:qm(e.lockout,a),enabled:a.enabled,visible:a.visible,state:"initial"},u=i[o].find("> thumbnail");if(u.length)switch(s.thumbnail.type=u.attr("type"),s.thumbnail.type){case"none":break;case"markup":s.thumbnail.content=u.find("> source:first-of-type").text();break;case"symbol":var l=u.find("> source:first-of-type").attr("id");l&&(s.thumbnail.content="<use xlink:href='#"+l+"' />");break;case"img":default:var f=u.find("> source:first-of-type").attr("src");s.thumbnail.content="<img alt='' src='"+n.getAssetPath(f,"images")+"'>"}r.items.push(s)}return r}function s(t){var e={D_INITIAL:"initial",D_INCOMPLETE:"incomplete",D_COMPLETED:"completed",I_INITIAL:"initial",I_INCOMPLETE:"incomplete",I_COMPLETED:"completed"},n={suppressEvents:!1};function r(r,a){if(t.items[r]){t.state!==e.D_COMPLETED&&(t.state=e.D_INCOMPLETE);var s=t.items[r].state;t.items[r].state=a,n.suppressEvents||s===a||i.notifyByID(o.DATASET_ITEM_STATE_CHANGE,t.id,{type:"sr",dataset:t.id,item:r,oldstate:s,newstate:a}),function(){var r=0;if(t.state!==e.D_COMPLETED)for(var a=0;a<t.items.length;a++)t.items[a].state===e.I_COMPLETED&&r++;else r=t.items.length;if(r===t.items.length){var s=t.state;s!==e.D_COMPLETED&&(t.state=e.D_COMPLETED,n.suppressEvents||i.notifyByID(o.DATASET_STATE_CHANGE,t.id,{type:"sr",dataset:t.id,oldstate:s,newstate:t.state}))}}()}}function a(t,e){void 0!==n[t]&&(n[t]=e)}return{type:function(){return"sr"},getID:function(){return t.id},canSaveState:function(){return!0},states:function(){return e},getResumeData:function(){for(var n=[],r=0;r<t.items.length;r++)switch(t.items[r].state){case e.I_INITIAL:n.push("0");break;case e.I_INCOMPLETE:n.push("1");break;case e.I_COMPLETED:n.push("2");break;default:n.push("0")}return n.join("|")},setResumeData:function(t){a("suppressEvents",!0);for(var n=t.split("|"),i=0;i<n.length;i++)switch(n[i]){case"0":r(i,e.I_INITIAL);break;case"1":r(i,e.I_INCOMPLETE);break;case"2":r(i,e.I_COMPLETED);break;default:r(i,e.I_INITIAL)}a("suppressEvents",!1)},getState:function(){return t.state},reset:function(){var r=t.state,a=[];t.items.forEach((function(t,n){t.state=e.I_INITIAL,a.push(n)})),t.state=e.D_INITIAL,n.suppressEvents||i.notifyByID(o.DATASET_RESET,t.id,{type:"sr",dataset:t.id,oldstate:r,newstate:t.state,resetitems:a})},getNumItems:function(){return t.items.length},getItemData:function(e){return t.items[e]},getItemThumbnail:function(e){return t.items[e]&&t.items[e].thumbnail.type?t.items[e].thumbnail.content:""},getItemState:function(e){return t.items[e].state},setItemState:r,canMoveOnFromItem:function(n){return t.items[n].state===e.I_COMPLETED||!t.items[n].mandatory},getFlag:function(t){return n[t]},setFlag:a}}function c(t){var e={};return t&&$.each(t.attributes,(function(t,n){e[function(t){switch(t){case"width":return"w";case"height":return"h";case"wmax":return"wMax";case"wmaxunit":return"wMaxUnit";case"wmin":return"wMin";case"wminunit":return"wMinUnit";case"hmax":return"hMax";case"hmaxunit":return"hMaxUnit";case"hmin":return"hMin";case"hminunit":return"hMinUnit";case"xproperty":return"xProperty";case"yproperty":return"yProperty";case"sxunit":return"sxUnit";case"syunit":return"syUnit";case"pxunit":return"pxUnit";case"pyunit":return"pyUnit";case"twunit":return"twUnit";case"textwidth":return"textWidth";case"centretext":return"centreText";case"transitionin":return"transitionIn";case"transitionout":return"transitionOut";case"morphanimate":return"morphAnimate";case"stopaudio":return"stopAudio";case"customclass":return"customClass";case"delaymedia":return"delayMedia";case"closeonlastpage":return"closeOnLastPage";case"overlappageanimation":return"overlapPageAnimation";case"endpageaction":return"endPageAction"}return t}(n.name)]=r.guessType(n.value)})),e}return{name:"dataset_sr",version:1,immediate:!0,init:function(){n.registerDatasetParser("sr",a,s)}}}}),Object.freeze({__proto__:null,name:"dataset_srm",module:function(t){var e=t.config,n=t.core,r=t.utils,i=t.observer,o=t.events;var a={main:function(t){var r={};t=$(t),r.id=t.attr("uid"),r.state="initial",r.items=[];for(var i=t.find("item"),o=0;o<i.length;o++){i[o]=$(i[o]);var a=d(i[o].find("options")[0]);void 0===a.mandatory?a.mandatory="auto":"boolean"==typeof a.mandatory&&(a.mandatory=a.mandatory?"strict":"auto");var s={index:o,number:o+1,uid:r.id+"-"+(i[o].attr("uid")||"P"+o),state:"initial",popup:d(i[o].find("popup")[0]),options:d(i[o].find("options")[0]),title:i[o].find("title").text(),content:i[o].find("content > page"),thumbnail:{},mandatory:zm(e.lockout,a),enabled:!1!==a.enabled,visible:!1!==a.visible},c=i[o].find("> thumbnail");if(c.length)switch(s.thumbnail.type=c.attr("type"),s.thumbnail.type){case"none":break;case"markup":s.thumbnail.content=c.find("> source:first-of-type").text();break;case"symbol":var u=c.find("> source:first-of-type").attr("id");u&&(s.thumbnail.content="<svg width='24' height='24' viewBox='0 0 24 24' focusable='false'><use xlink:href='#"+u+"' /></svg>");break;case"img":default:var l=c.find("> source:first-of-type").attr("src");(l=n.getAssetPath(l,"images"))&&(s.thumbnail.content="<img alt='' src='"+l+"'>")}r.items.push(s)}return r},childComponents:function(t){for(var e=t.getNumItems(),n=0;n<e;n++){var r=t.getItemData(n);r&&r.content&&(r.content=s(r.content))}}};function s(t){for(var e=[],r=t.find("section"),i=0;i<r.length;i++){var o=n.parseSectionData("section",r[i]);o.children=[],r[i]=$(r[i]);for(var a=r[i].find("> *").filter((function(){return/^block\./i.test(this.nodeName)})),s=0;s<a.length;s++){var f=a[s].nodeName.split(".")[1],d=n.parseBlockData(f,a[s]);d.type=f||"grid",a[s]=$(a[s]);for(var p=a[s].find("> *").filter((function(){return/^cmp\./i.test(this.nodeName)})),h=0;h<p.length;h++){var g=p[h].nodeName.split(".")[1],v=n.parseComponentData(g,p[h]);v&&(v.type=g,l(v),u(v),c(v))}o.children.push(d)}e.push(o)}return e}function c(t){if(t.hasDeclaration&&n.addDeclaration(t.uid),t.children&&t.children.length)for(var e=0;e<t.children.length;e++)c(t.children[e])}function u(t){if(t.objectives&&t.objectives.length){for(var e=t.objectives.length-1;e>=0;e--){var r=(""+t.objectives[e].objective).split(",");if(r.length>1){for(var i=0;i<r.length;i++)t.objectives.push({objective:r[i]});t.objectives.splice(e,1)}}for(var o=0;o<t.objectives.length;o++)for(var a=(""+t.objectives[o].objective).split(","),s=0;s<a.length;s++)n.objectiveManager.addObjectiveContributor(a[s],t)}if(t.children&&t.children.length)for(var c=0;c<t.children.length;c++)u(t.children[c])}function l(t){if(t.savesquizresults){var e=t.settings&&(t.settings.scored||!1),r=t.settings&&t.settings.weight&&parseFloat(t.settings.weight)||1;if(void 0!==t.numscorableobjects)for(var i=0;i<t.numscorableobjects;i++)n.resultManager.createResultSlot(t.dataset+"-"+i,e,t.settings.quizid,r,t.dataset);else n.resultManager.createResultSlot(t.dataset,e,t.settings.quizid,r,t.dataset)}t.children&&t.children.length&&t.children.forEach((function(t){return l(t)}))}function f(t){var e={D_INITIAL:"initial",D_INCOMPLETE:"incomplete",D_COMPLETED:"completed",I_INITIAL:"initial",I_INCOMPLETE:"incomplete",I_COMPLETED:"completed"},n={suppressEvents:!1};function r(r,a){if(t.items[r]){a!==e.I_INITIAL&&(t.state=e.D_INCOMPLETE);var s=t.items[r].state;t.items[r].state=a,n.suppressEvents||i.notifyByID(o.DATASET_ITEM_STATE_CHANGE,t.id,{type:"srm",dataset:t.id,item:r,oldstate:s,newstate:a}),t.state!==e.D_COMPLETED&&(t.state=e.D_INCOMPLETE),function(){var r=0;if(t.state!==e.D_COMPLETED)for(var a=0;a<t.items.length;a++)t.items[a].state===e.I_COMPLETED&&r++;else r=t.items.length;if(r===t.items.length){var s=t.state;s!==e.D_COMPLETED&&(t.state=e.D_COMPLETED,n.suppressEvents||i.notifyByID(o.DATASET_STATE_CHANGE,t.id,{type:"sr",dataset:t.id,oldstate:s,newstate:t.state}))}}()}}function a(t,e){void 0!==n[t]&&(n[t]=e)}return{type:function(){return"srm"},getID:function(){return t.id},canSaveState:function(){return!0},states:function(){return e},getResumeData:function(){for(var n=[],r=0;r<t.items.length;r++)switch(t.items[r].state){case e.I_INITIAL:n.push("0");break;case e.I_INCOMPLETE:n.push("1");break;case e.I_COMPLETED:n.push("2");break;default:n.push("0")}return n.join("|")},setResumeData:function(t){a("suppressEvents",!0);for(var n=t.split("|"),i=0;i<n.length;i++)switch(n[i]){case"0":r(i,e.I_INITIAL);break;case"1":r(i,e.I_INCOMPLETE);break;case"2":r(i,e.I_COMPLETED);break;default:r(i,e.I_INITIAL)}a("suppressEvents",!1)},getState:function(){return t.state},reset:function(){var r=t.state,a=[];t.items.forEach((function(t,n){t.state=e.I_INITIAL,a.push(n)})),t.state=e.D_INITIAL,n.suppressEvents||i.notifyByID(o.DATASET_RESET,t.id,{type:"sr",dataset:t.id,oldstate:r,newstate:t.state,resetitems:a})},getNumItems:function(){return t.items.length},getItemData:function(e){return t.items[e]},getItemThumbnail:function(e){return t.items[e]&&t.items[e].thumbnail.type?t.items[e].thumbnail.content:""},getItemState:function(e){return t.items[e].state},setItemState:r,canMoveOnFromItem:function(n){return t.items[n].state===e.I_COMPLETED||!t.items[n].mandatory},getFlag:function(t){return n[t]},setFlag:a}}function d(t){var e={};return t&&$.each(t.attributes,(function(t,n){e[function(t){switch(t){case"width":return"w";case"height":return"h";case"wmax":return"wMax";case"wmaxunit":return"wMaxUnit";case"wmin":return"wMin";case"wminunit":return"wMinUnit";case"hmax":return"hMax";case"hmaxunit":return"hMaxUnit";case"hmin":return"hMin";case"hminunit":return"hMinUnit";case"xproperty":return"xProperty";case"yproperty":return"yProperty";case"sxunit":return"sxUnit";case"syunit":return"syUnit";case"pxunit":return"pxUnit";case"pyunit":return"pyUnit";case"twunit":return"twUnit";case"textwidth":return"textWidth";case"centretext":return"centreText";case"transitionin":return"transitionIn";case"transitionout":return"transitionOut";case"morphanimate":return"morphAnimate";case"stopaudio":return"stopAudio";case"customclass":return"customClass";case"delaymedia":return"delayMedia";case"closeonlastpage":return"closeOnLastPage";case"overlappageanimation":return"overlapPageAnimation";case"endpageaction":return"endPageAction";case"speedin":return"speedin";case"speedout":return"speedout"}return t}(n.name)]=r.guessType(n.value)})),e}return{name:"dataset_srm",version:1,immediate:!0,init:function(){n.registerDatasetParser("srm",a,f)}}}})],Fm=function(){function t(e){$v(this,t),this.shell=e.shell,this.uid=e.id,this.$$=this.getComponentElement,this.getData(e.data)}return Hv(t,[{key:"getData",value:function(t){var e=$(t.xml);this._html=t.html,this._group=0,this._title=e.find("heading").text(),this._content=e.find("content").text(),this._resources=e.find("media > resources > resource")}},{key:"load",value:function(t,e){setImmediate((function(){return e()}))}},{key:"unload",value:function(t){setImmediate((function(){return t()}))}},{key:"getTemplateProperty",value:function(t){return this[t]}},{key:"applySuspendData",value:function(){}},{key:"getComponentElement",value:function(t){return $("#cmp".concat(this.uid," ").concat(t))}},{key:"setComponentText",value:function(t,e){this.shell.core.setText(this.$$(t),e)}},{key:"loadComponentMedia",value:function(t,e){e()}},{key:"setTabIndeces",value:function(){this.$$(".title").attr("tabindex","-1")}},{key:"canMoveOnFromPage",value:function(){return!0}}]),t}(),Um=function(t){Yv(n,t);var e=tm(n);function n(t){var r;return $v(this,n),Gv(Xv(r=e.call(this,t)),"template",null),r}return Hv(n,[{key:"load",value:function(t,e){var n=this;if(!this.template){var r=Handlebars.compile(this._html.trim());this.template=r({uid:this.uid})}$(t).append(this.template),this.$$(".title").append(this.shell.core.replaceVariableKeywords(this._title,this.uid)),this.setComponentText(".body",this._content);var i=this.$$(".begin");this.shell.core.translateElement(i[0]),this.shell.config.themeconfig.logo?this.$$(".logo").attr("src",this.shell.core.getAssetPath(this.shell.config.themeconfig.logo,"images")):this.$$(".logo").remove(),this.shell.config.themeconfig.banner&&this.$$(".introbanner").css("background-image","url("+this.shell.core.getAssetPath(this.shell.config.themeconfig.banner,"images")+")"),i.on("click",(function(t){t.preventDefault(),n.shell.core.setStepComplete(0,!0),n.shell.core.gotoStep(1,!0)})),this.$$(".intro_close").on("click",(function(t){t.preventDefault(),n.shell.core.close()})),this.setTabIndeces(),setTimeout((function(){return e()}),1)}},{key:"focus",value:function(){return!0}}]),n}(Fm),$m="hero",Vm=function(t){Yv(n,t);var e=tm(n);function n(t,r){var i,o,a;return $v(this,n),Gv(Xv(a=e.call(this,t,r)),"type",$m),Gv(Xv(a),"version",1),Gv(Xv(a),"interactive",!0),Gv(Xv(a),"initialise",(function(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];(t=em((i=Xv(a),Kv(n.prototype)),"initialise",i)).call.apply(t,[i].concat(r));var s=a.initChildren();return s&&(a.children=s.children,a.childrenMap=s.childrenMap,a.complete=!s.interactiveChildren),a.container})),Gv(Xv(a),"load",(function(){if(a.loaded)a.redisplay();else{a.activate(),a.setupProperties();var t=a.data;a.renderTemplate({children:t.children}),a.loadChildren(),a.loaded=!0,a.checkComplete(!1),a.observer.add(a.events.COMPONENT_COMPLETE,a.onComponentComplete,{id:t.uid});var e=t.backgroundimage||t.background;e?"string"==typeof e&&e.startsWith("url:")&&a.container.addClass("image-background"):a.container.addClass("no-background"),a.container.find(".hero-begin").on("click",(function(){a.utils.scrollToElement("[data-uid='"+t.target+"']",{speed:1,offset:0})})),a.setupViewController()}})),Gv(Xv(a),"onComponentComplete",(function(t){void 0!==a.childrenMap[t.component]&&a.checkComplete(!0)})),Gv(Xv(a),"unload",(function(){em((o=Xv(a),Kv(n.prototype)),"unload",o).call(o),a.observer.removeByID(a.events.COMPONENT_COMPLETE,a.data.uid)})),Gv(Xv(a),"redisplay",(function(){a.loaded=!1,a.unload(),a.container.empty(),a.load()})),Gv(Xv(a),"checkComplete",(function(t){for(var e=!0,n=0;n<a.children.length;n++)if(a.children[n].component.isInteractive()&&!a.children[n].component.canMoveOn()){e=!1;break}return e?(a.complete!==e||t)&&(a.complete=e,a.observer.notify(a.events.COMPONENT_COMPLETE,a.getEventData())):a.complete=!1,a.complete&&a.core.objectiveManager.updateObjectiveContributors(a.data.uid,a.data.objectives,"passed"),a.complete})),a.complete=!1,a.cmpcontainer="<div class='cmp_componentwrapper'></div>",a.loaded=!1,a}return n}(km),Hm=Object.freeze({__proto__:null,type:$m,component:Vm}),Gm="heading",Qm=function(t){Yv(n,t);var e=tm(n);function n(){var t;$v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gv(Xv(t=e.call.apply(e,[this].concat(i))),"type",Gm),Gv(Xv(t),"load",(function(){t.loaded&&(t.loaded=!1,t.container.empty()),t.activate(),t.setupProperties();var e=t.data,n="h1";e.level&&(n="h".concat(Math.min(parseInt(e.level,10),6))),t.core.setText(t.container,"<".concat(n,">").concat(e.textcontent,"</").concat(n,">"),{dynamicvariables:t.parentdata.variables}),t.container.attr("tabindex",-1),t.setupViewController(),t.loaded=!0})),t}return n}(Im),Wm=Object.freeze({__proto__:null,type:Gm,component:Qm}),Ym="stack",Km=function(t){Yv(n,t);var e=tm(n);function n(){var t,r,i,o;$v(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return Gv(Xv(o=e.call.apply(e,[this].concat(s))),"type",Ym),Gv(Xv(o),"complete",!1),Gv(Xv(o),"interactive",!0),Gv(Xv(o),"childrenContainer",null),Gv(Xv(o),"lastSpaceClass",null),Gv(Xv(o),"initialise",(function(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];(e=em((t=Xv(o),Kv(n.prototype)),"initialise",t)).call.apply(e,[t].concat(i));var s=o.initChildren();return s&&(o.children=s.children,o.childrenMap=s.childrenMap,o.complete=!s.interactiveChildren,o.interactive=s.interactiveChildren),o.container})),Gv(Xv(o),"load",(function(){if(o.loaded)o.redisplay();else{o.activate(),o.setupProperties();var t=o.data,e=[];t.wrap&&e.push("wrap"),t.reversed&&e.push("reversed"),t.fill&&e.push("fill"),t.stretch&&e.push("stretch"),t.justifyitems&&e.push("justify-".concat(t.justifyitems)),t.alignitems&&e.push("align-".concat(t.alignitems)),"h"===t.direction?e.push("direction-h"):e.push("direction-v"),o.renderTemplate({children:t.children,dividers:!0===t.dividers}),o.childrenContainer=o.container.find("> .cmp_stack-children"),o.childrenContainer.addClass(e.join(" "));var n=o.childrenContainer.find("> .cmp_stack-child-wrapper");Array.from(n).forEach((function(e,n){t.children[n]&&($(e).css({"min-width":t.children[n].minwidth||void 0,"max-width":t.children[n].maxwidth||void 0,"min-height":t.children[n].minheight||void 0,"max-height":t.children[n].maxheight||void 0}),delete t.children[n].minwidth,delete t.children[n].maxwidth,delete t.children[n].minheight,delete t.children[n].maxheight)})),o.loadChildren(),o.applySpaceStyles(t.space),o.loaded=!0,o.checkComplete(!1),o.observer.add(o.events.COMPONENT_COMPLETE,(function(t){return o.onComponentComplete(t)}),{id:t.uid}),o.setupViewController()}})),Gv(Xv(o),"applySettings",(function(t){em((r=Xv(o),Kv(n.prototype)),"applySettings",r).call(r,t),t.space&&o.applySpaceStyles(t.space),t.direction&&(o.childrenContainer.removeClass("direction-h direction-v"),"h"===t.direction?o.childrenContainer.addClass("direction-h"):o.childrenContainer.addClass("direction-v"))})),Gv(Xv(o),"applySpaceStyles",(function(t){var e=o.data;if(isNaN(parseFloat(t))){var n="space-".concat(t);if(o.lastSpaceClass===n)return;o.lastSpaceClass&&o.lastSpaceClass!==n&&o.childrenContainer.removeClass(o.lastSpaceClass),o.childrenContainer.addClass(n),o.lastSpaceClass=n}else if($(document).hasClass("flexbox-gap"))o.childrenContainer.css({gap:t});else{var r={"margin-left":"calc(-1 * ".concat(t,")"),"margin-top":"calc(-1 * ".concat(t,")")};"h"===e.direction&&(e.fill||e.stretch)&&(r.width="calc(100% + ".concat(t,")")),o.childrenContainer.css(r),o.childrenContainer.find("> *:not(.cmp_stack-spacer)").css({"padding-top":t,"padding-left":t})}})),Gv(Xv(o),"onComponentComplete",(function(t){void 0!==o.childrenMap[t.component]&&o.checkComplete(!0)})),Gv(Xv(o),"unload",(function(){em((i=Xv(o),Kv(n.prototype)),"unload",i).call(i),o.lastSpaceClass=null,o.observer.removeByID(o.events.COMPONENT_COMPLETE,o.data.uid)})),Gv(Xv(o),"redisplay",(function(){o.loaded=!1,o.unload(),o.container.empty(),o.load()})),Gv(Xv(o),"checkComplete",(function(t){for(var e=!0,n=0;n<o.children.length;n++)if(o.children[n].component.isInteractive()&&!o.children[n].component.canMoveOn()){e=!1;break}return e?(o.complete!==e||t)&&(o.complete=e,o.observer.notify(o.events.COMPONENT_COMPLETE,o.getEventData())):o.complete=!1,o.complete&&o.core.objectiveManager.updateObjectiveContributors(o.data.uid,o.data.objectives,"passed"),o.complete})),Gv(Xv(o),"reset",(function(){o.complete=!1;for(var t=0;t<o.children.length;t++)"function"==typeof o.children[t].component.reset&&o.children[t].component.reset();o.container.removeClass("completed")})),Gv(Xv(o),"getResumeData",(function(){if(!o.loaded&&o.resumedata)return o.resumedata;for(var t={c:o.complete?1:0},e=0;e<o.children.length;e++){var n=o.children[e].component.getResumeData();n&&(t._||(t._={}),t._[o.children[e].component.getUID()]=n)}return t})),Gv(Xv(o),"setResumeData",(function(t){o.resumedata=t,o.resumedata.c&&(o.complete=1===o.resumedata.c)})),o}return n}(km);var Zm=Object.freeze({__proto__:null,type:Ym,component:Km,parser:function(t){return this.parseXML(t,(function(t){void 0===t.space&&(t.space="none"),void 0===t.direction&&(t.direction="v"),"h"!==t.direction&&void 0===t.alignitems&&(t.alignitems="stretch")}))}}),Xm="text",Jm=function(t){Yv(n,t);var e=tm(n);function n(){var t;$v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gv(Xv(t=e.call.apply(e,[this].concat(i))),"type",Xm),Gv(Xv(t),"load",(function(){t.loaded&&(t.loaded=!1,t.container.empty()),t.activate(),t.setupProperties(),t.core.setText(t.container,t.data.textcontent,{dynamicvariables:t.parentdata.variables}),t.setupViewController(),t.loaded=!0})),t}return n}(Im),ty=Object.freeze({__proto__:null,type:Xm,component:Jm});function ey(t){for(var e=t.length,n=0,r=0;r<t.length&&t[r].canMoveOn();r++)n++;return{numComplete:n,total:e,isComplete:n>=e}}var ny=function(t){Yv(n,t);var e=tm(n);function n(){var t;$v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gv(Xv(t=e.call.apply(e,[this].concat(i))),"dataset",null),Gv(Xv(t),"states",null),Gv(Xv(t),"hasListeners",!1),Gv(Xv(t),"interactive",!0),Gv(Xv(t),"notifiedComplete",!1),Gv(Xv(t),"isRichContent",!1),Gv(Xv(t),"isRenderedIntoPage",!1),Gv(Xv(t),"componentResumedata",{}),Gv(Xv(t),"componentCache",{}),Gv(Xv(t),"cacheIndex",[]),t}return Hv(n,[{key:"initialise",value:function(t,e){return em(Kv(n.prototype),"initialise",this).call(this,t,e),this.dataset=this.core.getDataset(e.dataset),this.dataset&&(this.states=this.dataset.states(),this.isRichContent="srm"===this.dataset.type()),this.container}},{key:"getDataContext",value:function(){var t={};this.dataset&&(t=this.getItemsContext());var e=this.data;return{uid:e.uid,isrichcontent:this.isRichContent,dynamicvariables:this.parentdata.variables,datadisplay:e.datadisplay,template:e.template,mandatory:this.isMandatory(),progressive:e.progressive,state:t.state||this.states.D_INITIAL,items:t.context||[]}}},{key:"getItemsContext",value:function(){for(var t=this.dataset.getNumItems(),e=0,n=!1,r=[],i=0;i<t;i++){var o=this.dataset.getItemData(i);o.state===this.states.I_COMPLETED&&e++;var a=this.dataset.getItemThumbnail(i);r.push({index:i,currentItemNumber:i+1,dynamicvariables:Wv(Wv({},this.parentdata.variables),{},{currentItemNumber:i+1}),uid:o.uid,state:o.state===this.states.I_COMPLETED?"visited":"",completed:o.state===this.states.I_COMPLETED,title:o.title,content:o.content,options:o.options,thumbnail:a,hasThumbnail:!!a,mandatory:o.mandatory,enabled:o.enabled,visible:o.visible})}return e===t&&(n=!0),{context:r,state:n?this.states.D_COMPLETED:this.dataset.getState()}}},{key:"renderContentToDOM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onItemRendered,n=t.onAllRendered,r=this,i=this.data,o=this.dataset.getNumItems(),a=0;this.isRenderedIntoPage=!0;for(var s=function(t){!function(){var n=r.dataset.getItemData(t),o=t;n.content.forEach((function(t){t.parentdata=r.getChildParentData({variables:{currentItemTitle:n.title,currentItemNumber:o+1}})})),r.core.componentRenderer.render({scope:i.uid,pageid:r.config.stepData[r.config.currentStep].stepOptions.id,renderid:n.uid,domtarget:r.container.find("[data-render='"+n.uid+"']"),sectionsdata:n.content,resumedata:r.componentResumedata,done:function(t){a++,r.componentCache[n.uid]=t.loadedSections,r.cacheIndex[o]=n.uid,"function"==typeof e&&e({item:n,index:o}),u()}})}()},c=0;c<o;c++)s(c);function u(){a===o&&"function"==typeof n&&n()}}},{key:"checkItemComplete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isRenderedIntoPage)return this.dataset.canMoveOnFromItem(t);var n=this.componentCache[this.cacheIndex[t]];if(n){var r=ey(n),i=r.isComplete;return"function"==typeof e?e(i):i}}},{key:"canMoveOn",value:function(){if(this.isComplete())return!0;if(this.isMandatory()||this.isStrictlyMandatory())for(var t=this.dataset.getNumItems(),e=0;e<t;e++)if(!this.dataset.canMoveOnFromItem(e))return!1;return!0}},{key:"unload",value:function(){var t=this;this.isRichContent&&this.cacheIndex.forEach((function(e){t.componentCache[e]&&t.componentCache[e].forEach((function(t){t.unload()}))}))}},{key:"attachListeners",value:function(){var t=this,e=this.events,n=this.observer;this.detachListeners(),this.observer.add(e.DATASET_STATE_CHANGE,(function(e){e.newstate!==t.states.D_COMPLETED||t.notifiedComplete||(t.onDatasetStateChange&&t.onDatasetStateChange({component:t.data.uid}),t.observer.notify(t.events.COMPONENT_COMPLETE,t.getEventData()),t.notifiedComplete=!0)}),{id:this.data.dataset,ref:this.data.uid}),n.add(e.DATASET_ITEM_STATE_CHANGE,(function(e){e.newstate===t.states.I_COMPLETED&&"function"==typeof t.onDatasetItemStateChange&&t.onDatasetItemStateChange(e)}),{id:this.data.dataset,ref:this.data.uid})}},{key:"detachListeners",value:function(){this.observer.removeByRef(this.events.DATASET_ITEM_STATE_CHANGE,this.data.uid),this.observer.removeByRef(this.events.DATASET_STATE_CHANGE,this.data.uid)}},{key:"checkItemSatisfaction",value:function(t){var e=this;this.isRichContent?this.checkItemComplete(t,(function(n){n&&e.dataset.setItemState(t,e.states.I_COMPLETED),e.notifyCompleteIfSatisfied()})):this.dataset.setItemState(t,this.states.I_COMPLETED)}},{key:"notifyCompleteIfSatisfied",value:function(){if(!this.notifiedComplete&&this.canMoveOn()){var t=this.getEventData();t.isMoveOn=!0,this.observer.notify(this.events.COMPONENT_COMPLETE,t),this.notifiedComplete=!0}}},{key:"getComponentResumedata",value:function(){var t={};for(var e in this.componentCache)for(var n=0;n<this.componentCache[e].length;n++)for(var r=this.componentCache[e][n].getChildren(),i=0;i<r.length;i++)for(var o=r[i].getChildren(),a=0;a<o.length;a++){var s=o[a];if("getResumeData"in s){var c=s.getResumeData();c&&(t[s.getUID()]=c)}}return"{}"===(t=JSON.stringify(t))?"":t}},{key:"setComponentResumedata",value:function(t){try{this.componentResumedata=JSON.parse(t)}catch(t){this.componentResumedata=null}}}]),n}(km),ry="default",iy="popupfallback",oy="popup",ay="hotspots",sy=function(t){Yv(n,t);var e=tm(n);function n(){var t,r;$v(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Gv(Xv(r=e.call.apply(e,[this].concat(o))),"type",ay),Gv(Xv(r),"mode",ry),Gv(Xv(r),"expanded",null),Gv(Xv(r),"lastItem",void 0),Gv(Xv(r),"lastIndex",-1),Gv(Xv(r),"load",(function(){if(r.loaded)r.redisplay();else{r.activate(),r.setupProperties();var t=r.data,e=r.dataset.getNumItems();r.expanded||(r.expanded=new Array(e).fill(0));var n=r.getDataContext();if(r.renderTemplate(n),r.container.find("[cmp-popupfallback]").length?(r.mode=iy,r.container.find("[cmp-popupfallback]").removeAttr("cmp-popupfallback")):r.container.find("[cmp-usepopup]").length&&(r.mode=oy,r.container.find("[cmp-usepopup]").removeAttr("cmp-usepopup")),r.complete=n.state===r.states.D_COMPLETED,r.isRichContent&&r.mode!==oy){r.renderContentToDOM({onAllRendered:function(){}});var i=Xv(r);r.observer.add(r.events.COMPONENT_COMPLETE,(function(t){if(t.scope===i.data.uid)for(var e=i.dataset.getNumItems(),n=function(t){!function(){var e=t;i.dataset.getItemState(e)!==i.states.I_COMPLETED&&i.expanded[e]&&i.checkItemSatisfaction(e)}()},r=0;r<e;r++)n(r)}),{id:r.data.uid})}r.container.find(".cmp_hotspot-item button").attr("aria-expanded","false");var o=t.children[0];if("picture"===(null==o?void 0:o.type)&&r.core.hasComponent(o.type)){var a=r.core.createComponent(o.type);if(a){var s=$(r.container).find(".hotspots-image-wrapper");a.initialise(s,o),a.load(),s.find("img").attr("tabindex","-1")}}r.attachListeners(),$(r.container).on("click",".hotspots-image-wrapper",(function(t){r.lastItem&&(t.preventDefault(),r.hideActiveItem())}));var c=!(e>0)||"BUTTON"===$(r.container).find(".cmp_hotspot-item-icon")[0].nodeName?"click":"click keydown";$(r.container).on(c,".cmp_hotspot-item-icon",(function(t){if("keydown"!==t.type||13===t.keyCode){var e=$(t.currentTarget),n=r.lastIndex;r.lastItem&&r.hideActiveItem(),r.container.find(".cmp_hotspot-item button").attr("aria-expanded","false"),n!==e.parent().data("index")?(r.lastItem=e.parent(),r.lastIndex=r.lastItem.data("index"),r.displayItem(r.lastIndex,r.lastItem,e)):(r.lastIndex=-1,r.lastItem=void 0)}})),r.setupViewController(),r.loaded=!0}})),Gv(Xv(r),"hideActiveItem",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(r.lastItem){r.lastItem.off("keyup"),r.lastItem.removeClass("showing");var e=r.lastItem.find(".cmp_hotspot-item-content");if(e.attr("aria-hidden","true"),e.removeAttr("tabindex"),t){var n=r.lastItem.find(".cmp_hotspot-item-icon")[0];n&&n.focus()}r.lastIndex=-1,r.lastItem=void 0}})),Gv(Xv(r),"displayItem",(function(t,e,n){if(r.mode===oy||r.mode===iy&&window.innerWidth<670){var i=r.utils.determineStepNumber(r.data.pageid),o=r.dataset.getItemData(t);if(r.config.stepData[i].currentContent=o,r.isRichContent){var a={triggerElement:n,onClose:function(){r.hideActiveItem()}};r.core.runModuleFunction("srDatasetToPopup","show",["modpopup",r.data.dataset,t,a])}else r.core.runModuleFunction("popup","show",{triggerElement:n,text:o.content})}else{n.attr("aria-expanded","true"),e.addClass("showing"),r.lastItem.on("keyup",(function(t){"Escape"===t.key&&(t.stopPropagation(),r.hideActiveItem(!0))}));var s=e.find(".cmp_hotspot-item-content");s.removeAttr("aria-hidden",!0),s.attr("tabindex","0"),setTimeout((function(){s.focus()}),100)}r.expanded[t]=1,r.isRichContent?r.checkItemComplete(t,(function(e){e&&r.dataset.setItemState(t,r.states.I_COMPLETED)})):r.dataset.setItemState(t,r.states.I_COMPLETED)})),Gv(Xv(r),"onDatasetStateChange",(function(){r.complete=!0,r.core.objectiveManager.updateObjectiveContributors(r.data.uid,r.data.objectives,"passed")})),Gv(Xv(r),"onDatasetItemStateChange",(function(t){var e=$(r.container).find(".cmp_hotspot-item[data-index='"+t.item+"']");e.addClass("visited"),e.find("button").attr("aria-label",r.dataset.getItemData(t.item).title+" - "+r.core.getTranslation("visited"))})),Gv(Xv(r),"unload",(function(){em((t=Xv(r),Kv(n.prototype)),"unload",t).call(t),r.observer.removeByID(r.events.COMPONENT_COMPLETE,r.data.uid),r.detachListeners()})),Gv(Xv(r),"redisplay",(function(){r.loaded=!1,r.unload(),r.container.empty(),r.load()})),Gv(Xv(r),"getResumeData",(function(){if(!r.loaded&&r.resumedata)return r.resumedata;var t={e:r.expanded.join("")};return r.isRichContent&&(t.d=r.getComponentResumedata()),t})),Gv(Xv(r),"setResumeData",(function(t){r.resumedata=t,r.resumedata.e&&(r.expanded=r.resumedata.e.split("").map((function(t){return parseInt(t,10)}))),r.resumedata.d&&r.setComponentResumedata(r.resumedata.d)})),r}return n}(ny),cy=Object.freeze({__proto__:null,type:ay,component:sy}),uy="picture",ly=function(t){Yv(n,t);var e=tm(n);function n(){var t;$v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gv(Xv(t=e.call.apply(e,[this].concat(i))),"type",uy),Gv(Xv(t),"content",null),Gv(Xv(t),"objectfit",null),Gv(Xv(t),"load",(function(){if(t.loaded)t.redisplay();else{t.activate(),t.setupProperties();var e=t.data;e.sources||(e.sources=[]);for(var n=t.utils.sanitizeHTMLAttributeValue(e.link||""),r={multisource:e.sources.length>1,sources:[],src:e.sources.length?t.core.getAssetPath(e.sources[0].src,"images"):"",intrinsicwidth:e.iwidth||void 0,intrinsicheight:e.iheight||void 0,alt:e.alt||"",hasLink:!!n,link:n,linkTarget:e.linktarget||"_blank",hasCaption:!!e.caption,caption:e.caption},i=0;i<e.sources.length;i++)e.sources[i].media&&""!==e.sources[i].media&&r.sources.push({src:t.core.getAssetPath(e.sources[i].src,"images"),media:e.sources[i].media,hasMediaAttribute:!0,hasMediaAttribure:!0});t.renderTemplate(r);var o=!0,a=e.link?"> a":">";switch(r.multisource?t.content=$(t.container).find("".concat(a," picture")):t.content=$(t.container).find("".concat(a," img")),r.hasCaption&&($(t.container).find(".cmp_picture-caption").attr("id",e.uid+"-caption"),t.content.attr("aria-describedby",e.uid+"-caption")),e.fit){case"contain":case"cover":o=!1,t.container.css({position:"absolute",width:"100%",height:"100%",overflow:"hidden"}),void 0!==t.objectfit&&t.objectfit||$("html").hasClass("mdzrobjectfit")?(t.content.attr({width:"100%",height:"100%"}),t.objectfit=!0,t.content.css({"object-fit":e.fit})):(t.content.removeAttr("height"),t.calculateImageFit(),t.observer.add(t.events.SHELL_RESIZED,(function(){return t.calculateImageFit()}),{id:t.data.uid}));break;case"height":t.container.css("height","100%"),t.content.css("height","100%");break;case"width":default:t.content.css("width","100%")}if(o&&(e.height&&t.content.css({height:e.height}),e.maxwidth&&t.content.css({"max-width":e.maxwidth}),e.maxheight&&r.src.endsWith(".svg")&&t.content.css({"max-height":e.maxheight})),r.multisource&&"picturefill"in window)t.content[0]&&picturefill({elements:[$(t.container).find("img")[0]]});t.setupViewController(),t.loaded=!0}})),Gv(Xv(t),"calculateImageFit",(function(){setTimeout((function(){var e,n,r=window.getComputedStyle(t.container[0]),i=window.getComputedStyle(t.content[0]),o=parseInt(r.width,10)/parseInt(r.height,10),a=parseInt(i.width,10)/parseInt(i.height,10);t.getWidthFirst(t.data.fit,a,o)?(n=r.width,e=parseInt(r.width,10)*a+"px"):(e=r.height,n=parseInt(r.height,10)*a+"px"),t.content.css({width:n,height:e,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"})}),5)})),Gv(Xv(t),"getWidthFirst",(function(t,e,n){return"contain"===t?e>n:e<n})),Gv(Xv(t),"unload",(function(){"cover"!==t.data.fit&&"contain"!==t.data.fit||t.objectfit||t.observer.removeByID(t.events.SHELL_RESIZED,t.data.uid)})),Gv(Xv(t),"redisplay",(function(){t.loaded=!1,t.unload(),t.container.empty(),t.load()})),t}return n}(Im);var fy=Object.freeze({__proto__:null,type:uy,component:ly,parser:function(t,e){return this.parseXML(t,(function(t,n){if(t.sources=[],t._breakpoints)for(var r in t._breakpoints)Object.prototype.hasOwnProperty.call(t._breakpoints,r)&&t._breakpoints[r].src&&t.sources.unshift(t._breakpoints[r]);if(t.src&&t.sources.unshift({src:t.src}),!t.sources.length)for(var i=n.find("> source"),o=0;o<i.length;o++)t.sources.push(e.utils.getNodeAttributesAsObject(i[o]));t.caption||(t.caption=n.find("> caption").text())}))}}),dy="gridreveal",py=function(t){Yv(n,t);var e=tm(n);function n(){var t;$v(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Gv(Xv(t=e.call.apply(e,[this].concat(i))),"type",dy),Gv(Xv(t),"expanded",null),Gv(Xv(t),"load",(function(){if(t.loaded)t.redisplay();else{t.activate(),t.setupProperties();var e=t.data;t.expanded||(t.expanded=new Array(t.dataset.getNumItems()).fill(0));var n=t.getDataContext();if(t.renderTemplate(n),t.complete=n.state===t.states.D_COMPLETED,t.isRichContent){t.renderContentToDOM({onAllRendered:function(){var e=t.container.find('.gridreveal-item[data-component="'.concat(t.data.uid,'"] > .gridreveal-content'));Array.from(e).forEach((function(e){t.core.a11y.makeSubtreeInert(e)}))}});var r=Xv(t);t.observer.add(t.events.COMPONENT_COMPLETE,(function(t){if(t.scope===r.data.uid)for(var e=r.dataset.getNumItems(),n=function(t){!function(){var e=t;r.dataset.getItemState(e)!==r.states.I_COMPLETED&&r.expanded[e]&&r.checkItemSatisfaction(e)}()},i=0;i<e;i++)n(i)}),{id:t.data.uid}),t.container.find("[data-component='"+t.data.uid+"'] > .gridreveal-button").on("click",(function(e){return t.onClickItem(e)}))}else t.container.find(".gridreveal-button").on("click",(function(e){return t.onClickItem(e)}));e.alternate&&t.container.addClass("alternate"),t.attachListeners(),t.setupViewController();for(var i=t.container.find(t.sRichContent?".gridreveal-item[data-component='".concat(t.data.uid,"']"):".gridreveal-item"),o=0;o<i.length;o++)t.expanded[o]?t.revealItem(o):$(i[o]).find("> .gridreveal-button").attr("aria-expanded","false");t.loaded=!0}})),Gv(Xv(t),"onClickItem",(function(e){var n=parseInt($(e.currentTarget).data("index"),10);t.expanded[n]||(t.expanded[n]=1,t.checkItemSatisfaction(n)),t.revealItem(n)})),Gv(Xv(t),"onDatasetItemStateChange",(function(e){t.completeItem(e.item)})),Gv(Xv(t),"revealItem",(function(e){if(t.isRichContent){var n=t.container.find(".gridreveal-item[data-component='"+t.data.uid+"'][data-index='"+e+"']");n.addClass("revealed visited");var r=n.find("#".concat(t.data.uid,"-front-").concat(e)),i=n.find("#".concat(t.data.uid,"-back-").concat(e));r.attr({"aria-expanded":!0}),t.core.a11y.makeSubtreeActive(i[0]),i.attr("aria-hidden","false");var o=i.find("> .gridreveal-content-heading")[0];o&&setTimeout((function(){o.focus({preventScroll:!0})}),100)}else{var a=t.container.find(".gridreveal-item[data-index='"+e+"']");a.addClass("revealed visited"),a.find(".gridreveal-button").attr({tabindex:-1,disabled:!0,"aria-expanded":!0}),a.find(".gridreveal-content").attr("aria-hidden","false"),a.find(".gridreveal-content-heading").eq(0).focus()}})),Gv(Xv(t),"completeItem",(function(e){t.isRichContent?t.container.find(".gridreveal-item[data-component='"+t.data.uid+"'][data-index='"+e+"']").addClass("complete"):t.container.find(".gridreveal-item[data-index='"+e+"']").addClass("complete")})),Gv(Xv(t),"onDatasetStateChange",(function(){"completed"===t.dataset.getState()&&t.setComplete()})),Gv(Xv(t),"setComplete",(function(){t.complete||(t.complete=!0,t.core.objectiveManager.updateObjectiveContributors(t.data.uid,t.data.objectives,"passed"))})),Gv(Xv(t),"unload",(function(){t.observer.removeByID(t.events.COMPONENT_COMPLETE,t.data.uid),t.detachListeners()})),Gv(Xv(t),"redisplay",(function(){t.loaded=!1,t.unload(),t.container.empty(),t.load()})),Gv(Xv(t),"getResumeData",(function(){if(!t.loaded&&t.resumedata)return t.resumedata;var e={e:t.expanded.join("")};return t.isRichContent&&(e.d=t.getComponentResumedata()),e})),Gv(Xv(t),"setResumeData",(function(e){t.resumedata=e,t.resumedata.e&&(t.expanded=t.resumedata.e.split("").map((function(t){return parseInt(t,10)}))),t.resumedata.d&&t.setComponentResumedata(t.resumedata.d)})),t}return n}(ny);var hy=Object.freeze({__proto__:null,type:dy,component:py,parser:function(t){return this.parseXML(t,(function(t){void 0===t.alternate&&(t.alternate=!0)}))}}),gy="selected",vy="correct",my="selectedandcorrect",yy="none",by="abcdefghijklmnopqrstuvwxyz",_y="default",wy="pool",Ey="truefalse",Sy=function(t){Yv(n,t);var e=tm(n);function n(){var t,r;$v(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Gv(Xv(r=e.call.apply(e,[this].concat(o))),"type",Ey),Gv(Xv(r),"mode",_y),Gv(Xv(r),"supportedFeedback","QA"),Gv(Xv(r),"complete",!1),Gv(Xv(r),"deferComplete",!1),Gv(Xv(r),"interactive",!0),Gv(Xv(r),"dataset",null),Gv(Xv(r),"feedbackdataset",null),Gv(Xv(r),"question",null),Gv(Xv(r),"states",null),Gv(Xv(r),"submit",null),Gv(Xv(r),"submitted",!1),Gv(Xv(r),"wasReset",!1),Gv(Xv(r),"attemptCount",null),Gv(Xv(r),"time",null),Gv(Xv(r),"initialise",(function(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=em((t=Xv(r),Kv(n.prototype)),"initialise",t)).call.apply(e,[t].concat(o)),r.dataset=r.core.getDataset(r.data.dataset),r.states=r.dataset.states(),r.mode=r.dataset.getMode(),r.mode===wy?null===r.question&&(r.question=r.dataset.getNextPoolQuestion()):r.question=r.data.question||0,r.data.feedback&&(r.feedbackdataset=r.core.getDataset(r.data.feedback)),null===r.attemptCount&&(r.attemptCount=0),r.container})),Gv(Xv(r),"load",(function(){if(r.loaded)r.redisplay();else{r.activate(),r.setupProperties();var t,e=r.data;switch(r.time=Date.now(),r.mode){case wy:t=r.dataset.getQuestionState(r.question);break;case _y:default:t=r.dataset.getState()}if(r.complete=!!(t.indexOf("completed")>-1&&r.submitted),r.dataset){for(var n=r.dataset.getQuestionData(r.question),i={questionIndex:r.question,question:n.text,answerfeedback:e.settings.answerfeedback&&r.feedbackdataset,questionfeedback:e.settings.questionfeedback&&r.feedbackdataset,showanswerstatus:e.settings.showanswerstatus,numanswers:0,answers:[]},o="TF_".concat(e.uid,"-").concat(e.dataset),a=0;a<n.answers.length;a++){var s="".concat(o,"_").concat(a);i.answers.push({fieldGroup:o,datasetID:e.dataset,inputID:s,questionIndex:r.question,answerIndex:a,answerNumber:a+1,letter:by.charAt(a),answer:n.answers[a].text,inputType:"radio"})}i.numanswers=i.answers.length,r.renderTemplate(i),r.submit=$(r.container).find(".submit-button"),r.retry=$(r.container).find(".retry-button");for(var c=0;c<n.answers.length;c++)r.displayAnswerState(n,c);r.observer.add(r.events.DATASET_ITEM_STATE_CHANGE,(function(t){r.data.dataset===t.dataset&&r.question===t.question&&r.submitEnable()}),{ref:e.uid,id:e.dataset}),r.observer.add(r.events.DATASET_RESET,(function(t){t.dataset===e.dataset&&t.resetitems&&t.resetitems.indexOf(r.question)>-1&&(r.wasReset=!0,r.complete=!1,r.submitted=!1,r.updateDisplayOfAllAnswers(),r.hideFeedback(),r.submitEnable(),r.container.removeClass("completed"),r.container.addClass("component-was-reset"))}),{ref:e.uid,id:e.dataset}),$(r.container).on("change","input",(function(t){var e=$(t.currentTarget),n=e.data("q"),i=e.data("a"),o=e.prop("checked"),a=r.dataset.getQuestionData(n);r.submitted=!1,e.parents("li").removeClass("answer-correct answer-incorrect answer-neutral");var s=r.states.A_INITIAL;o&&(s=a.answers[i].correct?r.states.A_SELECTED_CORRECT:r.states.A_SELECTED_INCORRECT),r.dataset.setAnswerState(n,i,s),r.hideFeedback()})),$(r.container).on("click",".retry-button",r.onRetry),$(r.container).on("click",".submit-button",r.onSubmit),r.wasReset&&r.container.addClass("component-was-reset"),r.complete&&r.submitted&&(r.container.addClass("completed"),r.displayFeedback()),r.submitEnable(),r.setupViewController(),r.loaded=!0}}})),Gv(Xv(r),"onSubmit",(function(){var t;switch(r.attemptCount++,r.submitted=!0,r.wasReset=!1,r.container.removeClass("component-was-reset"),r.mode){case wy:-1!==(t=r.dataset.getQuestionState(r.question)).indexOf("completed")||r.hasAttempt()||r.dataset.setQuestionState(r.question,r.states.Q_COMPLETED_INCORRECT);break;case _y:default:(t=r.dataset.getState())===r.states.D_COMPLETED_PASSED||r.hasAttempt()?r.hasAttempt()&&t===r.states.D_COMPLETED_FAILED&&(r.dataset.setState(r.states.D_INCOMPLETE),r.dataset.setQuestionState(r.question,r.states.Q_INCOMPLETE)):(r.dataset.setState(r.states.D_COMPLETED_FAILED),r.dataset.setQuestionState(r.question,r.states.Q_COMPLETED_INCORRECT))}r.submitEnable(),r.displayFeedback(),r.observer.notify(r.events.ASSESS_SUBMIT,{step:r.data.pageid,component:r.data.uid}),r.deferComplete||r.setComplete()})),Gv(Xv(r),"onRetry",(function(){r.container.find(".question-answer").removeClass("show-answer answer-correct answer-incorrect answer-neutral"),r.container.find("input").prop("checked",!1);for(var t=r.dataset.getQuestionData(r.question),e=0;e<t.answers.length;e++)r.dataset.setAnswerState(r.question,e,r.states.A_INITIAL);r.submitted=!1,r.submitEnable(),r.hideFeedback()})),Gv(Xv(r),"setComplete",(function(){var t;switch(r.mode){case wy:t=r.dataset.getQuestionState(r.question);break;case _y:default:t=r.dataset.getState()}r.complete=t.indexOf("completed")>-1,r.updateDisplayOfAllAnswers(),!0===r.complete?(r.submitEnable(),r.reportResults(t),r.container.addClass("completed"),r.observer.notify(r.events.COMPONENT_COMPLETE,r.getEventData())):r.submit.prop("disabled","disabled")})),Gv(Xv(r),"hasAttempt",(function(){return r.data.settings.attempts<=0||r.attemptCount<r.data.settings.attempts})),Gv(Xv(r),"hideFeedback",(function(){r.container.find(".feedback-content").empty(),r.container.find(".answer-item-feedback").empty()})),Gv(Xv(r),"displayFeedback",(function(){if(r.feedbackdataset){var t={state:r.dataset.getQuestionState(r.question),selection:[]};r.container.find(".answer-item-feedback").empty();for(var e=r.dataset.getQuestionData(r.question),n=0;n<e.answers.length;n++){var i=r.dataset.getAnswerState(r.question,n);i===r.states.A_SELECTED_CORRECT||i===r.states.A_SELECTED_INCORRECT?(t.selection.push(1),r.displayAnswerFeedback(e,n)):t.selection.push(0)}r.displayQuestionFeedback()}})),Gv(Xv(r),"unload",(function(){r.observer.removeByRef(r.events.DATASET_ITEM_STATE_CHANGE,r.data.uid),r.observer.removeByRef(r.events.DATASET_RESET,r.data.uid)})),Gv(Xv(r),"redisplay",(function(){r.loaded=!1,r.unload(),r.container.empty(),r.load()})),Gv(Xv(r),"questionState",(function(){switch(r.mode){case wy:return r.dataset.getQuestionState(r.question);case _y:default:return r.dataset.getState()}})),Gv(Xv(r),"submitEnable",(function(){var t=r.dataset.getQuestionData(r.question),e=!0;r.complete?(r.submit.addClass("hidden"),r.retry.addClass("hidden")):(r.submit.removeClass("hidden"),r.dataset.getSelection(r.question).length>=t.totalCorrect&&(e=!1)),e?r.submit.prop("disabled","disabled"):r.submit.prop("disabled",!1),!r.complete&&r.retry.length&&(r.submitted&&r.hasAttempt()?(r.retry.prop("disabled",!1).removeClass("hidden").attr("tabindex","0"),r.submit.attr("tabindex","-1").addClass("hidden")):(r.retry.prop("disabled","disabled").addClass("hidden").attr("tabindex","-1"),r.complete||r.submit.attr("tabindex","0").removeClass("hidden")))})),Gv(Xv(r),"updateDisplayOfAllAnswers",(function(){for(var t=r.dataset.getQuestionData(r.question),e=0;e<t.answers.length;e++)r.displayAnswerState(t,e)})),Gv(Xv(r),"displayAnswerState",(function(t,e){var n=t.answers[e],i=n.state,o=i.split(":"),a=r.data.settings.showanswerstatus,s=r.container.find(".question-answer [data-q='"+t.index+"'][data-a='"+e+"']"),c=s.parent("li");c.removeClass("answer-correct answer-incorrect answer-neutral show-answer-status"),s.removeAttr("aria-label");var u=c.find(".screenreader-feedback");if(r.submitted)switch(a!==yy&&r.hasAttempt()&&(a=gy),a){case"all":i===r.states.A_INITIAL&&(o[1]=n.correct?"correct":"incorrect"),c.addClass("answer-"+o[1]+" show-answer-status"),u.length?u.text(" - "+r.core.getTranslation(n.correct?"correct":"incorrect")):s.attr("aria-label",n.text+" - "+r.core.getTranslation(n.correct?"correct":"incorrect"));break;case vy:n.correct&&(c.addClass("answer-correct show-answer-status"),u.length?u.text(" - "+r.core.getTranslation("correct")):s.attr("aria-label",n.text+" - "+r.core.getTranslation("correct")));break;case my:(i!==r.states.A_INITIAL||n.correct)&&(o[1]=n.correct?"correct":"incorrect",c.addClass("answer-"+o[1]+" show-answer-status"),u.length?u.text(" - "+r.core.getTranslation(n.correct?"correct":"incorrect")):s.attr("aria-label",n.text+" - "+r.core.getTranslation(n.correct?"correct":"incorrect")));break;case gy:i!==r.states.A_INITIAL&&(c.addClass("answer-"+o[1]+" show-answer-status"),u.length?u.text(" - "+r.core.getTranslation(n.correct?"correct":"incorrect")):s.attr("aria-label",n.text+" - "+r.core.getTranslation(n.correct?"correct":"incorrect")))}if(i!==r.states.A_INITIAL?"selected"===o[0]&&s.prop("checked","checked"):s.prop("checked",!1),r.complete)s.prop("disabled","disabled");else switch(r.mode){case wy:-1===r.dataset.getQuestionState(r.question).indexOf("completed")&&s.prop("disabled",!1);break;case _y:default:r.dataset.getState()===r.states.D_INITIAL&&s.prop("disabled",!1)}})),Gv(Xv(r),"displayQuestionFeedback",(function(){if(r.feedbackdataset&&!1!==r.data.settings.questionfeedback){for(var t=r.dataset.getQuestionData(r.question),e=r.dataset.getQuestionState(r.question),n=r.container.find(".feedback-content"),i={questionindex:r.question,state:e,totalanswers:t.answers.length,totalcorrect:t.totalCorrect,selection:[]},o=0;o<t.answers.length;o++)r.dataset.getAnswerState(r.question,o).indexOf("selected")>-1?i.selection.push(1):i.selection.push(0);var a=r.feedbackdataset.getQuestionFeedback(i);if(r.executeHooks("questionfeedback",r.data.enablehooks,[{target:r.data.uid,feedback:a,feedbackoptions:i,done:function(){return r.setComplete()}}]))return void(r.deferComplete=!0);n.removeClass("feedback-neutral feedback-correct feedback-incorrect"),a?(r.core.setText(n,a),n.addClass(e===r.states.Q_COMPLETED_CORRECT?"feedback-correct":"feedback-incorrect").removeAttr("aria-hidden"),!1!==r.data.settings.scrolltofeedback?r.utils.scrollToElement("#CMP-"+r.data.uid+" .feedback-content",{centre:!0},(function(){r.config.accessibility&&n.focus()})):n.focus()):n.empty().attr("aria-hidden")}})),Gv(Xv(r),"displayAnswerFeedback",(function(t,e){if(r.feedbackdataset&&!1!==r.data.settings.answerfeedback){var n=r.dataset.getAnswerState(t.index,e),i=r.container.find(".question-answer [data-q='"+t.index+"'][data-a='"+e+"']").parent().find(".answer-item-feedback"),o={questionindex:r.question,state:n,answerindex:e},a=r.feedbackdataset.getAnswerFeedback(o);i.removeClass("feedback-neutral feedback-correct feedback-incorrect"),a?(r.core.setText(i,a),i.addClass(n===r.states.A_SELECTED_CORRECT?"feedback-correct":"feedback-incorrect").removeAttr("aria-hidden")):i.empty().attr("aria-hidden")}})),Gv(Xv(r),"reportResults",(function(t){var e=t.indexOf("failed")>-1?0:100,n=t.indexOf("failed")>-1?"wrong":"correct",i=t.indexOf("failed")>-1?"failed":"passed";switch(r.mode){case wy:e=t.indexOf("incorrect")>-1?0:100,n=t.indexOf("incorrect")>-1?"wrong":"correct",i=t.indexOf("incorrect")>-1?"failed":"passed"}var o=r.dataset.getReport(r.question,{uid:r.data.uid,type:"true-false",weight:r.data.settings.weight||1,percent:e,result:n,time:r.time,latency:Date.now()-r.time});o.finished=!0,r.core.resultManager.saveResult(r.data.settings.quizid,r.data.scoreid||r.data.dataset,o),r.core.objectiveManager.updateObjectiveContributors(r.data.uid,r.data.objectives,i)})),Gv(Xv(r),"reset",(function(){r.wasReset=!1,r.complete=!1,r.submitted=!1,r.attemptCount=0,r.container.removeClass("completed component-was-reset")})),Gv(Xv(r),"activate",(function(){r.active=!0,r.core.resultManager.enableSlot(r.data.settings.quizid,r.data.dataset)})),Gv(Xv(r),"deactivate",(function(){r.active=!1,r.core.resultManager.disableSlot(r.data.settings.quizid,r.data.dataset)})),Gv(Xv(r),"getResumeData",(function(){return[r.submitted?"1":"0",r.attemptCount].join("|")})),Gv(Xv(r),"setResumeData",(function(t){var e=nm(t.split("|"),2),n=e[0],i=e[1];r.submitted="1"===n,r.attemptCount=parseInt(i,10)||0})),r}return n}(Im);var Cy,xy=Object.freeze({__proto__:null,type:Ey,component:Sy,parser:function(t){return this.parseXML(t,(function(t){void 0===t.settings&&(t.settings={}),void 0===t.settings.attempts&&(t.settings.attempts=0),void 0===t.settings.showanswerstatus&&(t.settings.showanswerstatus=gy)}),{savesquizresults:!0,checkquizpool:!0})}}),Ty="gallery",Oy=function(t){Yv(n,t);var e=tm(n);function n(t,r){var i,o,a;return $v(this,n),Gv(Xv(a=e.call(this,t,r)),"type",Ty),Gv(Xv(a),"complete",!1),Gv(Xv(a),"suspendcomplete",!1),Gv(Xv(a),"interactive",!0),Gv(Xv(a),"controls",null),Gv(Xv(a),"gallery",null),Gv(Xv(a),"galleryList",null),Gv(Xv(a),"nowShowing",0),Gv(Xv(a),"allViewed",!1),Gv(Xv(a),"speed",.6),Gv(Xv(a),"viewedList",[]),Gv(Xv(a),"scrollStart",{}),Gv(Xv(a),"posStart",{}),Gv(Xv(a),"posNow",{}),Gv(Xv(a),"propagationStopped",!1),Gv(Xv(a),"resizeObserver",null),Gv(Xv(a),"navNext",null),Gv(Xv(a),"navPrev",null),Gv(Xv(a),"indicator",null),Gv(Xv(a),"indicatorCurrent",null),Gv(Xv(a),"indicatorTotal",null),Gv(Xv(a),"initialise",(function(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];(t=em((i=Xv(a),Kv(n.prototype)),"initialise",i)).call.apply(t,[i].concat(r));var s=a.initChildren({childoptions:a.data.children.map((function(t,e){return{variables:{currentItemNumber:e+1}}}))});return s&&(a.children=s.children,a.childrenMap=s.childrenMap),a.container})),Gv(Xv(a),"load",(function(){if(a.loaded)a.redisplay();else{a.activate(),a.setupProperties();var t=a.data;$(a.container).find("> .gallerywrap").length||a.renderTemplate({children:t.children}),a.container.find('.cmp_gallery-child[data-for="'.concat(t.uid,'"]')).length?(a.navNext=a.container.find(".gallerycontrol[data-action='g_next'][data-for=\"".concat(t.uid,'"]')),a.navPrev=a.container.find(".gallerycontrol[data-action='g_prev'][data-for=\"".concat(t.uid,'"]')),a.indicator=a.container.find('.galleryindicator[data-for="'.concat(t.uid,'"]')),a.controls=$(a.container).find('.gallerycontrol[data-for="'.concat(t.uid,'"]')),a.galleryList=$(a.container).find('.gallery-items[data-for="'.concat(t.uid,'"]'))):(a.navNext=a.container.find(".gallerycontrol[data-action='g_next']"),a.navPrev=a.container.find(".gallerycontrol[data-action='g_prev']"),a.indicator=a.container.find(".galleryindicator"),a.controls=a.container.find(".gallerycontrol"),a.galleryList=a.container.find(".gallery-items")),a.indicatorCurrent=a.indicator.find(".galleryindicator-current"),a.indicatorTotal=a.indicator.find(".galleryindicator-total"),a.loadChildren(),a.suspendcomplete&&(a.viewedList=a.children.map((function(){return 100}))),a.loaded=!0,a.checkComplete(!1),a.observer.add(a.events.COMPONENT_COMPLETE,(function(t){return a.onComponentComplete(t)}),{id:t.uid}),a.observer.add(a.events.A11Y_ON,(function(){return a.setTabindexes()}),{id:t.uid}),a.resizeObserver=new ResizeObserver((function(t){var e,n=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=rm(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t);try{for(n.s();!(e=n.n()).done;){e.value;a.showItem({index:a.nowShowing,animate:!1,focus:!1})}}catch(t){n.e(t)}finally{n.f()}})),a.resizeObserver.observe($(a.container)[0]),0===a.nowShowing&&a.storeItemCompletion(a.nowShowing),a.gallery=$(a.container).find(".componentholder").filter(":first"),a.controls.on("click",(function(t){switch($(t.currentTarget).data("action")){case"g_next":a.nowShowing<a.children.length-1&&a.showItem({index:a.nowShowing+1});break;case"g_prev":a.nowShowing>0&&a.showItem({index:a.nowShowing-1})}})),!1!==t.gestures&&("TouchEvent"in window?a.gallery.on("touchstart",a.onTouchStart):"PointerEvent"in window&&(a.gallery.css({"-ms-touch-action":"none","touch-action":"none"}),a.gallery.on("pointerdown",a.onPointerStart))),a.complete?a.container.addClass("completed"):a.container.removeClass("completed"),a.updateButtons(),a.setTabindexes(),a.setupViewController(),a.nowShowing>0&&a.showItem({index:a.nowShowing,focus:!1})}})),Gv(Xv(a),"onComponentComplete",(function(t){void 0!==a.childrenMap[t.component]&&(!1!==a.data.autoadvance&&a.getIndexOfChild(a.childrenMap[t.component])===a.nowShowing&&a.nowShowing<a.children.length-1&&a.showItem({index:a.nowShowing+1}),a.checkComplete(!0),a.complete&&a.container.addClass("completed"))})),Gv(Xv(a),"getIndexOfChild",(function(t){for(var e=0;e<a.children.length;e++)if(a.children[e].component===t)return e;return-1})),Gv(Xv(a),"unload",(function(){em((o=Xv(a),Kv(n.prototype)),"unload",o).call(o),a.observer.removeByID(a.events.COMPONENT_COMPLETE,a.data.uid),a.observer.removeByID(a.events.A11Y_ON,a.data.uid),a.resizeObserver&&(a.resizeObserver.disconnect(),a.resizeObserver=null)})),Gv(Xv(a),"redisplay",(function(){a.loaded=!1,a.unload(),a.load()})),Gv(Xv(a),"showItem",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index,n=t.animate,r=void 0===n||n,i=t.focus;if(!(e>=a.children.length||e<0)){a.config.accessibility&&(r=!1,void 0===i&&(i=!0));var o=a.nowShowing,s=Math.abs(e-o);a.nowShowing=e,a.nowShowing>=a.children.length-1&&(a.allViewed=!0);var c=Math.round(e*a.container.width()*-1);r?TweenLite.to(a.galleryList,a.speed*s,{x:c,ease:"Power2.easeInOut",onComplete:function(){return a.animationComplete(i)}}):(TweenLite.set(a.galleryList,{x:c}),a.animationComplete(i)),a.storeItemCompletion(e),a.updateButtons(),a.setTabindexes()}})),Gv(Xv(a),"animationComplete",(function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&a.focusCurrentItem(),a.checkComplete(!0),a.complete&&a.container.addClass("completed")})),Gv(Xv(a),"storeItemCompletion",(function(t){a.children.length&&("function"==typeof a.children[t].component.getPercentComplete?a.viewedList[t]=a.children[t].component.getPercentComplete():a.viewedList[t]=a.children[t].component.canMoveOn()?100:0)})),Gv(Xv(a),"updateButtons",(function(){a.controls.removeClass("disabled"),a.nowShowing>=a.children.length-1&&a.navNext.addClass("disabled"),a.nowShowing<=0&&a.navPrev.addClass("disabled"),a.indicator.find(".galleryindicator-item").removeClass("active"),a.indicator.find(".galleryindicator-item:nth-of-type("+(a.nowShowing+1)+")").addClass("active"),a.indicatorCurrent.text(a.nowShowing+1),a.indicatorTotal.text(a.children.length);var t=a.galleryList.find("> .cmp_gallery-child").removeClass("previous-item next-item current-item");a.nowShowing>0&&$(t[a.nowShowing-1]).addClass("previous-item"),a.nowShowing<a.children.length-1&&$(t[a.nowShowing+1]).addClass("next-item"),$(t[a.nowShowing]).addClass("current-item")})),Gv(Xv(a),"setTabindexes",(function(){var t=a.galleryList.find("> .cmp_gallery-child")[a.nowShowing],e=a.galleryList.find("> .cmp_gallery-child");$(e).removeAttr("tabindex");for(var n=0;n<e.length;n++)e[n]!==t?a.core.a11y.makeChildrenInert(e[n]):a.core.a11y.makeChildrenActive(e[n])})),Gv(Xv(a),"focusCurrentItem",(function(){a.config.accessibility&&setTimeout((function(){var t=$(a.galleryList.find("> .cmp_gallery-child")[a.nowShowing]),e=t.find("[tabindex]")[0];e||(t.attr("tabindex","0"),e=t[0]),e.focus({preventScroll:!0})}),20)})),Gv(Xv(a),"onTouchStart",(function(t){(t=t.originalEvent).stopPropagation(),a.propagationStopped=!1,a.onStart(t.touches[0].pageX,t.touches[0].pageY),$(document).on("touchmove",a.onTouchMove),$(document).on("touchend",a.onTouchEnd)})),Gv(Xv(a),"onTouchMove",(function(t){t=t.originalEvent;var e=Math.abs(t.touches[0].pageX-a.posStart.x),n=Math.abs(t.touches[0].pageY-a.posStart.y);a.propagationStopped||e>n&&e>10?(a.propagationStopped=!0,a.onMove(t.touches[0].pageX,t.touches[0].pageY),t.stopPropagation(),t.preventDefault()):!a.propagationStopped&&n>e&&n>10&&a.onTouchEnd(null)})),Gv(Xv(a),"onTouchEnd",(function(){$(document).off("touchmove",a.onTouchMove),$(document).off("touchend",a.onTouchEnd),a.onEnd()})),Gv(Xv(a),"onPointerStart",(function(t){(t=t.originalEvent).stopPropagation(),a.propagationStopped=!1,a.onStart(t.pageX,t.pageY),$(document).on("pointermove",a.onPointerMove),$(document).on("pointerup",a.onPointerEnd)})),Gv(Xv(a),"onPointerMove",(function(t){t=t.originalEvent;var e=Math.abs(t.pageX-a.posStart.x),n=Math.abs(t.pageY-a.posStart.y);a.propagationStopped||e>n&&e>10?(a.propagationStopped=!0,a.onMove(t.pageX,t.pageY),t.stopPropagation(),t.preventDefault()):!a.propagationStopped&&n>e&&n>10&&a.onPointerEnd(null)})),Gv(Xv(a),"onPointerEnd",(function(){$(document).off("pointermove",a.onPointerMove),$(document).off("pointerup",a.onPointerEnd),a.onEnd()})),Gv(Xv(a),"onStart",(function(t,e){a.scrollStart={x:a.galleryList[0]._gsTransform&&-1*a.galleryList[0]._gsTransform.x||0},a.posStart={x:t,y:e},a.posNow={x:t,y:e}})),Gv(Xv(a),"onMove",(function(t,e){a.posNow={x:t,y:e};var n=a.posNow.x-a.posStart.x;TweenLite.set(a.galleryList,{x:-1*(a.scrollStart.x-n)})})),Gv(Xv(a),"onEnd",(function(){var t=a.posNow.x-a.posStart.x,e=!0;Math.abs(t)>50?t<0&&a.nowShowing<a.children.length-1?a.children[a.nowShowing].component.isInteractive()&&!a.children[a.nowShowing].component.canMoveOn()||a.nowShowing++:t>0&&a.nowShowing>0&&a.nowShowing--:e=!1,TweenLite.to(a.galleryList,.4,{x:a.container.width()*a.nowShowing*-1,ease:"Power2.easeOut",onComplete:function(){e&&a.focusCurrentItem()}}),e&&(a.nowShowing>=a.children.length-1&&(a.allViewed=!0),a.updateButtons(),a.setTabindexes(),a.checkComplete(!0),a.complete&&a.container.addClass("completed"))})),Gv(Xv(a),"getPercentComplete",(function(){if(a.complete&&a.allViewed)return 100;for(var t=100*a.children.length,e=0,n=0;n<a.children.length;n++)void 0!==a.viewedList[n]&&(e+=a.viewedList[n]);return e/t*100})),Gv(Xv(a),"checkComplete",(function(t){if(a.complete&&a.allViewed)return a.complete;if(0===a.children.length)return a.allViewed=!0,a.complete=!0,a.complete;for(var e=!0,n=0;n<a.children.length;n++)if(a.children[n].component.isInteractive()&&!a.children[n].component.canMoveOn()){e=!1;break}return e&&a.allViewed?(a.complete!==e||t)&&(a.complete=e,a.observer.notify(a.events.COMPONENT_COMPLETE,a.getEventData())):a.complete=!1,a.complete&&a.core.objectiveManager.updateObjectiveContributors(a.data.uid,a.data.objectives,"passed"),a.complete})),Gv(Xv(a),"reset",(function(){for(var t=0;t<a.children.length;t++)"function"==typeof a.children[t].component.reset&&a.children[t].component.reset();a.allViewed=!1,a.complete=!1,a.nowShowing=0,a.viewedList=[],a.container.removeClass("completed")})),Gv(Xv(a),"getResumeData",(function(){if(!a.loaded&&a.resumedata)return a.resumedata;for(var t={c:a.complete?1:0,s:a.nowShowing},e=0;e<a.children.length;e++){var n=a.children[e].component.getResumeData();n&&(t._||(t._={}),t._[a.children[e].component.getUID()]=n)}return t})),Gv(Xv(a),"setResumeData",(function(t){a.resumedata=t,a.resumedata.c&&(a.complete=1===a.resumedata.c,a.complete&&(a.suspendcomplete=!0)),a.resumedata.s&&(a.nowShowing=a.resumedata.s)})),Gv(Xv(a),"gotoStart",(function(t){a.showItem({index:0,animate:t})})),Gv(Xv(a),"__public",{gotoStart:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return a.gotoStart(t)},showItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return a.showItem({index:t,animate:e,focus:n})}}),a}return n}(km),Iy=Object.freeze({__proto__:null,type:Ty,component:Oy}),ky=Object.freeze({__proto__:null,name:"srDatasetToPopup",module:function(e){var n=e.core,r=e.modules;return{name:"SR Dataset To Popup",version:1,immediate:!1,init:function(){},show:function(e,i,o,a){var s=n.getDataset(i),c=s.getItemData(o),u=s.states(),l=t(t({},c.popup),a);l.text=c.content,l.useID=-1,l.contentID=c.uid||i+"-P"+o,l.triggerElement=a.triggerElement||null,l.onComplete=function(t){s.setItemState(o,u.I_COMPLETED),"function"==typeof a.onComplete&&a.onComplete(t)},l.onProgress=function(t,e){"function"==typeof a.onProgress&&a.onProgress(t,e)},"popup"===e&&s.setItemState(o,u.I_COMPLETED),r[e]&&"function"==typeof r[e].show?r[e].show(l):console.warn("srDatasetToPopup::module ["+e+"] not found, or doesn't have a 'show' method.")}}}}),Ay=Object.freeze({__proto__:null,name:"reporting",module:function(){function t(t){return"function"==typeof t&&t(null,"incomplete"),"incomplete"}function e(t,e){return"function"==typeof e&&e(null,"true"),"true"}return{name:"No reporting",version:3,immediate:!0,reportingType:"None",init:function(){},beginSession:function(t){return"function"==typeof t&&t(null,"true"),"true"},save:function(t){return"function"==typeof t&&t(null,"true"),"true"},endSession:function(t){return"function"==typeof t&&t(null,"true"),"true"},getLanguage:function(t){return"function"==typeof t&&t(null,""),""},setLanguage:function(t,e){return"function"==typeof e&&e(null,""),""},getBookmark:function(t){return"function"==typeof t&&t(null,""),""},setBookmark:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getScore:function(t){return"function"==typeof t&&t(null,0),0},setScore:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getMinScore:function(t){return"function"==typeof t&&t(null,0),0},setMinScore:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getMaxScore:function(t){return"function"==typeof t&&t(null,100),100},setMaxScore:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getStatus:t,setStatus:e,getCompletionStatus:t,setCompletionStatus:e,getSuccessStatus:t,setSuccessStatus:e,getInteraction:function(t,e){return"function"==typeof e&&e(null,""),""},setInteraction:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getStateData:function(t){return"function"==typeof t&&t(null,""),""},setStateData:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},getStudentName:function(t){return"function"==typeof t&&t(null,"Lastname, Firstname"),""},getStudentID:function(t){return"function"==typeof t&&t(null,"ABC123"),""},setSessionTime:function(t,e){return"function"==typeof e&&e(null,"true"),"true"},get:function(t,e){return"function"==typeof e&&e(null,""),""},set:function(t,e,n){return"function"==typeof n&&n(null,"true"),"true"}}}}),Dy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.observers={},t.length>0)for(var n=t.length-1;n>=0;n--)this.observers[t[n]]=[]}return t.prototype.register=function(t){void 0===this.observers[t]&&(this.observers[t]=[])},t.prototype.add=function(t,e,n){t?(void 0===this.observers[t]&&(this.observers[t]=[],console.log("Observer.add :: The event ["+t+"] does not exsist. Event has been created dynamically.")),this.observers[t].push({observable:e,data:n})):console.log(new Error("Observer.add :: no event name was specified."))},t.prototype.once=function(t,e,n){t?(void 0===this.observers[t]&&(this.observers[t]=[],console.log("Observer.add :: The event ["+t+"] does not exsist. Event has been created dynamically.")),this.observers[t].push({observable:e,data:n,once:!0})):console.log(new Error("Observer.add :: no event name was specified."))},t.prototype.clear=function(t){this.observers[t]=[]},t.prototype.remove=function(t,e){if(void 0!==this.observers[t])for(var n=this.observers[t],r=n.length-1;r>=0;r--)n[r].observable===e&&n.splice(r,1)},t.prototype.removeByID=function(t,e){if(void 0!==this.observers[t])for(var n=this.observers[t],r=n.length-1;r>=0;r--)void 0!==n[r].data&&n[r].data.id===e&&n.splice(r,1)},t.prototype.removeByRef=function(t,e){if(void 0!==this.observers[t])for(var n=this.observers[t],r=n.length-1;r>=0;r--)void 0!==n[r].data&&n[r].data.ref===e&&n.splice(r,1)},t.prototype.has=function(t){return void 0!==this.observers[t]},t.prototype.notify=function(t,e){if(void 0!==this.observers[t])for(var n=r(this.observers[t]),i=n.length-1;i>=0;i--)n[i]&&(void 0!==n[i].data?n[i].observable(e,n[i].data):n[i].observable(e),n[i].once&&n.splice(i,1));else console.warn("Observer.notify :: The event ["+t+"] does not exsist.")},t.prototype.notifyByID=function(t,e,n){if(void 0!==this.observers[t])for(var r=this.observers[t],i=r.length-1;i>=0;i--)r[i].data&&r[i].data.id===e&&(void 0!==r[i].data?r[i].observable(n,r[i].data):r[i].observable(n),r[i].once&&r.splice(i,1));else console.warn("Observer.notify :: The event ["+t+"] does not exsist.")},t}();!function(t){t.COMPRESS="compress",t.INFLATE="inflate"}(Cy||(Cy={}));var Py,My="Your LMS has modified the data required to resume the course correctly so we are unable to restore your progress.",Ry=function(){function t(){this.compression=new Ly}return t.prototype.compress=function(t,e){return this.exec(parseInt(e,10),Cy.COMPRESS,t)},t.prototype.inflate=function(t){var e=t.charAt(1);return e="+"===e?t.substr(2,2):e,this.exec(parseInt(e,10),Cy.INFLATE,t)},t.prototype.exec=function(t,e,n){switch(t){case 2:return this.compression.V2(e,n);case 3:return this.compression.V3(e,n);case 4:return this.compression.V4(e,n);case 5:default:return this.compression.V5(e,n)}},t}(),Ly=function(){function t(){this.wanringAlerted=!1}return t.prototype.V5=function(t,e){if("btoa"in window&&"atob"in window&&"pako"in window){if(t===Cy.COMPRESS){var n=pako.deflate(e,{to:"string",level:9});return"@5"+(r=btoa(n)).replace(/\+/g,"_")}var r=e.substring(2).replace(/_/g,"+"),i="";try{i=atob(r)}catch(t){if(console.warn("Your LMS has modified the course suspend_data. Attempting to restore."),!r.includes(" "))return console.error(new Error(My)),alert(My),"";try{i=atob(r.replace(/ /g,"+"))}catch(t){return console.error(new Error(My)),alert(My),""}}return pako.inflate(i,{to:"string"})}return t===Cy.COMPRESS?this.V4(t,e):(this.wanringAlerted||(this.wanringAlerted=!0,alert("Unable to restore your progress. You may be using a different browser that lacks the required capabilities.")),"")},t.prototype.V4=function(t,e){return e=t===Cy.COMPRESS?"@4"+(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.split('\\":{\\"').join("º")).split('\\":\\"c:').join("ð")).split('c\\":').join("¶")).split(',"ln":0,"lb":0').join("œ")).split('\\"').join("¯")).split("º¶1,¯_º").join("Œ")).split("¯}},¯").join("¡")).split('œ,"td":"{').join("¬")).split('},{"v":').join("Ð")).split(",¯").join("µ")).split("ð1¯µ").join("ø")).split("\":\"{'s':'").join("Ø")).split("','r':'','a[|]").join("þ")).split('Ð1,"c":1¬¯').join("Æ")).split("}}").join("æ")).split("[~]").join("¿")).split("','q[|]").join("§")).split(',"').join("»")).split("¯:¯1¡").join("«")).split('":').join("±")).split("'[^]\"»").join("ª")):(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.substring(2)).split("ª").join("'[^]\"»")).split("±").join('":')).split("«").join("¯:¯1¡")).split("»").join(',"')).split("§").join("','q[|]")).split("¿").join("[~]")).split("æ").join("}}")).split("Æ").join('Ð1,"c":1¬¯')).split("þ").join("','r':'','a[|]")).split("Ø").join("\":\"{'s':'")).split("ø").join("ð1¯µ")).split("µ").join(",¯")).split("Ð").join('},{"v":')).split("¬").join('œ,"td":"{')).split("¡").join("¯}},¯")).split("Œ").join("º¶1,¯_º")).split("¯").join('\\"')).split("œ").join(',"ln":0,"lb":0')).split("¶").join('c\\":')).split("ð").join('\\":\\"c:')).split("º").join('\\":{\\"')},t.prototype.V3=function(t,e){return t===Cy.INFLATE&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.substring(2)).split("¿").join("[|]")).split("º").join('"¡"tpÆ"md"')).split("ð").join("}Ø")).split("¶").join("','")).split("œ").join("'[^]\"}")).split("Œ").join("Æ\"{'s':'")).split("¯").join('{"')).split("Ð").join("\\Æþc:1þ")).split("ø").join("}},")).split("¡").join("},{")).split("¬").join("}}}")).split("«").join("[~]")).split("µ").join('},{"sÆ')).split("Ø").join(',"')).split("þ").join('\\"')).split("Æ").join('":')).split("æ").join('\\":{\\"c\\":1,\\"_\\":{')).split("»").join(',"vs":0,"cm":0,"scn":{},"nst":null,"lkn":0,"lkb":0,"dt":{')).split("§").join(',"vs":1,"cm":1,"scn":{},"nst":null,"lkn":0,"lkb":0,"dt":{')),e},t.prototype.V2=function(t,e){return t===Cy.INFLATE&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.substring(2)).split("º").join("}}")).split("ð").join("þitmæ")).split("¶").join('{"')).split("œ").join("]},Øroø}¡þitmæ[")).split("Œ").join("{Æ")).split("¯").join('"þvsæ1þcmæ0þscnæ')).split("Ð").join('"þvsæ1þcmæ1þscnæ')).split("ø").join('"þvsæ0þcmæ0þscnæ')).split("¡").join("þnstænullþlknæ0þlkbæ0þdtæ{}")).split("¬").join('Øast"þvsæ0þcmæ0þscnæ{}þnstænullþlknæ0þlkbæ0þdtæ{}}')).split("«").join(",{Æ]þivsæ[")).split("µ").join('þaæ2},{"cæ1þræ')).split("Ø").join('{"tpæ"')).split("þ").join(',"')).split("Æ").join('"eæ1}')).split("æ").join('":')).split("»").join(',"vs":0,"cm":0,"scn":¿}},"nst":null,"lkn":0,"lkb":0,"dt":{')).split("§").join(',"vs":1,"cm":1,"scn":¿}},"nst":null,"lkn":0,"lkb":0,"dt":{')).split("¿").join('{"m_btn_vstd":{')),e},t}(),Ny=function(){function t(t){this.cachedScrollbarWidth=null,this.array={shuffle:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t},sortOn:function(t,e){return t.sort((function(t,n){return t[e]-n[e]}))},applyOrder:function(t,e,n){return t.sort((function(t,r){var i=t[n],o=r[n];return e.indexOf(i)>e.indexOf(o)?1:-1}))},indexOf:function(t,e,n){var r,i,o,a;if(null==t)throw new TypeError('"this" is null or not defined');if(0===(o=(i=Object(t)).length>>>0))return-1;if(a=+n||0,Math.abs(a)===1/0&&(a=0),a>=o)return-1;for(r=Math.max(a>=0?a:o-Math.abs(a),0);r<o;){if(r in i&&i[r]===e)return r;r++}return-1},map:function(t,e,n){var r,i,o,a,s;if(void 0===t)throw new TypeError(" this is null or not defined");if(s=(a=Object(t)).length>>>0,"function"!=typeof e)throw new TypeError(e+" is not a function");for(n&&(r=n),i=new Array(s),o=0;o<s;){var c,u;o in a&&(c=a[o],u=e.call(r,c,o,a),i[o]=u),o++}return i}},this.string={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},this.object={keysToArray:function(t){var e,n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n}},this.number={max:function(t,e){return e>t?e:t},min:function(t,e){return e<t?e:t}},this.config=t.config,this.modules=t.modules,this.core=t.core,this.suspendData=new Ry}return t.prototype.hasModule=function(t){return void 0!==this.modules[t]},t.prototype.getNewStepData=function(){return{actions:[],background:"",complete:!1,progress:{raw:0,total:0,scaled:0},currentContent:null,currentTextElement:null,classList:"",data:{},moduleSettings:{},sections:null,dataDisplays:{},indexed:!0,group:"0",html:null,guid:"",id:0,gui:{},isCompletionPoint:!1,lockNext:!1,lockBack:!1,forceLockNext:!1,forceLockBack:!1,nextStepTarget:null,nextStepTargets:null,resources:[],references:[],retainScrollPos:!1,scrollX:0,scrollY:0,labels:[],lastFocus:null,score:{isScored:!1,percent:0,points:0},step:{},stepOptions:{},studentConfig:{},template:"",time:{duration:0,max:0,current:0},title:"",transform:{x:0,y:0,z:0,rx:0,ry:0,rz:0,sx:0,sy:0,sz:0},type:null,uniqueDiv:"",visited:!1,isEntry:!1,xml:null,timeline:null,timelineexit:null,component:null}},t.prototype.getURLVars=function(){for(var t={},e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var r=e[n].split("=");t[r[0]]=r[1]}return t},t.prototype.getParentWindow=function(t){return t.parent},t.prototype.isBadIE=function(){var t=document.createElement("div");return t.innerHTML="\x3c!--[if lt IE 9]><i></i><![endif]--\x3e",!(1!=t.getElementsByTagName("i").length)},t.prototype.parseLangString=function(t){if(!t)return this.config.language;if("_"===t.charAt(2)||-1===t.indexOf("_")||-1===t.indexOf("-")){if(!0===this.urlExists(this.core.getAssetPath("components.xml","data/"+t)))return t}else if("-"===t.charAt(2)){var e=t.split("-");if(e[1]&&(e[1]=e[1].toUpperCase()),t=e.join("_"),!0===this.urlExists(this.core.getAssetPath("components.xml","data/"+t)))return t}else if("english"===t.toLowerCase())return"en_AU";return this.config.language},t.prototype.urlExists=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),404!=e.status},t.prototype.compareVersion=function(t,e){var n,r=t.split("."),i=e.split("."),o=r.length;for(n=0;n<o;n++){if(i.length==n)return!1;if(r[n]!=i[n])return!(r[n]>i[n])}return r.length!=i.length},t.prototype.msToTime=function(t,e){t=+t;var n=Math.trunc(t%1e3/100),r=Math.trunc(t/1e3%60),i=Math.trunc(t/6e4%60),o=Math.trunc(t/36e5%24),a=o<10?"0"+o:""+o,s=i<10?"0"+i:""+i,c=r<10?"0"+r:""+r,u="";return u=n<10?"0"+n:n>100?""+Math.floor(n/10):""+n,a+":"+s+":"+c+(!0===e?"."+u:"")},t.prototype.formatTime=function(t,e){var n=new Date(t),r=n.getMilliseconds(),i=n.getSeconds(),o=n.getMinutes(),a=n.getHours(),s=a<10?"0"+a:""+a,c=o<10?"0"+o:""+o,u=i<10?"0"+i:""+i,l="";return l=r<10?"0"+r:r>100?""+Math.floor(r/10):""+r,s+":"+c+":"+u+(!0===e?"."+l:"")},t.prototype.sanitizeHTMLAttributeValue=function(t){return t&&"string"==typeof t?(t=(t=t.trim()).replace(/[\x00-\x20]+/g,"")).match(/^javascript:/)?"":t:""},t.prototype.sanitizeHTMLChunk=function(t){for(var e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,n=/\bon\w+=\S+(?=.*>)/gim,r=0;e.test(t)&&r<10;)r++,t=t.replace(e,"");if(10===r)return"";for(r=0;n.test(t)&&r<10;)r++,t=t.replace(n,"");return 10===r?"":t},t.prototype.parsePropertyUnit=function(t,e,n){return((t=""+t).indexOf("px")>-1||t.indexOf("%")>-1)&&(t.indexOf("left:")>-1||t.indexOf("right:")>-1||t.indexOf("top:")>-1||t.indexOf("bottom:")>-1)?t:e+":"+t+n},t.prototype.parseUnit=function(t,e){return(t=""+t).indexOf("px")>-1||t.indexOf("%")>-1?t:t+e},t.prototype.stopPropagation=function(t){t.stopPropagation&&t.stopPropagation()},t.prototype.guessType=function(t){if("string"!=typeof t)return t;var e=t;return""===(t=(""+t).toLowerCase())?e:"\\"===t.charAt(0)?e.substring(1):"true"===t||"false"===t?"true"===t:"null"===t||"undefined"===t?null:!1===isNaN(+t)?+t:e},t.prototype.determineStepNumber=function(t){return"number"==typeof t?t:"string"==typeof t&&(t=this.config.stepIDMap[t]||t,t=parseInt(t,10),isNaN(t))?void 0:t},t.prototype.getCurrentDate=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return(e<10?"0"+e:e)+"-"+(n<10?"0"+n:n)+"-"+(r<10?"0"+r:r)},t.prototype.getCurrentTime=function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)},t.prototype.simpleUid=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()},t.prototype.debounce=function(t,e,n){var r,i=this;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=i,c=function(){r=null,n||t.apply(s,o)},u=n&&!r;clearTimeout(r),r=window.setTimeout(c,e),u&&t.apply(s,o)}},t.prototype.throttle=function(t,e,n){var i,o;return function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=Date.now();void 0!==o&&window.clearTimeout(o),!i||c-i>=e?(t.apply(null,a),i=c):o=window.setTimeout(n.bind.apply(n,r([null],a)),e-(c-i))}},t.prototype.getNodeAttributesAsObject=function(t,e){var n=this;void 0===e&&(e=!1);var r={};return t&&$.each(t.attributes,(function(t,i){r[i.name]=e?n.guessType(i.value):i.value})),r},t.prototype.getScrollContainer=function(){var t=document.querySelector(".scroll-container");return t||(document.scrollingElement||document.documentElement)},t.prototype.focusFirstElement=function(t){void 0===t&&(t="#content");var e=document.getElementById("stepTitle");(e||(e=$(t).find("[tabindex]")[0]))&&e.focus()},t.prototype.scrollToElement=function(t,e,n){var r=this;(t=$(t)).length&&(e=$.extend(!0,{speed:.6,offset:0,delay:0,ease:"Power2.easeInOut",autoDetectScrollParent:!0},e||{}),setTimeout((function(){var i=document.scrollingElement||document.body;if(e.autoDetectScrollParent?i=r.findScrollParent(t[0]):e.scrollParent&&(i=$(e.scrollParent)[0]),i){var o=i===document.body||i===document.getElementsByTagName("html")[0],a=t.offset(),s=0;if(!o){var c=i.getBoundingClientRect();a.top=i.scrollTop+a.top-c.top}s=e.centre||e.center?i.clientHeight/2-e.offset:parseInt($("#shellcontainer").css("padding-top"))+e.offset;var u=i.scrollHeight-i.clientHeight,l=a.top-s;l>u&&(l=u),l<0&&(l=0);var f=!1;if(o){i=$("html, body");for(var d=0;d<i.length;d++)if(l!==i[d].scrollTop){f=!0;break}}else l!==i.scrollTop&&(f=!0);f&&i?TweenLite.to(i,e.speed,{scrollTo:{x:Math.round(0),y:Math.round(l)},ease:e.ease,onComplete:function(){"function"==typeof n&&n(null)}}):"function"==typeof n&&n(null)}else"function"==typeof n&&n(new Error("Element is either not in the document, or it has no scroll parent."))}),1e3*e.delay))},t.prototype.scrollElementParentBy=function(t,e,n){if((t=$(t)).length){e=$.extend(!0,{speed:.6,offset:0,delay:0,ease:"Power2.easeInOut",x:0,y:0,autoDetectScrollParent:!0},e||{});var r=document.scrollingElement||document.body;if(e.autoDetectScrollParent?r=this.findScrollParent(t[0]):e.scrollParent&&(r=$(e.scrollParent)[0]),r)if(r){var i={};e.x&&(i.x=r.scrollLeft+e.x),e.y&&(i.y=r.scrollTop+e.y),TweenLite.to(r,e.speed,{scrollTo:i,ease:e.ease,onComplete:function(){"function"==typeof n&&n(null)}})}else"function"==typeof n&&n(null);else"function"==typeof n&&n(new Error("Element is either not in the document, or it has no scroll parent."))}},t.prototype.findScrollParent=function(t){if(!t||!t.parentNode)return null;var e=/(auto|scroll)/,n=function(t,e){return getComputedStyle(t,null).getPropertyValue(e)},r=function(t){return e.test(function(t){return n(t,"overflow")+n(t,"overflow-y")+n(t,"overflow-x")}(t))};if(!(t instanceof HTMLElement))return document.scrollingElement||document.body;for(var i=function t(e,n){return null===e.parentNode?n:t(e.parentNode,n.concat([e]))}(t.parentNode,[]),o=0;o<i.length;o+=1)if(r(i[o]))return i[o];return document.scrollingElement||document.body},t.prototype.getScrollbarWidth=function(t){if(t)return t.offsetWidth-t.clientWidth;if(null===this.cachedScrollbarWidth){var e=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),n=$("<div>").css({width:"100%"}).appendTo(e).outerWidth()||100;e.remove(),this.cachedScrollbarWidth=100-n}return this.cachedScrollbarWidth},t.prototype.getElementInView=function(t){var e=void 0===t?{}:t,n=e.classname,r=void 0===n?"cmp_section":n,i=e.locationY,o=void 0===i?.25:i,a=e.locationX,s=void 0===a?.5:a,c=document.elementFromPoint(window.innerWidth*s,window.innerHeight*o);if(c)return c.classList.contains(r)?c.dataset.uid:$(c).parents("."+r).data("uid")},t.prototype.isFullScreen=function(){return!!(document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen)},t.prototype.getModuleConfigText=function(t,e){return this.config.extraData[t]&&this.config.extraData[t].text||e},t.prototype.getModuleConfigAttribute=function(t,e,n,r){void 0===r&&(r=!1);var i=n;if(this.config.extraData[t]){var o=this.config.extraData[t].attributes;o&&void 0!==o[e]&&(i=o[e])}if(this.config.stepData[this.config.currentStep]){var a=this.config.stepData[this.config.currentStep].moduleSettings;a&&a[t]&&a[t].attributes&&void 0!==a[t].attributes[e]&&(i=a[t].attributes[e])}return r?this.guessType(i):i},t}();!function(t){t.ON="on",t.OFF="off"}(Py||(Py={}));var jy,qy,zy,By,Fy,Uy,$y,Vy,Hy,Gy,Qy=function(){function t(t){this.ANIM_MS_THRESHOLD=20,this.defaults={element:$(),ease:"Cubic.easeOut",speed:.3,killTweens:!0,cssBefore:{},cssAfter:{}}}return t.prototype.none=function(t,e,n,r){var i={element:t,onComplete:r||function(){},speed:0,cssBefore:{},cssAfter:{}};e===Py.ON?(i.cssBefore={display:"none"},i.cssAfter={display:"block"}):"off"===e&&(i.cssBefore={display:"block"},i.cssAfter={display:"none"}),this.transit(i)},t.prototype.fade=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={},i.cssAfter={autoAlpha:1}):"off"===e&&(i.cssBefore={},i.cssAfter={autoAlpha:0}),this.transit(i)},t.prototype.fadeOpacity=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={},i.cssAfter={opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={opacity:0}),this.transit(i)},t.prototype.slideTop=function(t,e,n,r){var i=$.extend(!0,this.defaults,n),o=n.yProperty||"top";i.element=t,i.onComplete=r||function(){};var a=$(t).outerHeight()||0;"on"===e?(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"top"===o?(i.cssBefore.top=-1*a+"px",i.cssAfter.top=n.y):(i.cssBefore.bottom=window.innerHeight+"px",i.cssAfter.bottom=n.y)):"off"===e&&(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"top"===o?i.cssAfter.top=-1*a+"px":i.cssAfter.bottom=window.innerHeight+"px"),this.transit(i)},t.prototype.slideLeft=function(t,e,n,r){var i=$.extend(!0,this.defaults,n),o=n.xProperty||"left";i.element=t,i.onComplete=r||function(){};var a=$(t).outerWidth()||0;"on"===e?(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"left"===o?(i.cssBefore.left=-1*a+"px",i.cssAfter.left=n.x):(i.cssBefore.right=window.innerWidth+"px",i.cssAfter.right=n.x)):"off"===e&&(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"left"===o?i.cssAfter.left=-1*a+"px":i.cssAfter.right=window.innerWidth+"px"),this.transit(i)},t.prototype.slideBottom=function(t,e,n,r){var i=$.extend(!0,this.defaults,n),o=n.yProperty||"top";i.element=t,i.onComplete=r||function(){};var a=$(t).outerHeight()||0;"on"===e?(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"top"===o?(i.cssBefore.top=window.innerHeight+"px",i.cssAfter.top=n.y):(i.cssBefore.bottom=-1*a+"px",i.cssAfter.bottom=n.y)):"off"===e&&(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"top"===o?i.cssAfter.top=window.innerHeight:i.cssAfter.bottom=-1*a),this.transit(i)},t.prototype.slideRight=function(t,e,n,r){var i=$.extend(!0,this.defaults,n),o=n.xProperty||"left";i.element=t,i.onComplete=r||function(){};var a=$(t).outerWidth()||0;"on"===e?(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"left"===o?(i.cssBefore.left=window.innerWidth+"px",i.cssAfter.left=n.x):(i.cssBefore.right=-1*a+"px",i.cssAfter.right=n.x)):"off"===e&&(i.cssBefore={display:"block",opacity:1},i.cssAfter={},"left"===o?i.cssAfter.left=window.innerWidth:i.cssAfter.right=-1*a),this.transit(i)},t.prototype.growTop=function(t,e,n,r){var i=$(t).outerHeight(),o=$.extend(!0,this.defaults,n);o.element=t,o.onComplete=r||function(){},"on"===e?(o.cssBefore={height:0,display:"block",opacity:1},o.cssAfter={height:i}):"off"===e&&(o.cssBefore={display:"block",opacity:1},o.cssAfter={height:0}),this.transit(o)},t.prototype.growBottom=function(t,e,n,r){var i=$(t).outerHeight(),o=$.extend(!0,this.defaults,n);o.element=t,o.onComplete=r||function(){},"on"===e?(o.cssBefore={top:"+="+i,height:0,display:"block",opacity:1},o.cssAfter={height:i,top:"-="+i}):"off"===e&&(o.cssBefore={display:"block",opacity:1},o.cssAfter={height:0,top:"+="+i}),this.transit(o)},t.prototype.growCentre=function(t,e,n,r){var i=$(t).outerWidth()||0,o=$(t).outerHeight()||0,a=n.xProperty||"left",s=n.yProperty||"top",c=$.extend(!0,this.defaults,n);c.element=t,c.onComplete=r||function(){},"on"===e?(c.cssBefore={width:0,height:0,display:"block",opacity:1},c.cssAfter={width:i,height:o},"left"===a&&(c.cssBefore.left="+="+i/2,c.cssAfter.left="-="+i/2),"top"===s&&(c.cssBefore.top="+="+o/2,c.cssAfter.top="-="+o/2)):"off"===e&&(c.cssBefore={display:"block",opacity:1},c.cssAfter={width:0,height:0},"left"===a&&(c.cssAfter.left="+="+i/2),"top"===s&&(c.cssAfter.top="+="+o/2)),this.transit(c)},t.prototype.growBR=function(t,e,n,r){var i=$(t).outerWidth(),o=$(t).outerHeight(),a=n.xProperty||"left",s=n.yProperty||"top",c=$.extend(!0,this.defaults,n);c.element=t,c.onComplete=r||function(){},"on"===e?(c.cssBefore={width:0,height:0,display:"block",opacity:1},c.cssAfter={width:i,height:o},"left"===a&&(c.cssBefore.left="+="+i,c.cssAfter.left="-="+i),"top"===s&&(c.cssBefore.top="+="+o,c.cssAfter.top="-="+o)):"off"===e&&(c.cssBefore={display:"block",opacity:1},c.cssAfter={width:0,height:0},"left"===a&&(c.cssAfter.left="+="+i),"top"===s&&(c.cssAfter.top="+="+o)),this.transit(c)},t.prototype.scaleUp=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={"transform-origin":"50% 50%",transform:"translate(0,20px) scale(0.95)",display:"block",opacity:0},i.cssAfter={transform:"translate(0,0) scale(1)",opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={transform:"translate(0,-20px) scale(0.95)",opacity:0}),this.transit(i)},t.prototype.scaleDown=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={"transform-origin":"50% 50%",transform:"translate(0,-20px) scale(0.95)",display:"block",opacity:0},i.cssAfter={transform:"translate(0,0) scale(1)",opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={transform:"translate(0,20px) scale(0.95)",opacity:0}),this.transit(i)},t.prototype.scaleRight=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={"transform-origin":"50% 50%",transform:"translate(-20px,0) scale(0.95)",display:"block",opacity:0},i.cssAfter={transform:"translate(0,0) scale(1)",opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={transform:"translate(20px, 0) scale(0.95)",opacity:0}),this.transit(i)},t.prototype.scaleLeft=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={"transform-origin":"50% 50%",transform:"translate(20px,0) scale(0.95)",display:"block",opacity:0},i.cssAfter={transform:"translate(0,0) scale(1)",opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={transform:"translate(-20px, 0) scale(0.95)",opacity:0}),this.transit(i)},t.prototype.twist=function(t,e,n,r){var i=$.extend(!0,this.defaults,n);i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={transform:"rotate(-75deg)",display:"block",opacity:0},i.cssAfter={transform:"rotate(0)",opacity:1}):"off"===e&&(i.cssBefore={},i.cssAfter={transform:"rotate(-75deg)",opacity:0}),this.transit(i)},t.prototype.floatUp=function(t,e,n,r){var i=$.extend(!0,this.defaults,n),o=n.yProperty||"top",a=$(t).position().top;n.y&&(a=(n.y+"").indexOf("%")>-1?Math.round(parseInt(n.y,10)/100*window.innerHeight):"string"==typeof n.y?parseInt(n.y,10):n.y),i.element=t,i.onComplete=r||function(){},"on"===e?(i.cssBefore={display:"block",opacity:0},i.cssAfter={opacity:1},"top"===o?(i.cssBefore.top=a+50+"px",i.cssAfter.top=a+"px"):(i.cssBefore.bottom=a-50+"px",i.cssAfter.bottom=a+"px")):"off"===e&&(i.cssBefore={display:"block",opacity:1},i.cssAfter={opacity:0},"top"===o?i.cssAfter.top=a-50+"px":i.cssAfter.bottom=a+50+"px"),this.transit(i)},t.prototype.transit=function(t){var e=$.extend(!0,{},this.defaults,t);e.speed=e.speed>this.ANIM_MS_THRESHOLD?e.speed/1e3:e.speed,!0===e.killTweens&&TweenLite.killTweensOf(e.element);var n=$(e.element).css(e.cssBefore);TweenLite.to(n,e.speed,{css:e.cssAfter,ease:e.ease,onComplete:e.onComplete,onUpdate:e.onUpdate})},t}(),Wy=function(){function t(){this.shortcodes={}}return t.prototype.add=function(t){var e=t.tag,n=t.callback;return void 0===this.shortcodes[e]&&(this.shortcodes[e]=n,!0)},t.prototype.remove=function(t){return void 0!==this.shortcodes[t]&&(delete this.shortcodes[t],!0)},t.prototype.parseShortcodes=function(t){var e=this;return Object.keys(this.shortcodes).forEach((function(n){var r=e.shortcodes[n],i=[],o=[],a=null;["\\["+n+"(.*?)?\\](.*)?\\[\\/"+n+"\\]","\\["+n+"(.*?)?\\]"].forEach((function(e){for(a=new RegExp(e,"g");null!==(i=a.exec(t));)o.push(i)}));var s=0;o.forEach((function(e){var n={},i="";if(e[1]){if(void 0===$("<div "+e[1]+"></div>")[0])return;for(var o=$("<div "+e[1]+"></div>")[0].attributes,a=0;a<o.length;a++)n[o[a].name]=o[a].value}e[2]&&(i=(e[2]||"").trim());var c=e.index+s,u=r(n,i),l=e[0].length;t=t.substring(0,c)+u+t.substring(c+l),s+=u.length-l}))})),t},t}(),Yy=function(t){return[{name:"activityTitle",replacement:function(){return t.config.moduleTitle}},{name:"courseTitle",replacement:function(){return t.config.moduleTitle}},{name:"moduleTitle",replacement:function(){return t.config.moduleTitle}},{name:"currentItemTitle",replacement:function(e,n){return void 0===e||null===t.config.stepData[e].currentContent?n||"":t.config.stepData[e].currentContent.title}},{name:"currentItemNumber",replacement:function(e,n){return void 0===e||null===t.config.stepData[e].currentContent?n||"":t.config.stepData[e].currentContent.number}},{name:"currentItemContent",replacement:function(e){return void 0===e||null===t.config.stepData[e].currentContent?"":t.config.stepData[e].currentContent.content}},{name:"currentStepGroupName",replacement:function(e){if(void 0===e)return"";var n=t.config.stepGroups[t.config.stepData[e].group];return n?n.name:""}},{name:"currentGroupName",replacement:function(e){if(void 0===e)return"";var n=t.config.stepGroups[t.config.stepData[e].group];return n?n.name:""}},{name:"currentStep",replacement:function(t){return void 0===t?"":t+""}},{name:"currentPage",replacement:function(t){return void 0===t?"":t+""}},{name:"stepTitle",replacement:function(e){return void 0===e?"":t.config.stepData[e].title}},{name:"pageTitle",replacement:function(e){return void 0===e?"":t.config.stepData[e].title}},{name:"totalSteps",replacement:function(){return t.config.totalSteps+""}},{name:"totalPages",replacement:function(){return t.config.totalSteps+""}},{name:"quizScorePercent",replacement:function(){return t.config.totalScore+""}},{name:"studentFullName",replacement:function(){return""===t.config.studentName&&(t.config.studentName=t.core.runModuleFunction("reporting","getStudentName"),t.config.studentName=t.config.studentName?t.config.studentName:"Lastname, Firstname"),t.config.studentName.split(",").map((function(t){return t.trim()})).reverse().join(" ")}},{name:"studentFirstName",replacement:function(){return""===t.config.studentName&&(t.config.studentName=t.core.runModuleFunction("reporting","getStudentName"),t.config.studentName=t.config.studentName?t.config.studentName:"Lastname, Firstname"),(t.config.studentName.split(",")[1]||"").trim()}},{name:"studentLastName",replacement:function(){return""===t.config.studentName&&(t.config.studentName=t.core.runModuleFunction("reporting","getStudentName"),t.config.studentName=t.config.studentName?t.config.studentName:"Lastname, Firstname"),(t.config.studentName.split(",")[0]||"").trim()}},{name:"studentID",replacement:function(){return""===t.config.studentID&&(t.config.studentID=t.core.runModuleFunction("reporting","getStudentID"),t.config.studentID=t.config.studentID?t.config.studentID:"Student123"),t.config.studentID.split(", ").reverse().join(" ")}}]},Ky=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),Zy=void 0===window.CredentailsContainer&&5===navigator.maxTouchPoints&&0===navigator.plugins.length&&"MacIntel"===navigator.platform;!function(t){t.SYSTEM="sys",t.USER="user"}(jy||(jy={})),function(t){t.COMPLETED="completed",t.INCOMPLETE="incomplete",t.PASSED="passed",t.FAILED="failed"}(qy||(qy={})),function(t){t[t.C_I=0]="C_I",t[t.P_F=1]="P_F",t[t.P_I=2]="P_I"}(zy||(zy={})),function(t){t.DEV="dev",t.PROD="prod"}(By||(By={})),function(t){t.V1="1",t.V2="2",t.V3="3",t.V4="4",t.V5="5"}(Fy||(Fy={})),function(t){t.NORMAL="navmodeNormal",t.LINHIST="navmodeLinhist",t.BRANCH="navmodeBranch"}(Uy||(Uy={})),function(t){t.SLIDE="slide",t.SLIDE_ONLY="slideonly",t.COMPLETION_POINT="completionpoint",t.SLIDES_COMPLETE="slidescomplete",t.QUIZ="quiz",t.DECLARATION="declaration"}($y||($y={})),function(t){t.STANDARD="std",t.HIGHCONTRAST="hc",t.BLACKWHITE="bw"}(Vy||(Vy={})),function(t){t.TEXT="text"}(Hy||(Hy={})),function(t){t.ALL="all",t.SCORED="scored",t.UNSCORED="unscored",t.FAILEDSCORED="failedscored",t.FAILEDUNSCORED="failedunscored"}(Gy||(Gy={}));var Xy,Jy={STATUS_MODE_C_I:zy.C_I,STATUS_MODE_P_F:zy.P_F,STATUS_MODE_P_I:zy.P_I,STATUS_COMPLETED:qy.COMPLETED,STATUS_INCOMPLETE:qy.INCOMPLETE,STATUS_PASSED:qy.PASSED,STATUS_FAILED:qy.FAILED,COLOUR_MODE_STANDARD:Vy.STANDARD,COLOUR_MODE_HIGHCONTRAST:Vy.HIGHCONTRAST,COLOUR_MODE_BLACKWHITE:Vy.BLACKWHITE,REGEXP_SRC:/(src|srcset)\s*=\s*['"]([^'"]+)['"]/gi,REGEXP_HREF:/href\s*=\s*['"]([^'"]+)['"]/gi},tb=function(){function t(e){$v(this,t),this.printHeader="",this.printables=[],this.config=e.config}return Hv(t,[{key:"hasPages",value:function(t,e){var n,r;if(t&&t.length){for(e=e||!1,n=(r=t.length)-1;n>=0;n--)if(void 0!==this.printables[t[n]]&&""!==this.printables[t[n]]){if(!e)return!0;t.pop()}return e&&!t.length}for(r=this.printables.length,n=0;n<r;n++)if(void 0!==this.printables[n]&&""!==this.printables[n])return!0;return!1}},{key:"addPage",value:function(t){this.printables.push(t)}},{key:"updatePage",value:function(t,e,n){this.printables[t]=!0===n?this.printables[t]+e:e}},{key:"removePage",value:function(t){this.printables[t]=""}},{key:"getPage",value:function(t){return this.printables[t]}},{key:"setPrintHeader",value:function(t){this.printHeader=t+"<br/>"}},{key:"printAll",value:function(){var t,e,n=this.printables.length,r=[];if(n<1)return!1;for(t=0;t<n;t++)void 0!==this.printables[t]&&""!==this.printables[t]&&r.push(this.printables[t]);return!(r.length<1)&&(e=this.replaceVariableKeywords(this.printHeader)+"<br/>"+r.join("<hr style='page-break-before:always' />"),this.printing.print(e))}},{key:"printPage",value:function(t){var e;return(void 0!==this.printables[t]||""!==this.printables[t])&&(e=this.replaceVariableKeywords(this.printHeader)+"<br/>"+this.printables[t],this.printing.print(e))}},{key:"printPages",value:function(t){for(var e=[],n=0;n<t.length;n++)void 0!==this.printables[t[n]]&&""!==this.printables[t[n]]&&e.push(this.printables[t[n]]);return!!e.length&&this.printing.print(this.replaceVariableKeywords(this.printHeader)+"<br/>"+e.join("<hr/>"))}},{key:"print",value:function(t){var e,n=this,r="",i=(""+window.location).split("shell.html")[0];return"string"==typeof t&&(e=window.open(),r="<link rel='stylesheet' href='"+i+"css/print.css' /><style> a[href]:after {content:' (' attr(href) ')';} * {font-family: 'Arial', Helvetica, sans-serif;}.noPrint {display:none;}</style>",r+="<div>"+t+"</div>",e.document.title=$("<div>"+this.config.moduleTitle+"</div>").text(),r=r.replace(Jy.REGEXP_SRC,(function(t){if(-1===t.indexOf("http://")&&-1===t.indexOf("https://")){if(t.indexOf("global:")>-1)return'src="'+i+n.config.globalPath+encodeURI(t.substring(13,t.length-1))+'"';if(t.indexOf("project:")>-1)return'src="'+i+encodeURI(t.substring(13,t.length-1))+'"';var e=n.shell.core.extractFilePathInfo(t.substring(5,t.length-1)),r=n.shell.core.getAssetPath(e.filename,e.path);return 0!==r.indexOf("http")?'src="'+i+r+'"':'src="'+r+'"'}return t})),$("body",e.document).append(r),$(".noPrint",e.document).remove(),setTimeout((function(){e.print()}),100),!0)}}]),t}(),eb=function(){function t(t){this.modifiers=[],this.modifiers.push(function(t){return{name:"gotoStep",execute:function(e){Array.from(e.find("a[rel=goto],button[rel=goto]")).map((function(t){return $(t)})).forEach((function(e){switch(e.off("click").on("click",(function(e){e.preventDefault();var n=$(e.currentTarget).attr("href")||"",r="true"===$(e.currentTarget).data("force");switch((""+n).toLowerCase()){case"next":t.core.nextStep();break;case"previous":t.core.previousStep();break;default:t.core[r?"forceGotoStep":"gotoStep"](t.config.stepIDMap[n]||n)}})),e.data("style")){case"link":break;case"button":default:e.addClass("goto-link focus noTapSelection")}}))}}}(t)),this.modifiers.push({name:"scrollable",execute:function(t){Array.from(t.find("[class*='scrollable']")).forEach((function(t){t.addEventListener("touchmove",(function(t){return t.stopPropagation()}),!0)}))}})}return t.prototype.add=function(t,e){this.modifiers.push({name:t,execute:e})},t.prototype.executeOn=function(t){return this.modifiers.forEach((function(e){try{e.execute(t)}catch(t){alert("Error running execute() on text modifier: "+e.name+". See error in console."),console.log(t)}})),t},t}();!function(t){t.PASSED="passed",t.FAILED="failed",t.NEUTRAL="neutral"}(Xy||(Xy={}));var nb,rb=function(){function t(t){this.quizzes={},this.quizResults={},this.shell=t}return t.prototype.addQuiz=function(t,e){this.quizzes[t]=e},t.prototype.getNewResultObject=function(t,e,n,r,i){return{enabled:!0,quizid:n,scoreid:t,datasetid:i,scored:e||!1,n:-1,id:"SPARK-INT-"+t,type:"",percent:-1,weight:void 0!==r?r:1,result:"",response:"",time:0,latency:0,name:"",description:"",correctResponsesPattern:"",choices:[],finished:!1}},t.prototype.createResultSlot=function(t,e,n,r,i){n=n||"default",this.quizzes[n]||(this.quizzes[n]={id:n,name:n,weight:1,includeInTotal:!0,passRate:80,pre:!1,questions:0,attempts:0,currentAttempt:1}),this.quizResults[n]||(this.quizResults[n]={results:{},datasets:{}}),this.quizResults[n].datasets[i]=!0;var o=this.getNewResultObject(t,e,n,r,i);this.quizResults[n].results[t]=o,this.quizzes[n].questions+=1;var a=0;for(var s in this.quizResults)if(this.quizResults.hasOwnProperty(s))for(var c in this.quizResults[s].results)this.quizResults[s].results.hasOwnProperty(c)&&this.quizResults[s].results[c].scored&&(this.quizResults[s].results[c].n=a,a++)},t.prototype.enableSlot=function(t,e){this.quizResults[t]&&this.quizResults[t].results[e]&&!0!==this.quizResults[t].results[e].enabled&&(this.quizResults[t].results[e].enabled=!0,this.shell.config.totalScore=this.getScore())},t.prototype.disableSlot=function(t,e){this.quizResults[t]&&this.quizResults[t].results[e]&&!1!==this.quizResults[t].results[e].enabled&&(this.quizResults[t].results[e].enabled=!1,this.shell.config.totalScore=this.getScore())},t.prototype.saveResult=function(t,e,n){this._saveResult(t,e,n),this.shell.core.runModuleFunction("reporting","setStateData"),this.shell.core.runModuleFunction("reporting","save")},t.prototype.saveResults=function(t,e){var n=this;e.forEach((function(e){var r=e.scoreid,i=e.result;return n._saveResult(t,r,i)})),this.shell.core.runModuleFunction("reporting","setStateData"),this.shell.core.runModuleFunction("reporting","save")},t.prototype._saveResult=function(t,e,n){if(t=t||"default",this.quizResults[t]&&this.quizResults[t].results[e]){var r=this.quizResults[t].results[e].scored;this.quizResults[t].results[e].type=n.type||"",this.quizResults[t].results[e].percent=void 0!==n.percent?n.percent:100,this.quizResults[t].results[e].weight=n.weight||1,this.quizResults[t].results[e].result=n.result||"",this.quizResults[t].results[e].response=n.response||"",this.quizResults[t].results[e].time=n.time||0,this.quizResults[t].results[e].latency=n.latency||0,this.quizResults[t].results[e].name=n.name||"",this.quizResults[t].results[e].description=n.description||"",this.quizResults[t].results[e].correctResponsesPattern=n.correctResponsesPattern||"",this.quizResults[t].results[e].choices=n.choices,this.quizResults[t].results[e].finished=n.finished||!1,this.shell.core.runModuleFunction("reporting","setInteraction",this.quizResults[t].results[e]),this.shell.observer.notify(this.shell.events.QUIZ_QUESTION_ANSWER,{quizid:t,scoreid:e,results:this.quizResults[t].results[e]});var i=this.getNumQuestions(t),o=this.allQuizQuestionsAnswered(t),a=this.getStatus(t);if(r&&o&&this.quizzes[t].pre&&a===Xy.PASSED){var s=this.quizzes[t].pre;this.quizzes[t].includeInTotal=!0,"string"==typeof s&&this.quizResults[s]&&(this.quizzes[s].includeInTotal=!1)}var c=this.getScore();if(this.shell.config.totalScore=c,r&&(this.shell.core.runModuleFunction("reporting","setScore",Math.round(c)),o)){var u="false"!==this.quizzes[t].pre&&!!this.quizzes[t].pre;i>0&&this.shell.observer.notify(this.shell.events.QUIZ_FINISH,{quizid:t,status:a,ispreassessment:u,preassessmentto:u?this.quizzes[t].pre:""})}}else console.warn("shell.js resultManager.saveResult - unable to save, result slot has not been created for quizid: "+t+", scoreid: "+e)},t.prototype.allQuizQuestionsAnswered=function(t,e){if(void 0===t&&(t="default"),void 0===e&&(e=!1),!this.quizResults[t]||!this.quizResults[t].results)return!1;for(var n in this.quizResults[t].results)if(this.quizResults[t].results.hasOwnProperty(n)){var r=this.quizResults[t].results[n];if(r.enabled&&(e||r.scored)&&!r.finished)return!1}return!0},t.prototype.allQuizzesComplete=function(){var t=0,e=0;for(var n in this.quizResults)this.quizResults[n]&&(t++,this.allQuizQuestionsAnswered(n)&&e++);return t===e},t.prototype.getScoreByID=function(t,e){if(void 0===e){if(void 0===(e=this.findQuizIdFromResultId(t)))return}else e=e||"default";if(this.quizResults[e]&&this.quizResults[e].results[t])for(var n in this.quizResults[e].results)if(this.quizResults[e].results.hasOwnProperty(n)&&n===t){var r=this.quizResults[e].results[n].percent;return-1===r?0:r}},t.prototype.getResponseByID=function(t,e){if(void 0===e){if(void 0===(e=this.findQuizIdFromResultId(t)))return}else e=e||"default";if(this.quizResults[e]&&this.quizResults[e].results[t])for(var n in this.quizResults[e].results)if(n===t){var r=this.quizResults[e].results[n].response;return r||"not answered"}},t.prototype.getStatus=function(t){return this.quizzes[t]?this.getScore(t)>=this.quizzes[t].passRate?Xy.PASSED:Xy.FAILED:null},t.prototype.getAttempts=function(t){return this.quizzes[t]?{maxAttempts:this.quizzes[t].attempts,currentAttempt:this.quizzes[t].currentAttempt}:null},t.prototype.getScore=function(t){var e=function(t,e){return t.indexOf(e)>-1},n="__all__";t=t||n,Array.isArray(t)||(t=[t]);var r={};for(var i in this.quizResults)if(this.quizResults[i])for(var o in this.quizResults[i].results)if(this.quizResults[i].results.hasOwnProperty(o)&&this.quizResults[i].results[o].scored&&this.quizResults[i].results[o].enabled&&(e(t,n)||e(t,i))){if(r[i]||(r[i]={result:0,total:0}),this.quizResults[i].results[o].percent>-1){var a=1;this.quizResults[i].results[o].weight&&(a=this.quizResults[i].results[o].weight),r[i].result+=this.quizResults[i].results[o].percent*a}r[i].total+=100}var s=0,c=0;for(var u in r)if(r.hasOwnProperty(u)){if(e(t,n)&&!this.quizzes[u].includeInTotal)continue;var l=this.quizzes[u].weight;s+=r[u].result*l,c+=r[u].total*l}if(c>0){var f=s/c*100;return f=Math.round(100*f)/100}return 0},t.prototype.getNumQuestions=function(t,e){var n=this;return void 0===e&&(e=!1),this.quizResults[t]?Object.keys(this.quizResults[t].results).reduce((function(r,i){return e?r+1:r+(n.quizResults[t].results[i].scored?1:0)}),0):0},t.prototype.reset=function(t,e){var n=this;void 0===t&&(t=Gy.ALL),void 0===e&&(e=!0),Object.keys(this.quizzes).forEach((function(r){return n.resetQuiz(r,t,e)}))},t.prototype.resetQuiz=function(t,e,n){void 0===e&&(e=Gy.SCORED),void 0===n&&(n=!1);var r=[];if(this.quizzes[t]&&(n?this.quizzes[t].currentAttempt=1:this.quizzes[t].currentAttempt+=1),this.quizResults[t]){for(var i in this.quizResults[t].results)if(this.quizResults[t].results.hasOwnProperty(i)){var o=this.quizResults[t].results[i].scoreid,a=this.quizResults[t].results[i].scored,s=this.quizResults[t].results[i].quizid,c=this.quizResults[t].results[i].weight,u=this.quizResults[t].results[i].datasetid,l=this.quizResults[t].results[i].result,f=!1;switch(e){case"all":f=!0;break;case"failedscored":f="wrong"===l&&a;break;case"unscored":f=!a;break;case"failedunscored":f="wrong"===l&&!a;break;case"scored":default:f=a}f&&(-1===r.indexOf(this.quizResults[t].results[i].datasetid)&&r.push(this.quizResults[t].results[i].datasetid),this.quizResults[t].results[i]=this.getNewResultObject(o,a,s,c,u))}for(var d=0;d<r.length;d++)this.shell.config.dataSets[r[d]]&&"function"==typeof this.shell.config.dataSets[r[d]].reset&&this.shell.config.dataSets[r[d]].reset(e);this.shell.observer.notify(this.shell.events.QUIZ_RESET,{quizid:t})}},t.prototype.getResumeData=function(){var t=null,e={wrong:0,correct:1,neutral:2};for(var n in this.quizResults)if(this.quizResults.hasOwnProperty(n)){var r=!1,i={};for(var o in this.quizzes.hasOwnProperty(n)&&void 0!==this.quizzes[n].currentAttempt&&(i.a=this.quizzes[n].currentAttempt,r=!0),this.quizResults[n].results){var a=this.quizResults[n].results[o];a.percent<=-1||(i[o]=[a.percent,a.response,e[a.result],a.finished?1:0],r=!0)}r&&(t||(t={}),t[n]=i)}return t||""},t.prototype.setResumeData=function(t){if(t){var e=["wrong","correct","neutral"];for(var n in t)if(t.hasOwnProperty(n)&&(this.quizzes[n]&&t[n].a&&(this.quizzes[n].currentAttempt=t[n].a),this.quizResults[n]))for(var r in t[n])if("a"!==r&&this.quizResults[n].results[r]){var i=t[n][r];void 0!==i[0]&&(this.quizResults[n].results[r].percent=i[0]),void 0!==i[1]&&(this.quizResults[n].results[r].response=i[1]),void 0!==i[2]&&(this.quizResults[n].results[r].result=e[i[2]]),void 0!==i[3]&&(this.quizResults[n].results[r].finished=1===i[3])}this.shell.config.totalScore=this.getScore()}},t.prototype.findQuizIdFromResultId=function(t){for(var e in this.quizResults)for(var n in this.quizResults[e].results)if(n===t)return e},t.prototype.findStepFromResultId=function(){console.warn("Result manager: findStepFromResultId has been removed. Scored no longer stored on step. Use findQuizIdFromResultId.")},t.prototype.getQuizById=function(t){return this.quizzes[t]},t.prototype.getPreQuizIds=function(){var t=this;return Object.keys(this.quizzes).filter((function(e){return!!t.quizzes[e].pre}))},t}();!function(t){t.INITIAL="initial",t.FAILED="failed",t.PASSED="passed"}(nb||(nb={}));var ib,ob=function(){function t(t){this.observer=t.observer,this.events=t.events,this._locked=!0,this.objectives={}}return t.prototype.getObjectiveById=function(t){return this.objectives[t]},t.prototype.getObjectives=function(){return this.objectives},t.prototype.getNewContributorObject=function(t,e){return{objid:t,cmpid:e.uid,component:e,status:nb.INITIAL}},t.prototype.addObjective=function(t){var e=t.id,n=t.name,r=t.status,i=t.passrate;this.objectives[e]={id:e,name:n,status:r,passrate:i,progress:0,contributors:{}}},t.prototype.addObjectiveContributor=function(t,e){if(t){this.objectives[t]||this.addObjective({id:t,name:"Objective "+t,status:nb.FAILED,passrate:100});var n=this.getNewContributorObject(t,e);this.objectives[t].contributors[n.cmpid]=n}},t.prototype.getObjectiveStatus=function(t){return t?this.objectives[t]?this.objectives[t].status:(alert("Objective error: attempted to get the status of an objective that no longer exists in the course."),null):null},t.prototype.updateObjectiveContributors=function(t,e,n){if(t&&e&&n)for(var r=0;r<e.length;r++)this.updateObjectiveContributor(e[r].objective,t,{status:n})},t.prototype.updateObjectiveContributor=function(t,e,n){this.objectives[t].contributors[e].status=n.status||nb.INITIAL;var r=this.updateObjective(t);r.prevprogress!==r.progress&&this.observer.notify(this.events.OBJECTIVE_PROGRESS,{objective:t,prevprogress:r.prevprogress,progress:r.progress})},t.prototype.updateObjective=function(t){var e=this.objectives[t],n=0,r=0;for(var i in e.contributors){if(e.contributors.hasOwnProperty(i))n++,e.contributors[i].status===nb.PASSED&&r++}var o=r/n*100;o=Math.min(Math.max(0,o),100);var a=e.status,s=e.progress;return e.status=o>=e.passrate?nb.PASSED:nb.FAILED,e.progress=o,a!==e.status&&e.status===nb.PASSED&&this.observer.notify(this.events.OBJECTIVE_COMPLETE,{objective:t,prevstatus:a,status:e.status,prevprogress:s,progress:e.progress}),{prevstatus:a,status:e.status,prevprogress:s,progress:e.progress}},t.prototype.reset=function(){var t=this;this._locked=!0,Object.keys(this.objectives).forEach((function(e){return t.resetObjective(e)}))},t.prototype.resetObjective=function(t){this.objectives[t].status=nb.FAILED,this.objectives[t].progress=0,Object.values(this.objectives[t].contributors).forEach((function(t){t.status=nb.FAILED}))},t.prototype.getObjectivesLocked=function(){return this._locked},t.prototype.unlockObjectives=function(){this._locked=!1},t.prototype.lockObjectives=function(){this._locked=!0},t.prototype.getResumeData=function(){var t=null,e={failed:0,passed:1};for(var n in this.objectives)if(this.objectives.hasOwnProperty(n)){var r=!1,i=void 0;this.objectives[n].progress>0&&(r=!0,i={p:this.objectives[n].progress,s:e[this.objectives[n].status||nb.FAILED]}),r&&(t||(t={}),t[n]=i)}return t&&(t.l=this._locked?1:0),t||""},t.prototype.setResumeData=function(t){if(t&&"string"!=typeof t){var e=[nb.FAILED,nb.PASSED];for(var n in t)"l"!==n&&this.objectives[n]&&t.hasOwnProperty(n)&&(this.objectives[n].progress=t[n].p,this.objectives[n].status=e[t[n].s]||e[0]);this._locked=0!==t.l}},t}(),ab=function(){function e(t){this.shell=t,this.handlebarstext=[],"Handlebars"in window&&this.setupHandlebars()}return e.prototype.forceUpdate=function(){this.helpersHandler()},e.prototype.setupHandlebars=function(){var t=this,e=this;Handlebars.registerHelper("settext",(function(t,n){return e.hb_helper_settext(t,n,this)})),Handlebars.registerHelper("translate",(function(e){return t.hb_helper_translate(e)})),Handlebars.registerHelper("ifequal",(function(e,n,r){return t.hb_helper_ifequal(e,n,r)})),Handlebars.registerHelper("ifnotequal",(function(e,n,r){return t.hb_helper_ifnotequal(e,n,r)}));var n=this.shell.events,r=n.PAGE_STRUCTURE_CHANGED,i=n.COMPONENTS_ADDED_TO_DOM;this.shell.observer.add(i,(function(){return t.helpersHandler()})),this.shell.observer.add(r,(function(){return t.helpersHandler()}))},e.prototype.helpersHandler=function(){if(this.handlebarstext.length)for(var t=this.handlebarstext.length-1;t>=0;t--){var e=$("[data-textid='"+this.handlebarstext[t].id+"']");if(e.length){if(this.handlebarstext[t].text){var n=$("<span class='innerText'></span>");this.shell.core.setText(n,this.handlebarstext[t].text,{dynamicvariables:this.handlebarstext[t].dynamicvariables}),e.replaceWith(n)}else e.remove();this.handlebarstext.splice(t,1)}}},e.prototype.hb_helper_settext=function(e,n,r){if("string"!=typeof e)return"";var i=this.shell.utils.simpleUid();return this.handlebarstext.push({id:i,text:e,dynamicvariables:t(t({},n.data.root.dynamicvariables),r.dynamicvariables)}),"<div class='handlebars-text-replace' data-textid='"+i+"'></div>"},e.prototype.hb_helper_translate=function(t){return this.shell.core.getTranslation(t)},e.prototype.hb_helper_ifequal=function(t,e,n){return t==e?n.fn(this):n.inverse(this)},e.prototype.hb_helper_ifnotequal=function(t,e,n){return t!=e?n.fn(this):n.inverse(this)},e}(),sb=function(t){var e=t.xml,n=t.onProgress,r=t.onFile;return new Promise((function(t){var i=[],o=Array.from(e.find("file")),a=o.length,s=[];function c(t,e){return t.findIndex((function(t){return t.src.substring(0,t.src.lastIndexOf("."))===e}))}if(!a)return n(a),t();o.forEach((function(t){var e=$(t);i.push({src:e.attr("src"),resolution:parseFloat(e.attr("resolution")||"1")})}));for(var u={},l=0;l<i.length;l++)if(i[l].resolution>1){var f=i[l].src.split("@")[0];if(!u[f]){u[f]={files:[]};var d=c(i,f);d>-1&&u[f].files.push({file:i[d],index:d,resolution:i[d].resolution})}u[f].files.push({file:i[l],index:l,resolution:i[l].resolution})}if("matchMedia"in window)for(var p in u){u[p].files=u[p].files.sort((function(t,e){return t.resolution-e.resolution}));for(var h=!1,g=u[p].files.length-1;g>=0;g--){var v=u[p].files[g].file.resolution,m=window.matchMedia("(-webkit-min-device-pixel-ratio: "+v+"),(min-device-pixel-ratio: "+v+"),(min-resolution: "+96*v+"dpi),(min-resolution: "+v+"dppx)");h||!m.matches?s.push(u[p].files[g].index):h=!0}}else for(var p in u)for(g=0;g<u[p].files.length;g++)s.push(u[p].files[g].index);for(l=s.length-1;l>=0;l--)i.splice(s[l],1);var y=new createjs.LoadQueue(!0);y.addEventListener("progress",(function(t){return n(t.loaded*a)})),y.addEventListener("fileload",(function(t){return r(t)})),y.addEventListener("complete",(function(e){return y.removeAllEventListeners(),n(a),void t()})),y.addEventListener("error",(function(e){return y.removeAllEventListeners(),console.error("A preload error occurred. Make sure file listed in preload.xml exist in the course of project."),n(a),void t()})),y.loadManifest(i)}))};!function(t){t.INTRO="intro",t.MD="md",t.IT="it",t.RO="ro",t.AST="ast"}(ib||(ib={}));var cb=function(){function t(t){this.isInit=!1,this.loadProgress=0,this.loadtasks=[],this.ignoreCMPAttrs=["cmp","group","x","y","duration","bg","completionpoint","uid","nextsteptarget","indexed","locknext","lockback","retainscroll"],this.shell=t,this.parserExtensions=[]}return t.prototype.addParser=function(t){this.parserExtensions.push(t)},t.prototype.reset=function(){this.isInit=!1,this.loadProgress=0,this.shell.config.totalSteps=0,this.shell.config.currentStep=-1,this.shell.config.lastViewedStep=-1,this.shell.config.stepIDMap={},this.shell.config.resources=[],this.shell.config.stepData=[],this.shell.config.stepGroups={length:0},this.shell.config.dataSets={},this.shell.config.declarationsChecked={},this.shell.config.moduleSettings={},this.shell.config.extraData={},this.shell.config.history={currentLocation:0,steps:[]}},t.prototype.load=function(){return e(this,void 0,void 0,(function(){var t,e,r,i,o,a,s=this;return n(this,(function(n){switch(n.label){case 0:if(t=this.shell,e=t.config,r=t.events,i=r.INIT_LOAD_START,!0===this.isInit)throw new Error("Course already initialised.");return this.isInit=!0,this.shell.observer.notify(i,{progress:0}),void 0!==e.urlVars.authid&&((o=e.urlVars.authid).startsWith("https://")?(e.dataPath=decodeURI(o)+"/",e.globalPath="../../../../../"+e.dataPath.split("/").slice(3,-5).join("/")+"/~common/assets/"):(e.dataPath="activitydata/"+decodeURI(o)+"/",e.globalPath=e.globalAuthortimePath)),this.loadtasks=["lang",0,1,"preload",0,1,"data",0,1,"templates",0,1],[4,Promise.all([this.loadSuspendData(),this.loadPreload().then((function(t){return t?s.preloadAssets(t):Promise.resolve()})),this.loadLanguages()])];case 1:a=n.sent()[0];try{e.initialSuspendData=a}catch(t){e.initialSuspendData=null}return[4,Promise.all([this.loadHTMLTemplates(),this.loadCourseData()])];case 2:return n.sent(),this.getResources(),[2]}}))}))},t.prototype.loadSuspendData=function(){var t=this;return new Promise((function(e){!0===t.shell.utils.hasModule("reporting")?t.shell.core.runModuleFunction("reporting","getStateData",[function(t,n){e(n||"")}]):e("")}))},t.prototype.loadLanguages=function(){return e(this,void 0,void 0,(function(){var t,e,r,i,o;return n(this,(function(n){switch(n.label){case 0:t=this.shell.config.defaultLanguage,e=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetch("data/language.js")];case 2:return r=n.sent(),e=JSON.parse(r),[3,4];case 3:return i=n.sent(),console.log(i),console.log("Course loader: No language data found. Attempting to load "+t),[3,4];case 4:return null!==e?this.applyLanguages(e.defaultLanguage,e.supports,e.translations):this.applyLanguages(t),[4,this.getSavedLanguage()];case 5:return(o=n.sent())&&(o=this.shell.utils.parseLangString(o),this.shell.config.supportedLanguages.includes(o)&&(this.shell.config.language=o)),this.setDocumentWritingMode(this.shell.config.language),this.updateProgress("lang",1),[2]}}))}))},t.prototype.getSavedLanguage=function(){var t=this;return new Promise((function(e){t.shell.utils.hasModule("reporting")?t.shell.core.runModuleFunction("reporting","getLanguage",[function(t,n){return e(n||"")}]):e("")}))},t.prototype.setDocumentWritingMode=function(t){document.documentElement.lang=t.toLowerCase().split("_")[0]||"en",this.isRTLLang(t)?document.documentElement.classList.add("lang-rtl"):document.documentElement.classList.remove("lang-rtl")},t.prototype.applyLanguages=function(t,e,n){if(null===this.shell.config.language){this.shell.config.language=t;var r=this.shell.config.urlVars;void 0!==r.lang&&(this.shell.config.language=r.lang),n&&Object.keys(n).length&&(this.shell.config.translation=n),e&&e.length>0?this.shell.config.supportedLanguages=e:this.shell.config.supportedLanguages=[t]}},t.prototype.isRTLLang=function(t){void 0===t&&(t="en_AU");return["ar","ara","arc","ae","ave","egy","he","heb","nqo","pal","phn","sam","syc","syr","fa","per","fas","ku","kur"].includes(t.toLowerCase().split("_")[0])},t.prototype.loadHTMLTemplates=function(){return e(this,void 0,Promise,(function(){var t,e,r,i,o,a,s,c=this;return n(this,(function(n){switch(n.label){case 0:return t=this.shell.config,e=t.components,r=t.environment,(i=[]).push(this.fetchHTML("templates/templates.html")),r!==By.PROD&&(o=[],Object.keys(e).filter((function(t){return"_super"!==t})).forEach((function(t){c.loadtasks[c.loadtasks.indexOf("templates")+2]+=2,o.push(c.fetchHTML("../../../../global/components/cmp_"+t+"/cmp_"+t+".hbs")),o.push(c.fetchHTML("components/cmp_"+t+"/cmp_"+t+".html"))})),i=i.concat(o)),[4,Promise.all(i)];case 1:return a=n.sent(),(s=a.shift()||"")&&this.shell.core.addHTMLTemplates(s),a.forEach((function(t,e){e%2==0?c.shell.core.addHTMLTemplates(t,!0):c.shell.core.addHTMLTemplates(t)})),this.checkLoadProgress(),[2]}}))}))},t.prototype.loadPreload=function(){return e(this,void 0,Promise,(function(){var t,e,r;return n(this,(function(n){switch(n.label){case 0:t=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetch("data/preload.xml")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[2,null];case 4:return e=$(t),(r=e.find("file")).length?(this.loadtasks[this.loadtasks.indexOf("preload")+2]=r.length,[2,e]):(this.updateProgress("preload",1),[2,null])}}))}))},t.prototype.preloadAssets=function(t){return e(this,void 0,void 0,(function(){var e=this;return n(this,(function(n){switch(n.label){case 0:return t?[4,sb({xml:t,onProgress:function(t){e.updateProgress("preload",t)},onFile:function(t){e.shell.config.preloadAssetCache[t.item.src]=t.result}})]:[2];case 1:return n.sent(),[2]}}))}))},t.prototype.loadCourseData=function(){return e(this,void 0,void 0,(function(){var t,e;return n(this,(function(n){switch(n.label){case 0:t=this.shell.config.language,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetch(this.shell.core.getAssetPath("data.xml","data/"+t))];case 2:return e=n.sent(),[3,4];case 3:throw n.sent(),new Error("Data is not available for the requested language.");case 4:return this.parseComponentsXML(e),this.updateProgress("data",1),[2]}}))}))},t.prototype.getResources=function(){var t=this,e=this.shell.config,n=e.stepData,r=e.resources;n.reduce((function(t,e){return t.concat(e.resources)}),[]).forEach((function(e){if(e.src){var n=t.getResourceIndex(e);-1===n?r.push(e):r[n].step+=" "+e.step}}))},t.prototype.fetch=function(t,e){return void 0===e&&(e=!1),new Promise((function(n,r){$.ajax({url:t,dataType:"text",cache:e}).done((function(t){n(t)})).fail((function(t){if("parsererror"===t.responseText)return r(new Error("There is a JSON error in the language.js file."));r(t)}))}))},t.prototype.fetchHTML=function(t){return e(this,void 0,Promise,(function(){var e;return n(this,(function(n){switch(n.label){case 0:e="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.fetch(t)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return this.updateProgress("templates",this.loadtasks[this.loadtasks.indexOf("templates")+1]+1),[2,e]}}))}))},t.prototype.parseComponentsXML=function(t){var e=this,n=$.parseXML(t),r=$(n).find("module"),i=this.shell.config,o=this.shell.utils.getNodeAttributesAsObject(r[0],!0);i.moduleTitle=o.moduleTitle,i.moduleID=o.moduleId||"0",i.lockout=!0===o.lockout,i.scormCommit=!1!==o.scormcommit&&i.scormCommit,i.globalPass=void 0===o.globalPass?i.globalPass:o.globalPass,i.scoreType=o.scoreType||i.scoreType,i.navigationMode=o.navMode||i.navigationMode,i.compressSuspendData=!1!==o.compressSuspendData,i.statusMode=o.statusMode||0,i.negativeMarking=!0===o.negativeMarking,i.theme=o.theme||"",i.disableskip=!0===o.disableSkip,i.rememberPageHistory=!1!==o.rememberPageHistory,i.enableIntro=!1!==o.enableIntro;var a=r.find("> themeconfig")[0];i.themeconfig=a?this.shell.utils.getNodeAttributesAsObject(a,!0):{},i.references=JSON.parse(r.find("> references").text()||"[]"),i.references.unshift({buffer:"",uid:"-",text:""}),i.glossary=JSON.parse(r.find("> glossary").text()||"[]"),i.glossary.forEach((function(t){var e="g"+(t.matchCase?"":"i"),n="text"===t.type&&t.matchWord?"\\b":"";t.find=new RegExp(""+n+t.find+n,e)})),this.shell.core.printing.updatePage(0,"",!1),Array.from(r[0].attributes).forEach((function(t){i.moduleSettings[t.name]=t.value})),Array.from(r.find("> extras").find("> *")).forEach((function(t){var e=$(t)[0],n=e.nodeName;i.extraData[n]={text:$(t).text(),attributes:{}},Array.from(e.attributes).forEach((function(t){i.extraData[n].attributes[t.name]=t.value}))})),window.document.title=$("<div>"+i.moduleTitle+"</div>").text(),i.theme&&$("html").addClass("theme-"+i.theme);var s=Array.from(r.find("groups > group"));s.length>0?s.map((function(t){return $(t)})).forEach((function(t,e){var n=t.attr("id")+"";i.stepGroups[n]={index:e,id:n,name:t.attr("name")||"",visited:!1,complete:!1,enabled:"true"===t.attr("enabled")},i.stepGroups.length+=1})):(i.stepGroups.default={index:0,id:"default",name:"Main",visited:!0,complete:!1,enabled:!0},i.stepGroups.length=1);var c=Array.from(r.find("quizzes > quiz"));c.length>0&&c.map((function(t){return $(t)})).forEach((function(t){var n=t.attr("id");n&&e.shell.core.resultManager.addQuiz(n,{id:t.attr("id")||"",name:t.attr("name")||"",weight:parseFloat(t.attr("weight")||"1"),pre:t.attr("pre")||!1,passRate:parseFloat(t.attr("passrate")||"80"),includeInTotal:"false"!==t.attr("includeintotal"),attempts:parseInt(t.attr("attempts")||"0",10),currentAttempt:1,questions:0})}));var u=Array.from(r.find("objectives > objective"));u.length>0&&u.map((function(t){return $(t)})).forEach((function(t){var n=t.attr("id");n&&e.shell.core.objectiveManager.addObjective({id:n,name:t.attr("name")||"",status:"failed",passrate:100})}));var l=Array.from(r.find("resources > resource"));l.length>0&&l.map((function(t){return $(t)})).forEach((function(t){var n=t.attr("src");n&&e.shell.core.addResource({src:n,name:t.attr("name")||n,category:t.attr("category")||"none",step:t.attr("page")||""})})),Array.from(r.find("> swatches").find("swatch")).map((function(t){return $(t)})).forEach((function(t){var e=t.attr("uid");if(e){var n=t.attr("value")||"",r=t.attr("name")||"";i.swatches[e]={value:n,name:r,uid:e}}})),Array.from(r.find("> expressions").find("expression")).map((function(t){return $(t)})).forEach((function(t){var e=t.text(),n=new Function("val","return ( "+e+" )");if("js"===t.attr("type")){var r=t.attr("name");r&&(i.expressions[r]=n)}})),Array.from(r.find("> variables").find("variable")).map((function(t){return $(t)})).forEach((function(t){var n=t.attr("name");if(n){var r=t.attr("initialValue")||"",o=t.attr("type")||"string";if("sys"===t.attr("type"))i.sysVariableUserSet[n]=e.shell.utils.guessType(r);else if(i.userVariables[n]=r,e.shell.utils.hasModule("dataBinding")){var a=new(0,e.shell.core.modules.dataBinding.BindableElementData)(n),s=t.attr("getter"),c=t.attr("setter");void 0!==c&&""!==c&&a.defineSetter(i.expressions[c]),void 0!==s&&""!==s&&a.defineGetter(i.expressions[s]),a.set("value",i.userVariables[n]),a.initialValue=r,a.valueType=o,i.userVariables[n]=a}}}));var f=Array.from(r.find("> page"));i.totalSteps=f.length-1;var d=f.shift();this.parseIntroXML($(d)),f.forEach((function(t,n){var r=e.createStepFromNode({id:n+1,node:$(t)});i.stepData[n+1]=r,void 0!==r.stepOptions.id&&(i.stepIDMap[r.stepOptions.id]=n+1),e.parseCMPXML($(t),n+1)}));var p=r.find("> datasets");this.parseDatasetXML($(p)),this.parseDatasetChildComponents(),this.parserExtensions.forEach((function(t){return t(r,i)}))},t.prototype.parseIntroXML=function(t){var e=this.shell.utils.getNewStepData();if(e.id=0,e.uniqueDiv="cmp0",e.type=ib.INTRO,e.title=t.attr("title")||this.shell.core.getTranslation("Introduction"),e.template=t.attr("cmp")||"introduction",e.indexed="true"===(t.attr("indexed")||"true"),e.group=t.attr("group")||"0",e.visited=!0,e.complete=!e.template.startsWith("modular_"),e.classList=t.attr("classlist")||"",e.xml=t,e.references=(t.attr("references")||"").split(",").filter((function(t){return""!==t})),t.attr("actions")){var n=t.attr("actions")||"{}";try{e.actions.push({element:"#cmp0",uid:"intropage",actions:JSON.parse(n)})}catch(t){console.log(t),console.log(n)}}this.shell.config.stepData[0]=e},t.prototype.parseCMPXML=function(t,e){var n=this;if(this.shell.config.stepData[e].id=e,this.shell.config.stepData[e].uniqueDiv="cmp"+e,this.shell.config.stepData[e].xml=t,this.shell.config.stepData[e].step=this.parseStepData(this.shell.config.stepData[e].type,t),this.shell.config.stepData[e].references=(t.attr("references")||"").split(",").filter((function(t){return""!==t})),this.shell.config.stepData[e].resources=[],this.shell.config.stepData[e].actions=[],this.shell.core.printing.updatePage(e,"",!1),t.find("modulesettings").find("> *").each((function(t,r){var i=$(r).get(0),o=i.nodeName;n.shell.config.stepData[e].moduleSettings[o]={text:$(r).text(),attributes:{}},$.each(i.attributes,(function(t,r){n.shell.config.stepData[e].moduleSettings[o].attributes[r.name]=r.value}))})),t.attr("actions")){var r=t.attr("actions")||"{}";try{this.shell.config.stepData[e].actions.push({element:"#cmp"+e,uid:this.shell.config.stepData[e].stepOptions.id||e,actions:JSON.parse(r)})}catch(t){console.log(t),console.log(r)}}},t.prototype.parseDatasetXML=function(t){for(var e,n,r,i=this.shell.config,o=t.find("dataset"),a=0;a<o.length;a++)if(r=(e=$(o[a])).attr("type"),n=e.attr("uid"),r&&n)if(r=r.toLowerCase(),i.datasetParsers[r]&&void 0!==i.datasetParsers[r].parse){var s=null;"function"==typeof i.datasetParsers[r].parse?s=i.datasetParsers[r].parse(o[a]):"function"==typeof i.datasetParsers[r].parse.main&&(s=i.datasetParsers[r].parse.main(o[a])),s&&(i.dataSets[n]=new i.datasetParsers[r].control(s))}else console.log("Shell.js::parseDatasetXML - no dataset parser found for type: ["+r+"]");else console.log("Shell.js::parseDatasetXML - Dataset is missing 'type' or 'uid' props.")},t.prototype.parseDatasetChildComponents=function(){for(var t,e,n=this.shell.config,r=0,i=Object.values(n.dataSets);r<i.length;r++){var o=i[r],a=o.type();n.datasetParsers[a].parse.multipass&&("function"==typeof(null===(t=n.datasetParsers[a].parse)||void 0===t?void 0:t.childComponents)&&(null===(e=n.datasetParsers[a].parse)||void 0===e||e.childComponents(o)))}},t.prototype.createStepFromNode=function(t){var e=this,n=t.node,r=t.id,i=this.shell.utils.getNewStepData();(i.title=n.attr("title")||"",i.template=n.attr("cmp")||"standard_md",i.guid=n.attr("uid")||""+r,i.group=n.attr("group")||"0",i.isCompletionPoint="true"===n.attr("completionpoint"),i.background=n.attr("bg")||null,i.nextStepTarget=n.attr("nextsteptarget")||null,i.lockNext="true"===n.attr("locknext"),i.forceLockNext="true"===n.attr("forcelocknext"),i.lockBack="true"===n.attr("lockback"),i.forceLockBack="true"===n.attr("forcelockback"),i.indexed="false"!==n.attr("indexed"),i.retainScrollPos="true"===n.attr("retainscroll"),i.classList=n.attr("classlist")||"",i.transform.x=parseFloat(n.attr("x")||"0"),i.transform.y=parseFloat(n.attr("y")||"0"),i.time.duration=parseFloat(n.attr("duration")||"0"),i.labels=(n.attr("labels")||"").split(","),i.nextStepTarget)&&("["===i.nextStepTarget.charAt(0)?(i.nextStepTargets=JSON.parse(i.nextStepTarget),i.nextStepTargets&&i.nextStepTargets.length&&(i.nextStepTarget=i.nextStepTargets[0].page)):i.nextStepTargets=null);var o=i.template.split("_");i.type=o[o.length-1];var a=Array.from(n[0].attributes);return a.filter((function(t){return t.name.startsWith("gui-")})).forEach((function(t){i.gui[t.name.substring(4)]=e.shell.utils.guessType(t.value)})),a.filter((function(t){return!e.ignoreCMPAttrs.includes(t.name)})).forEach((function(t){return i.stepOptions[t.name]=t.value})),i},t.prototype.parseStepData=function(t,e){return this.shell.config.stepDataParsers[t]?this.shell.config.stepDataParsers[t](e):{}},t.prototype.getResourceIndex=function(t){return this.shell.config.resources.findIndex((function(e){return e.name===t.name&&e.src===t.src}))},t.prototype.getLoadProgress=function(){var t=this.loadtasks.filter((function(t){return"number"==typeof t}));return t.filter((function(t,e){return e%2==0})).reduce((function(t,e){return t+e}),0)/t.filter((function(t,e){return e%2==1})).reduce((function(t,e){return t+e}),0)},t.prototype.updateProgress=function(t,e){this.loadtasks[this.loadtasks.indexOf(t)+1]=e,this.checkLoadProgress()},t.prototype.checkLoadProgress=function(){var t=this.shell.events.INIT_LOAD_PROGRESS,e=this.getLoadProgress();e>this.loadProgress&&(this.loadProgress=e,this.shell.observer.notify(t,{progress:e}))},t}(),ub=function(){function t(t){this.shell=t}return t.prototype.getCourseState=function(){var t=this.shell.config,e=t.stepData,n=t.initialSuspendData,r=t.shellVersion,i=t.colourMode,o=t.audio,a=t.lockout,s=t.dataSets,c=t.stepGroups,u=t.navigationMode,l=t.rememberPageHistory,f=t.history,d=t.userVariables,p=t.compressSuspendData,h=t.compressionVersion,g=t.declarationsChecked,v={};if(n)try{v=JSON.parse(n)}catch(t){v={}}v.v=r,v.c={cm:i,a:o?1:0,lk:a?1:0},v.s=[];for(var m=0;m<e.length;m++){var y={};if(y.v=!0===e[m].visited?1:0,y.c=!0===e[m].complete?1:0,y.ln=!0===e[m].lockNext?1:0,y.lb=!0===e[m].lockBack?1:0,e[m].retainScrollPos&&(y.scx=e[m].scrollX,y.scy=e[m].scrollY),e[m].studentConfig&&Object.keys(e[m].studentConfig).length&&(y.sc=e[m].studentConfig),e[m].nextStepTarget&&(y.nt=e[m].nextStepTarget),e[m].component&&"function"==typeof e[m].component.getResumeData){var b=e[m].component.getResumeData();b&&(y.td=b)}v.s.push(y)}for(var _ in s)if(s[_].canSaveState()){var w=s[_].getResumeData();w&&(v.ds||(v.ds={}),v.ds[_]=w)}for(var E in this.shell.modules)if("function"==typeof this.shell.modules[E].getResumeData){var S=this.shell.modules[E].getResumeData();S&&(v.m||(v.m={}),v.m[E]=S)}for(var C in v.sg={},c)if("length"!==C&&c.hasOwnProperty(C)){var x=c[C];v.sg[C]=[!0===x.visited?1:0,!0===x.complete?1:0,!0===x.enabled?1:0]}if(u!==Uy.NORMAL&&l){v.hst=[];for(var T=0;T<f.steps.length;T++)v.hst.push(f.steps[T].step)}for(var O in d)d.hasOwnProperty(O)&&(v.vrs||(v.vrs={u:{}}),!0===this.shell.utils.hasModule("dataBinding")?v.vrs.u[O]=d[O].get("value"):v.vrs.u[O]=d[O]);for(var I in g)g.hasOwnProperty(I)&&(v.dcl||(v.dcl={}),v.dcl[I]=g[I]?1:0);var k=this.shell.core.resultManager.getResumeData();k?v.rslt=k:void 0!==v.rslt&&delete v.rslt;var A=this.shell.core.objectiveManager.getResumeData();for(var D in A?v.obj=A:void 0!==v.obj&&delete v.obj,this.shell.config.state)this.shell.config.state.hasOwnProperty(D)&&this.shell.config.state[D].persistent&&(v.st||(v.st=[]),v.st.push([D,this.shell.config.state[D].value,this.shell.config.state[D].resettable]));var P=JSON.stringify(v);return this.shell.config.initialSuspendData=P,p&&(P=this.shell.utils.suspendData.compress(P,h)),P},t.prototype.setCourseState=function(t){var e=this,n=this.shell.config.initialSuspendData;if(n&&t){var r;if("string"==typeof n){if("@"===t.charAt(0)&&(t=this.shell.utils.suspendData.inflate(t)),!t)return void(this.shell.config.initialSuspendData=null);try{r=JSON.parse(t)}catch(e){console.error("setCourseState: Error parsing JSON",t),r="error"}if("error"===r)return void(this.shell.config.initialSuspendData=null);this.shell.config.initialSuspendData=r}switch(r.v){case"1.2.0":r.c&&(this.shell.config.audio=1===r.c.a,this.shell.config.colourMode=r.c.cm||Jy.COLOUR_MODE_STANDARD,this.shell.config.lockout=r.c.lk||this.shell.config.lockout);for(var i=0;i<r.s.length;i++)if(void 0!==this.shell.config.stepData[i]&&(this.shell.config.stepData[i].visited=1===r.s[i].v,this.shell.config.stepData[i].lockNext=1===r.s[i].ln,this.shell.config.stepData[i].lockBack=1===r.s[i].lb,r.s[i].scx&&(this.shell.config.stepData[i].scrollX=r.s[i].scx),r.s[i].scy&&(this.shell.config.stepData[i].scrollY=r.s[i].scy),r.s[i].d&&(this.shell.config.stepData[i].data=r.s[i].d),r.s[i].sc&&(this.shell.config.stepData[i].studentConfig=r.s[i].sc),r.s[i].nt&&(this.shell.config.stepData[i].nextStepTarget=r.s[i].nt),1===r.s[i].c&&this.shell.core.setStepComplete(i),r.s[i].td)){var o=this.shell.config.stepData[i].component;o&&"function"==typeof o.setResumeData&&o.setResumeData(r.s[i].td)}if(r.ds)for(var a in r.ds)this.shell.config.dataSets[a]&&this.shell.config.dataSets[a].canSaveState()&&this.shell.config.dataSets[a].setResumeData(r.ds[a]);if(r.m)for(var s in r.m)this.shell.modules[s]&&"function"==typeof this.shell.modules[s].setResumeData&&this.shell.modules[s].setResumeData(r.m[s]);if(r.sg)for(var c in r.sg)if(this.shell.config.stepGroups[c]){var u=this.shell.config.stepGroups[c];u.visited=1===r.sg[c][0],u.complete=1===r.sg[c][1],u.enabled=1===r.sg[c][2]}if(r.hst)for(i=0;i<r.hst.length;i++)this.shell.config.history.steps.push({step:r.hst[i]});if(r.vrs&&r.vrs.u)for(var l in r.vrs.u)r.vrs.u.hasOwnProperty(l)&&this.shell.core.setUserVariable(l,r.vrs.u[l]);if(r.dcl)for(var f in r.dcl)r.dcl.hasOwnProperty(f)&&(this.shell.config.declarationsChecked[f]=1===r.dcl[f]);r.rslt&&this.shell.core.resultManager.setResumeData(r.rslt),r.obj&&this.shell.core.objectiveManager.setResumeData(r.obj),r.st&&r.st.forEach((function(t){var n=t[0],r=t[1],i=t[2];e.shell.config.state[n]={key:n,value:r,resettable:i,persistent:!0}}));break;case"1.1.0":r.c&&(this.shell.config.audio=1===r.c.a,this.shell.config.colourMode=r.c.cm||Jy.COLOUR_MODE_STANDARD,this.shell.config.lockout=r.c.lk||this.shell.config.lockout);for(i=0;i<r.s.length;i++)if(void 0!==this.shell.config.stepData[i]){if(this.shell.config.stepData[i].visited=1===r.s[i].vs,this.shell.config.stepData[i].studentConfig=r.s[i].scn,this.shell.config.stepData[i].nextStepTarget=r.s[i].nst,this.shell.config.stepData[i].lockNext=1===r.s[i].lkn,this.shell.config.stepData[i].lockBack=1===r.s[i].lkb,this.shell.config.stepData[i].data=r.s[i].dt,1===r.s[i].cm&&this.shell.core.setStepComplete(i),r.s[i].itm)for(var d=0;d<r.s[i].itm.length;d++)this.shell.config.stepData[i].step.items[d].enabled=1===r.s[i].itm[d].e;r.s[i].td&&"function"==typeof this.shell.config.stepData[i].component.setResumeData&&this.shell.config.stepData[i].component.setResumeData(r.s[i].td)}for(var a in r.ds)this.shell.config.dataSets[a]&&this.shell.config.dataSets[a].canSaveState()&&this.shell.config.dataSets[a].setResumeData(r.ds[a].r);for(var s in r.m)this.shell.modules[s]&&"function"==typeof this.shell.modules[s].setResumeData&&this.shell.modules[s].setResumeData(r.m[s]);if(r.hst)for(i=0;i<r.hst.length;i++)this.shell.config.history.steps.push({step:r.hst[i].s});if(r.vrs&&r.vrs.u)for(var l in r.vrs.u)r.vrs.u.hasOwnProperty(l)&&this.shell.core.setUserVariable(l,r.vrs.u[l]);if(r.qz)for(var p in r.qz)r.qz.hasOwnProperty(p)&&(this.shell.core.resultManager.getQuizById(p).currentAttempt=r.qz[p].a);r.rslt&&this.shell.core.resultManager.setResumeData(r.rslt),r.obj&&this.shell.core.objectiveManager.setResumeData(r.obj)}}},t}(),lb=function(){function t(t){this.shell=t}return t.prototype.nextPage=function(){var t=this.shell.config,e=t.stepData,n=t.currentStep,r=e[n].nextStepTarget;if(null!==r){if("string"==typeof r&&0===r.indexOf("group:")){var i=this.getFirstPageInGroup(r.substring(6));return void 0===i?n:i}var o=this.shell.utils.determineStepNumber(r);return void 0!==o?o:n}var a=this.getNextAvailablePage(n+1);return a!==n?a:n},t.prototype.previousPage=function(){var t=this.shell.config,e=t.navigationMode,n=t.currentStep,r=t.stepData,i=t.stepGroups,o=t.history,a=n;switch(e){case Uy.NORMAL:for(a=n-1;a>0&&r[a]&&!1===i[r[a].group].enabled;)a--;return a;case Uy.LINHIST:case Uy.BRANCH:if(o.steps.length>0)return o.steps.pop().step}return n},t.prototype.gotoPage=function(t){var e=this.shell.utils.determineStepNumber(t);return void 0!==e?e:this.shell.config.currentStep},t.prototype.lastViewedPage=function(){var t=this.shell.config.lastViewedStep;if(t>-1)return t},t.prototype.getHomePage=function(){return this.shell.config.enableIntro?0:1},t.prototype.getNextAvailablePage=function(t){void 0===t&&(t=0);for(var e=this.shell.config,n=e.totalSteps,r=e.stepGroups,i=e.stepData,o=Math.max(0,this.shell.config.currentStep),a=t,s=!1;a<n;){var c=r[i[a].group];if(!c||!1!==c.enabled)break;++a===n-1&&(s=!0)}return s?o:a},t.prototype.isNextPageAvailable=function(){var t=this.shell.config,e=t.stepData,n=t.currentStep,r=t.navigationMode,i=t.stepGroups,o=t.totalSteps,a=t.lockout,s=e[n];if(e[n].lockNext)return!1;var c,u=e[n].nextStepTarget;if(null!==u){var l=n;if(l="string"==typeof u&&u.startsWith("group:")?this.getFirstPageInGroup(u.substring(6)):this.shell.utils.determineStepNumber(u)){if(!e[l])return!1;if(i[e[l].group].enabled)return!0}}switch(r){case Uy.LINHIST:case Uy.NORMAL:for(c=n+1;c<=o;)if(i[e[c].group].enabled){if(!a)return!0;if(s.complete)return!0;c++}else c++;break;case Uy.BRANCH:for(c=n+1;c<=o;)if(e[n].group!==e[c].group)c++;else{if(!a)return!0;if(s.complete)return!0;c++}}return!1},t.prototype.isPreviousPageAvailable=function(){var t=this.shell.config,e=t.navigationMode,n=t.currentStep,r=t.stepGroups,i=t.stepData,o=t.history,a=this.getHomePage();switch(e){case Uy.NORMAL:return!!(n-1>=a&&r[i[n-1].group].enabled);case Uy.LINHIST:case Uy.BRANCH:return o.steps.length>0}return!1},t.prototype.nextGroup=function(){var t=this.shell.config,e=t.stepGroups,n=void 0,r=e[t.stepData[t.currentStep].group].index;for(var i in e)if("length"!==i&&e[i].index===r+1){n=i;break}return n},t.prototype.previousGroup=function(){var t=this.shell.config,e=t.stepGroups,n=void 0,r=e[t.stepData[t.currentStep].group].index;for(var i in e)if("length"!==i&&e[i].index===r-1){n=i;break}return n},t.prototype.gotoGroup=function(t){var e=this.shell.config.currentStep,n=this.getFirstPageInGroup(t);return void 0!==n?n:e},t.prototype.getFirstPageInGroup=function(t){var e=this.shell.config,n=e.stepData,r=e.stepGroups;if(r[t]&&r[t].enabled){var i=n.find((function(e){return e.group===t}));return i?i.id:void 0}},t}();function fb(t){return t.map((function(t){var e=t.component?t.component:t,n=[e.data.uid];return e.children&&(n=n.concat(fb(e.children))),n})).reduce((function(t,e){return r(e,t)}),[])}var db=function(){function t(t){this.shell=t,this.cache={},this.queue=[]}return t.prototype.clearCache=function(){this.cache={}},t.prototype.queueMountedComponents=function(t){this.queue=this.queue.concat(t)},t.prototype.notifyMountedComponents=function(){var t=this.shell,e=t.observer,n=t.events;e.notify(n.COMPONENTS_ADDED_TO_DOM,{components:r(this.queue)}),this.queue.length=0},t.prototype.render=function(t){var e,n,r,i,o=this,a=t.scope,s=t.renderid,c=t.pageid,u=t.domtarget,l=t.sectionsdata,f=t.resumedata,d=t.done,p=!1;a&&u.attr("data-cmpscope",a),this.cache[s]?(n=this.cache[s]).forEach((function(t){var e=t.element();!0===o.shell.core.checkDisplayConditions(t.getData().conditions).active?(t.load(),u.append(e)):(t.deactivate(),e.detach())})):(p=!0,e=this.renderToDom({resumedata:f,pageid:c,domtarget:u,sections:l,scope:a}),n=e[0],r=e[1],i=e[2],this.cache[s]=n);var h=this;setTimeout((function(){"function"==typeof d?(h.queueMountedComponents(fb(n)),d({initialRender:p,loadedSections:n,loadedBlocks:r,loadedComponents:i})):console.error("ComponentRenderer: No 'done' callback provided to render()")}),10)},t.prototype.renderToDom=function(t){var e=this,n=t.resumedata,r=t.pageid,i=t.domtarget,o=t.sections,a=t.scope,s=o.map((function(t){return e.renderSection({resumedata:n,pageid:r,domtarget:i,section:t})})),c=s.map((function(t){return t.pop()})).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return void 0!==t})),u=c.map((function(t){return t.pop()})).reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return void 0!==t})),l=s.reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return void 0!==t})),f=c.reduce((function(t,e){return t.concat(e)}),[]).filter((function(t){return void 0!==t})),d=this;return l.forEach((function(t,e){t.parent=function(){return{scope:a,parent:function(){return r},updateActiveChild:function(t){d.updateActiveChild(t,i,e?l.slice(0,e):[])}}}})),[l,f,u]},t.prototype.renderSection=function(t){var e=this,n=t.resumedata,r=t.pageid,i=t.domtarget,o=t.section;o.pageid=r;var a=this.shell.core.createSection(o.type||"section");this.shell.config.componentRegistry[o.uid]=a;var s=a.initialise(null,o,o.parentdata),c=o.children.map((function(t){return e.renderBlock({resumedata:n,pageid:r,parent:a,block:t})}));return!0===this.shell.core.checkDisplayConditions(o.conditions).active?(a.load(),a.isComplete(),i.append(s)):a.deactivate(),[a,c]},t.prototype.renderBlock=function(t){var e=t.resumedata,n=t.pageid,r=t.parent,i=t.block;i.pageid=n;var o=this.shell.core.createBlock(i.type);this.shell.config.componentRegistry[i.uid]=o,r.addBlock(null,o,i);var a=[];if(i.children)for(var s=0;s<i.children.length;s++){var c=i.children[s];a.push(this.renderComponent({resumedata:e,pageid:n,parent:o,component:c}))}return[{block:o,uid:i.uid},a]},t.prototype.renderComponent=function(t){var e=t.resumedata,n=t.pageid,r=t.parent,i=t.component;if(this.shell.core.hasComponent(i.type)){i.pageid=n;var o=this.shell.core.createComponent(i.type);return this.shell.config.componentRegistry[i.uid]=o,o&&(e[i.uid]&&o.setResumeData(e[i.uid]),r.addComponent(null,o,i)),{component:o,uid:i.uid}}},t.prototype.updateActiveChild=function(t,e,n){var r=t.getData(),i=this.shell.core.checkDisplayConditions(r.conditions),o=t.element();if(!0===i.active){if(!t.wrapper){var a=$("<div class='cmp_section'></div>");r.span&&a.attr("data-span",r.span),t.wrapper=a}if(n&&n.length){var s=n.map((function(t){return t.element()[0]})).filter((function(t){return!!t})).reverse().find((function(t){return document.body.contains(t)}));s?$(s).after(o):e.prepend(o)}else e.prepend(o);t.load()}else t.deactivate(),t.element().detach()},t}(),pb=["input","label[for]","select","button","textarea","a[href]","object[usemap]","iframe","object","embed","keygen","[contenteditable]","audio[controls]","video[controls]","[tabindex]"].join(", "),hb=function(){function t(t){var e=this;this.shell=t,this.inertElementStack=[],this.inertElementList=[],this.announcer=null,this.a11ybutton=this.getA11yButton(),this.focussableSelectors=pb,t.observer.add(t.events.STEP_READY,(function(){return e.filterDetachedElements()}))}return t.prototype.createAnnouncer=function(){var t=this;return new Promise((function(e){t.announcer=document.createElement("div"),t.announcer.setAttribute("aria-live","assertive"),t.announcer.style.cssText="height: 1px !important;\n        width: 1px !important;\n        padding: 0 !important;\n        border: 0 !important;\n        position: absolute !important;\n        clip: rect(1px, 1px, 1px, 1px);\n        clip-path: inset(1px 1px 1px 1px);\n        white-space: nowrap;\n        overflow: hidden;\n        opacity: 0;",document.body.appendChild(t.announcer),setTimeout(e,100)}))},t.prototype.announceMessage=function(t,r){return void 0===r&&(r={}),e(this,void 0,Promise,(function(){return n(this,(function(e){switch(e.label){case 0:return t?this.announcer?[3,2]:[4,this.createAnnouncer()]:[2];case 1:e.sent(),e.label=2;case 2:return this.shell.core.setText(this.announcer,t,{dynamicvariables:r}),[2]}}))}))},t.prototype.filterDetachedElements=function(){var t=this;this.inertElementList=this.inertElementList.filter((function(e){return!!e&&t.isInDOM(e.element)})),this.filterElementsFromStack((function(e){return!!e&&t.isInDOM(e.element)})),this.inertElementStack=this.inertElementStack.filter((function(t){return!!t.length}))},t.prototype.filterElementsFromStack=function(t){"function"==typeof t&&(this.inertElementStack=this.inertElementStack.map((function(e){return e.filter(t)})))},t.prototype.isInDOM=function(t){return t!==document.body&&document.body.contains(t)},t.prototype.getA11yButton=function(){return this.a11ybutton||document.querySelector("button.enable-accessibility")},t.prototype.makeModal=function(t){var e=this;if(t)if(t.parentElement===document.body){var n=[];Array.prototype.slice.call(document.body.children).forEach((function(r){if(r!==t&&r!==e.getA11yButton()){if(e.isFocussable(r)&&!e.isInert(r)){var i=e.makeInert(r);i&&n.push(i)}n=n.concat(e.makeChildrenInert(r))}})),this.inertElementStack.push(n)}else console.warn("A11y::makeModal element must be a direct child of <body>")},t.prototype.releaseModal=function(){var t=this,e=this.inertElementStack.pop();e&&e.forEach((function(e){return t.makeActive(e)}))},t.prototype.makeSubtreeInert=function(t){t&&(this.makeInert(t),this.makeChildrenInert(t))},t.prototype.makeSubtreeActive=function(t){t&&(this.makeActive(t),this.makeChildrenActive(t))},t.prototype.makeChildrenInert=function(t){var e=this;if(!t)return[];var n=t.querySelectorAll(this.focussableSelectors),r=[];return Array.prototype.slice.call(n).forEach((function(t){if(t!==e.getA11yButton()&&!e.isInert(t)){var n=e.makeInert(t);n&&r.push(n)}})),r},t.prototype.makeChildrenActive=function(t){var e=this;if(t){var n=t.querySelectorAll(this.focussableSelectors);Array.prototype.slice.call(n).forEach((function(t){return e.makeActive(t)}))}},t.prototype.makeInert=function(t){if(t){var e,n=this.inertElementList.findIndex((function(e){return e.element===t}));return(e=n>-1?this.inertElementList[n]:{tabindex:null,ariahidden:null,role:null,element:t}).tabindex=this.getTabIndex(t),e.ariahidden=t.getAttribute("aria-hidden"),e.role=t.getAttribute("role"),e.element=t,t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),this.inertElementList.push(e),e}},t.prototype.makeActive=function(t,e){if(void 0===e&&(e=!1),t){if(t instanceof HTMLElement||t instanceof SVGElement){var n=this.inertElementList.find((function(e){return e.element===t}));if(!n)return;t=n}var r=t.element,i=t.tabindex,o=t.ariahidden,a=t.role;null===i||e?r.removeAttribute("tabindex"):r.setAttribute("tabindex",""+i),null===o||e?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",o),null===a||e?r.removeAttribute("role"):r.setAttribute("role",a);var s=this.inertElementList.indexOf(t);s>-1&&this.inertElementList.splice(s,1),e&&this.filterElementsFromStack((function(t){return t.element!==r}))}},t.prototype.isInert=function(t){if(t){var e=this.getTabIndex(t);if(null!==e){var n=t.getAttribute("aria-hidden"),r=t.getAttribute("role");return-1===e&&"true"===n&&"presentation"===r}}},t.prototype.getTabIndex=function(t){if(!t)return null;var e=t.hasAttribute("tabIndex"),n=t.hasAttribute("tabindex");if(n||e){var r=parseInt(t.getAttribute(n?"tabindex":"tabIndex")||"",10);return isNaN(r)?null:r}return null},t.prototype.isFocussable=function(t){if(!t)return!1;var e=t.nodeName.toLowerCase();if("style"===e||"script"===e)return!1;if("input"===e||"select"===e||"button"===e||"textarea"===e)return!0;if("a"===e&&t.hasAttribute("href"))return!0;if("object"===e&&t.hasAttribute("usemap"))return!1;if("object"===e){var n=t.getAttribute("type");if("image/svg+xml"===n)return!1;if("application/x-shockwave-flash"===n)return!1}if("iframe"===e||"object"===e)return!0;if("embed"===e||"keygen"===e)return!0;if(t.hasAttribute("contenteditable"))return!0;if("audio"===e&&t.hasAttribute("controls"))return!0;if("video"===e&&t.hasAttribute("controls"))return!0;var r=t.hasAttribute("tabindex"),i=t.hasAttribute("tabIndex");if(!r&&!i)return!1;var o=t.getAttribute(r?"tabindex":"tabIndex")||"";return"-32768"!==o&&!isNaN(parseInt(o,10))},t}(),gb=0,vb=[],mb=function(t,e){var n=e.onUpdate;gb++;var r=function(t){var e=t.target;n({x:Math.floor(e.scrollLeft),y:Math.floor(e.scrollTop)})};return t.addEventListener("scroll",r),vb[gb]=[t,r],gb},yb=function(){function t(){this.checkers=[]}return t.prototype.addConditionCheck=function(t){this.checkers.push(t)},t.prototype.check=function(t){var e={active:!0};if(!t||!t.length)return e;for(var n=0;n<this.checkers.length;n++)if(!(e=this.checkers[n](t)).active)return e;return e},t}(),bb={eq:function(t,e){return t===e},noteq:function(t,e){return t!==e}};var _b,wb=function(){function e(t){this.shell=t,this.actionDictionary={},this.boundActionsDict={},this.intObservers=[]}return e.prototype.add=function(t,e){this.actionDictionary[t]=e},e.prototype.bindActions=function(e){var n=this,r=e.id,i=e.actions,o=e.parent,a=void 0===o?null:o,s={},c={},u={};i.length&&!this.boundActionsDict[r]&&(this.boundActionsDict[r]=[]);for(var l=0;l<i.length;l++){var f=i[l].actions;if(f)for(var d=i[l].uid,p=i[l].element,h=function(e){var r=d?""+d+l+"-"+e:"ax"+l+"-"+e,i=(f[e].on||"").split("|")[0],o=f[e].evtcond,h=f[e].action,v=f[e].actionoptions,m={id:r,event:y,action:h,once:f[e].once,options:t({element:p},v),element:p};if(i.startsWith("#")){var y=i.substring(1);m.event=y,c[y]||(c[y]=[]),c[y].push({id:r,type:"shell",element:p,event:y,eventCond:o,eventData:m})}else if(i.startsWith("@")){y=i.substring(1);m.event=y;var b=a?g.shell.utils.findScrollParent(a):null;b!==document.body&&b!==document.documentElement||(b=null);var _=g.intObservers.find((function(t){return t.root===b}));if(!_){var w=new IntersectionObserver((function(t,e){return n.handleIntersection(t,e)}),{rootMargin:g.shell.config.triggerRootMargin,root:b});_={root:b,intersectionObserver:w},g.intObservers.push(_)}u[y]||(u[y]=[]),u[y].push({id:r,type:"intersection",element:p,event:y,eventCond:o,eventData:m,observer:_})}else{var E=i+"@@"+p;s[E]||(s[E]=[]),s[E].push({id:r,type:"dom",element:p,event:i,eventCond:o,eventData:m})}},g=this,v=0;v<f.length;v++)h(v)}var m=function(t){if(s.hasOwnProperty(t)){var e=s[t],i=$(e[0].element),o=e[0].event;i.on(o,{actions:e},(function t(e){var r=e.data.actions,a=[];t:for(var s=0;s<r.length;s++){var c=r[s].eventData;if(r[s].eventCond)for(var u=Object.entries(r[s].eventCond),l=0;l<u.length;l++)if(e[u[l][0]]!==u[l][1])continue t;e.preventDefault(),e.stopPropagation(),n.actionDictionary[c.action](c),c.once&&a.push(s)}for(s=a.length-1;s>=0;s--)e.data.actions.splice(a[s],1);e.data.actions.length||i.off(o,t)})),y.boundActionsDict[r].push({id:t+Math.round(1e3*Math.random()),type:"dom",element:e.element,event:o})}},y=this;for(var b in s)m(b);var _=function(t){if(c.hasOwnProperty(t)){var e=c[t],o=t+"::"+i[0].uid;w.shell.observer.removeByID(t,o),w.shell.observer.add(t,(function(e,r){var i=r.actions,a=[];t:for(var s=0;s<i.length;s++){if(i[s].eventCond)for(var c=Object.entries(i[s].eventCond),u=0;u<c.length;u++)if(e[c[u][0]]!==c[u][1])continue t;var l=i[s].eventData;n.actionDictionary[l.action](l),l.once&&a.push(s)}for(s=a.length-1;s>=0;s--)r.actions.splice(a[s],1);r.actions.length||n.shell.observer.removeByID(t,o)}),{actions:e,id:o}),w.boundActionsDict[r].push({id:o,type:"shell",event:t})}},w=this;for(var b in c)_(b);for(var b in u)if(u.hasOwnProperty(b)){for(var E=u[b],S=b+"::"+i[0].uid,C=[],x=0;x<E.length;x++){var T=E[x].observer.intersectionObserver,O=$(E[x].element)[0];O.___actiondata___||(O.___actiondata___=[]),O.___actiondata___.push(E[x]),C.push(O),T.observe(O)}this.boundActionsDict[r].push({id:S,type:"intersection",event:b,elements:C})}},e.prototype.unbindActions=function(t){var e=t.id;if(this.boundActionsDict[e]){for(var n=0;n<this.boundActionsDict[e].length;n++)for(var r=this.boundActionsDict[e],i=0;i<r.length;i++){var o=r[i];if("shell"===o.type)this.shell.observer.removeByID(o.event,o.id);else if("dom"===o.type)$(o.element).off(o.event);else if("intersection"===o.type){for(var a=o.elements,s=this.intObservers.length-1;s>=0;s--){for(var c=this.intObservers[s].intersectionObserver,u=c.takeRecords(),l=u.length-1;l>=0;l--)a.includes(u[l].target)&&(c.unobserve(u[l].target),u.splice(l,1));u.length||(c.disconnect(),this.intObservers.splice(n,1))}a.forEach((function(t){return delete t.___actiondata___}))}}delete this.boundActionsDict[e]}},e.prototype.handleIntersection=function(t,e){var n=this;t.forEach((function(t){var r=t.target.___actiondata___;if(r)for(var i=0;i<r.length;i++)"inview"===r[i].event&&t.isIntersecting?(n.actionDictionary[r[i].eventData.action](r[i].eventData),r[i].eventData.once&&e.unobserve(t.target)):"outview"!==r[i].event||t.isIntersecting||(n.actionDictionary[r[i].eventData.action](r[i].eventData),r[i].eventData.once&&e.unobserve(t.target))}))},e}();!function(t){t.NOT_MANDATORY="not-mandatory",t.AUTO="auto",t.MANDATORY="mandatory"}(_b||(_b={}));var Eb=function(e){var n=this;this.parseXML=function(e,r,i){void 0===r&&(r=null),void 0===i&&(i={});var o=n.utils.getNodeAttributesAsObject(e,!0),a=$(e),s=a.find("> breakpoint");if(s.length){o._breakpoints={};for(var c=0;c<s.length;c++){var u=$(s[c]).attr("media");u&&(o._breakpoints[u]=n.parseXML(s[c],r,i))}}var l=a.find("> condition");if(o.conditions=Array.from(l).map((function(t){return n.utils.getNodeAttributesAsObject(t)})).map((function(t){return t.cond=(t.cond||"").split("::"),t.then=(t.then||"").split("::"),t.else=(t.else||"").split("::"),t})),o.conditions.forEach((function(t){"variable"===t.kind&&(n.config.variableConditionComponents[o.uid]=o)})),o.objectives&&(o.objectives=(o.objectives+"").split(",").map((function(t){return{objective:t}}))),a.find("> text").length>0?o.textcontent=a.find("> text").text():o.textcontent=a.text(),o.settings=n.utils.getNodeAttributesAsObject(a.find("> settings")[0],!0),i.savesquizresults&&!o.settings.quizid&&(o.settings.quizid="default"),"numquestions"===i.numscorableobjects&&(i.numscorableobjects=n.core.getDataset(o.dataset).getNumQuestions()),i.checkquizpool){delete i.checkquizpool;var f=n.core.getDataset(o.dataset);f&&"function"==typeof f.getMode&&"pool"===f.getMode()&&(o.scoreid=o.uid)}if("string"==typeof o.actions&&""!==o.actions)try{o.actions=[{element:"[data-uid='"+o.uid+"']",uid:o.uid,actions:JSON.parse(o.actions)}]}catch(t){console.log(t),console.log(o.actions)}var d=t(t({},o),i);if(void 0===d.mandatory)d.mandatory=_b.AUTO;else switch(d.mandatory){case"strict":case"mandatory":case!0:d.mandatory=_b.MANDATORY;break;case"not-mandatory":case!1:d.mandatory=_b.NOT_MANDATORY;break;case"auto":default:d.mandatory=_b.AUTO}return n.parseChildren(d,e),"function"==typeof r&&r(d,a),d},this.parseChildren=function(t,e){var r=$(e).find("> *").filter((function(){return/^cmp\./i.test(this.nodeName)}));if(r.length){t.children=[];for(var i=0;i<r.length;i++){var o=r[i].nodeName.split(".")[1],a=n.core.parseComponentData(o,r[i]);a&&(a.type=o,t.children.push(a))}}return t},this.utils=e.utils,this.core=e.core,this.config=e.config},Sb={small:"(max-width:575.98px)",medium:"(min-width:576px) and (max-width:991.98px)",large:"(min-width:992px)"},Cb=["overflow","position","width","height","minwidth","minheight","maxwidth","maxheight","margin","padding","x","y","z","left","right","top","bottom","perspective","transformstyle","rotate","scale","vheight","vwidth","background","backgroundimage","backgroundcolour","backgroundattachment","backgroundrepeat","backgroundsize","backgroundposition","align","textshadow","boxshadow","blendmode","border","bordertop","borderright","borderbottom","borderleft","borderradius","colour","color"],xb={};var Tb,Ob=Object.freeze({__proto__:null,namedQueries:Sb,addQuery:function(e,n,r,i,o){Sb[n]&&(n=Sb[n]);var a,s,c,u,l=Object.keys(r).filter((function(t){return"media"!==t&&!Cb.includes(t)}));if(l.length){var f=window.matchMedia(n);n=f.media,xb[e]?l.forEach((function(t){xb[e].defaultValues[t]||(xb[e].defaultValues[t]=i[t])})):xb[e]={id:e,media:[],defaultValues:l.reduce((function(t,e){return t[e]=i[e],t}),{}),handler:o,notifier:(a=function(){if(xb[e]){var n=xb[e],r=t({},n.defaultValues);n.media.forEach((function(t){t.query.matches&&Object.entries(t.values).forEach((function(t){var e=t[0],n=t[1];r[e]=n}))})),n.handler(r)}},void 0===s&&(s=100),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){u=null,c||a.apply(null,t)},r=c&&!u;clearTimeout(u),u=window.setTimeout(n,s),r&&a.apply(null,t)})};var d=function(t){xb[e].notifier()},p=l.reduce((function(t,e){return t[e]=r[e],t}),{});xb[e].media.push({media:n,query:f,listener:d,values:p}),f.addListener(d),f.matches&&xb[e].notifier()}},removeQuery:function(t,e){if(xb[t]){var n=window.matchMedia(e);e=n.media,xb[t].media=xb[t].media.filter((function(t){return t.media!==e||(t.query.removeListener(t.listener),!1)}))}}});!function(t){t.INIT="init",t.READY="ready",t.TRANSITION_STARTING="transition:starting",t.TRANSITION_PENDING="transition:pending",t.TRANSITION_FINISHING="transition:finishing"}(Tb||(Tb={}));var Ib=function(){function r(t){var e=this;this.shell=t,this.conditionsManager=new yb,this.componentRenderer=new db(t),this.shortcode=new Wy,this.textModifiers=new eb(t),this.resultManager=new rb(t),this.objectiveManager=new ob(t),this.printing=new tb(t),this.handlebars=new ab(t),this.courseLoader=new cb(t),this.actions=new wb(t),this.courseState=new ub(t),this.pageController=new lb(t),this.mediaQuery=Ob,this.a11y=new hb(t),this.isInit=!1,this.shellReady=!1,this.notifiedReady=!1,this.isFirstStep=!0,this.state=Tb.INIT,this.bodyScrollOffset=null,this.hideFSHandler=null,this.totalInitSteps=0,this.stepsInitted=0,this.objectDataCache={},this.shortcode.add({tag:"dir",callback:function(t){var n="";if(t.moduledata){for(var r=t.moduledata.split("."),i=e.config.extraData;r.length>0&&void 0!==i;)i=i[r[0]],r.length>=1&&r.splice(0,1);n=i||""}return n}}),this.conditionsManager.addConditionCheck(function(t){var e={ifany:function(t,e,r,i){for(var o=t.split(","),a=0;a<o.length;a++)if(bb[r](n[e](o[a]),i))return!0;return!1},ifall:function(t,e,r,i){for(var o=t.split(","),a=0,s=0;s<o.length;s++)bb[r](n[e](o[s]),i)&&a++;return a>=o.length}},n={status:function(e){return t.core.objectiveManager.getObjectiveStatus(e)}};return function(n){var r={active:!0};return n&&n.length&&t.core.objectiveManager.getObjectivesLocked()?(n.forEach((function(t){if("objective"===t.kind){var n=t.objective,i=t.cond,o=i[0],a=i[1],s=i[2],c=i[3],u=t.then,l=u[0],f=u[1],d=t.else,p=d[0],h=d[1],g=e[o](n,a,s,c);g&&f?r[l]="true"===f:!g&&h&&(r[p]="true"===h)}})),r):r}}(t)),this.conditionsManager.addConditionCheck(function(t){t.observer.add(t.events.USER_VARIABLE_CHANGED,(function(){var e=t.config;e.variableConditionComponents&&(Object.values(e.variableConditionComponents).forEach((function(t){var n=e.componentRegistry[t.uid];if(n){n.component?n=n.component:n.block?n=n.block:n.section&&(n=n.section);var r=n.parent(),i=function(t,e){var n=t.parent(),r=10;if(n.loaded)return!0;for(;"string"!=typeof n&&r<20;)r++,n="function"==typeof n.parent?n.parent():"notfound";return"string"==typeof n?n===e:n.loaded||!1}(n,e.stepData[e.currentStep].guid);"function"==typeof r.updateActiveChild&&i&&r.updateActiveChild(n)}})),t.observer.notify(t.events.PAGE_STRUCTURE_CHANGED,{trigger:t.events.USER_VARIABLE_CHANGED}))}));var e=function(e){return""+t.core.getVariable(e)},n={ifany:function(t,n,r){return bb[n](e(t),r)},ifall:function(t,n,r){return bb[n](e(t),r)}};return function(t){var e={active:!0};return t&&t.length?(t.forEach((function(t){if("variable"===t.kind){var r=t.cond,i=r[0],o=r[1],a=r[2],s=r[3],c=t.then,u=c[0],l=c[1],f=t.else,d=f[0],p=f[1],h=n[i](o,a,s);h&&l?e[u]="true"===l:!h&&p&&(e[d]="true"===p)}})),e):e}}(t)),this.conditionsManager.addConditionCheck(function(t){var e={ifany:function(e,n,r){return bb[n](""+t.config[e],r)},ifall:function(e,n,r){return bb[n](""+t.config[e],r)}};return function(t){var n={active:!0};return t&&t.length?(t.forEach((function(t){if("config"===t.kind){var r=t.cond,i=r[0],o=r[1],a=r[2],s=r[3],c=t.then,u=c[0],l=c[1],f=t.else,d=f[0],p=f[1],h=e[i](o,a,s);h&&l?n[u]="true"===l:!h&&p&&(n[d]="true"===p)}})),n):n}}(t))}return Object.defineProperty(r.prototype,"config",{get:function(){return this.shell.config},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"observer",{get:function(){return this.shell.observer},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){return this.shell.events},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"utils",{get:function(){return this.shell.utils},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"modules",{get:function(){return this.shell.modules},enumerable:!1,configurable:!0}),r.prototype.initialise=function(){var t=this;$("html").addClass("no-accessibility");var e=$("<button style='position:absolute;left:-9999px' tabindex='0' class='button-general enable-accessibility'>"+this.getTranslation("Turn on accessibility")+"</button>");$("body").prepend(e),$(e).on("click",(function(){t.config.accessibility=!t.config.accessibility,t.config.accessibility?($("html").removeClass("no-accessibility").addClass("accessibility"),e.text(t.getTranslation("Turn off accessibility")),$("[tabindex='0']")[0].focus(),t.observer.notify(t.events.A11Y_ON,{})):($("html").addClass("no-accessibility").removeClass("accessibility"),e.text(t.getTranslation("Turn on accessibility")),t.observer.notify(t.events.A11Y_OFF,{}))})),window.top!==window.self&&(this.config.isInIFrame=!0),this.config.environment=window.__spark_env||By.DEV,this.config.netOnline=navigator.onLine||!0,void 0!==window.addEventListener&&(window.addEventListener(this.events.OFFLINE,(function(){t.config.netOnline=!1,$("body").addClass("net-offline");var e=$("#notification").find(".notification-message");e.length||(e=$("#notification")),t.config.displayNetworkStatusMessages&&(e.text(t.config.netOfflineMessage),$("#notification").removeAttr("aria-hidden").fadeIn(150).delay(3e3).fadeOut(150)),t.observer.notify(t.events.OFFLINE,{})}),!1),window.addEventListener(this.events.ONLINE,(function(){t.config.netOnline=!0,$("body").removeClass("net-offline");var e=$("#notification").find(".notification-message");e.length||(e=$("#notification")),t.config.displayNetworkStatusMessages&&(e.text(t.config.netOnlineMessage),$("#notification").removeAttr("aria-hidden").fadeIn(150).delay(3e3).fadeOut(150)),t.observer.notify(t.events.ONLINE,{})}),!1),$(document).on("webkitfullscreenchange mozfullscreenchange MSFullscreenChange fullscreenchange",(function(){var e=t.utils.isFullScreen();$("body")[e?"addClass":"removeClass"]("fullscreen"),t.observer.notify(t.events.FULL_SCREEN_CHANGE,{isFullScreen:e})}))),this.startCourseLoad().catch((function(e){console.log(e),t.showLoadErrorMessage(e.message)}))},r.prototype.showLoadErrorMessage=function(t){void 0===t&&(t="Unable to load course.");var e=document.createElement("div");e.style.cssText="\n        position:absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        padding: 2rem;\n        background: #FFF;\n        box-shadow: 0 0 20px rgba(0,0,0,0.2);\n        text-align: center;\n        max-width: 350px;\n        z-index: 9999999;\n        border-radius: 10px;\n        color: #000;\n        ",e.innerHTML=t,document.body.appendChild(e)},r.prototype.startCourseLoad=function(){return e(this,void 0,void 0,(function(){var t,e,r,i,o=this;return n(this,(function(n){switch(n.label){case 0:return[4,this.courseLoader.load()];case 1:if(n.sent(),t=["colourmode-"+this.config.colourMode],this.config.isiPad&&t.push("device_ipad"),this.config.isiOS&&t.push("device_ios"),this.config.isAndroid&&t.push("device_android"),this.config.isInIFrame&&t.push("env_iframe"),$("html").addClass(t.join(" ")),this.totalInitSteps=this.config.totalSteps,this.stepsInitted=0,this.config.totalSteps)for(e=1;e<=this.config.totalSteps;e++)this.initialiseStep(e,(function(){return o.checkStepInitProgress()}));else this.applyPreviousState();if(this.config.stepData.some((function(t){return t.retainScrollPos}))){if(!(r=document.getElementById("shell")))return[2,console.log("Core::Error finding document scrolling element. 'Remember scroll position' setting may not work.")];(i=this.utils.findScrollParent(r))?mb(i,{onUpdate:this.utils.debounce((function(t){var e=t.x,n=t.y,r=o.config.stepData[o.config.currentStep];if(r.retainScrollPos){var i=o.utils.getElementInView();i?r.scrollY=i:(r.scrollX=e,r.scrollY=n),o.saveState()}}),350)}):console.log("Core::Error finding document scrolling element. 'Remember scroll position' setting may not work.")}return this.shellReady=!0,[2]}}))}))},r.prototype.startPageTimer=function(){this.config.timer.stepStart=Date.now()},r.prototype.checkStepInitProgress=function(){this.stepsInitted+=1,this.notifiedReady||this.totalInitSteps!==this.stepsInitted||this.applyPreviousState()},r.prototype.applyPreviousState=function(){var t=this.config,e=t.totalSteps,n=t.initialSuspendData,r=t.stepData;this.setCourseState(n);for(var i=0;i<e;i++)if(null!==r[i].component&&null!==n)try{r[i].component.applySuspendData()}catch(t){console.log("Error applySuspendData to step "+i),console.log(t)}this.notifyReady()},r.prototype.notifyReady=function(){this.config.disableskip||this.setKeyControls(),this.notifiedReady=!0,this.observer.notify(this.events.SHELL_READY,{}),this.observer.notify(this.events.INIT_LOAD_COMPLETE,{progress:1}),$("body").focus()},r.prototype.setKeyControls=function(){var t=this;$(document).off("keydown").on("keydown",(function(e){!0===e.ctrlKey&&!0===e.altKey&&!1===e.shiftKey?109===e.keyCode?(e.preventDefault(),t.displayPage(t.config.currentStep-1)):107===e.keyCode&&(e.preventDefault(),t.displayPage(t.config.currentStep+1)):!0===e.ctrlKey&&!0===e.altKey&&!0===e.shiftKey?85===e.keyCode&&(e.preventDefault(),t.config.lockout=!1):!0===e.shiftKey&&!1===e.ctrlKey&&!1===e.altKey&&116===e.keyCode&&e.preventDefault()}))},r.prototype.saveState=function(){this.config.ready&&this.runModuleFunction("reporting","setStateData",[this.getCourseState()]),!0===this.config.scormCommit&&this.runModuleFunction("reporting","save")},r.prototype.getNextAvailableStep=function(t){void 0===t&&(t=0);var e=t;if(t>this.config.totalSteps){t=this.config.totalSteps,e=(i=this.config.stepGroups[this.config.stepData[t].group])&&!1===i.enabled?this.pageController.getHomePage():t}else{for(var n=Math.max(0,this.config.currentStep),r=!1;e<this.config.totalSteps;){var i;if(!(i=this.config.stepGroups[this.config.stepData[e].group])||!1!==i.enabled)break;e===this.config.totalSteps&&(r=!0),e++}r&&(e=n)}return e},r.prototype.nextStep=function(){var t=this.pageController.nextPage();this.displayPage(t)},r.prototype.previousStep=function(){var t=this.pageController.previousPage();this.displayPage(t,!0,!1,!1)},r.prototype.lastViewedStep=function(){var t=this.pageController.lastViewedPage();void 0!==t&&this.displayPage(t,!0,!1,!1)},r.prototype.gotoStep=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0);var r=this.pageController.gotoPage(t);this.displayPage(r,e,!1,n)},r.prototype.forceGotoStep=function(t,e){void 0===e&&(e=!0),this.displayPage(t,e,!0)},r.prototype.nextGroup=function(){var t=this.pageController.nextGroup();void 0!==t&&this.gotoGroup(t)},r.prototype.previousGroup=function(){var t=this.pageController.previousGroup();void 0!==t&&this.gotoGroup(t)},r.prototype.gotoGroup=function(t,e){void 0===e&&(e=!0);var n=this.pageController.gotoGroup(t);this.displayPage(n,e)},r.prototype.getFirstStepInGroup=function(t){return this.pageController.getFirstPageInGroup(t)},r.prototype.gotoHome=function(){this.displayPage(0)},r.prototype.nextStepAvailable=function(){return this.pageController.isNextPageAvailable()},r.prototype.previousStepAvailable=function(){return this.pageController.isPreviousPageAvailable()},r.prototype.setStepComplete=function(t,e){var n=this.config.stepData[t].complete;e=e||!1,this.config.stepData[t].complete=!0,this.config.stepData[t].progress={raw:this.config.stepData[t].progress.total,total:this.config.stepData[t].progress.total,scaled:100},e&&!this.config.stepData[t].forceLockNext&&(this.config.stepData[t].lockNext=!1),this.checkGroupCompleted(this.config.stepData[t].group),!0!==n&&this.observer.notify(this.events.STEP_COMPLETED,{step:t,overrideLockNext:e,progress:100}),this.checkCompletion()&&this.setCourseComplete()},r.prototype.setCourseComplete=function(){if(!this.config.complete){window.__spark_env!==By.PROD&&console.log("%c Course complete!","color: green; font-weight: bold;");var t=!1,e=this.config.totalScore>=this.config.globalPass?qy.PASSED:qy.FAILED,n=qy.COMPLETED;this.config.complete=!0,this.utils.hasModule("reporting")&&(this.config.scoreType===$y.QUIZ&&this.shell.core.runModuleFunction("reporting","setSuccessStatus",e),this.runModuleFunction("reporting","setCompletionStatus",n),this.saveState(),t=!0),this.observer.notify(this.events.COURSE_COMPLETED,{status:n,completionStatus:n,successStatus:e,reported:t})}},r.prototype.setStepProgress=function(t,e,n){var r=this.config.stepData[t].progress;e=Math.min(n,e),r.raw!==e&&(this.config.stepData[t].progress={raw:e,total:n,scaled:Math.round(e/n*1e4)/100},this.observer.notify(this.events.STEP_PROGRESS,{step:t,progress:this.config.stepData[t].progress.scaled}))},r.prototype.refreshStep=function(t,e){},r.prototype.setGroupVisited=function(t){for(var e in t=""+t,this.config.stepGroups)if(e===t)return this.config.stepGroups[e].visited=!0,!0;return!1},r.prototype.checkGroupCompleted=function(t){if(t=""+t,this.config.stepGroups[t]){for(var e=!0,n=0;n<this.config.stepData.length;n++)if(this.config.stepData[n].group===t&&!this.config.stepData[n][this.config.lockout?"complete":"visited"]){e=!1;break}return this.config.stepGroups[t].complete=e,e}return!1},r.prototype.addDeclaration=function(t){void 0===this.config.declarationsChecked[t]&&(this.config.declarationsChecked[t]=!1)},r.prototype.getDeclarationChecked=function(t){return this.config.declarationsChecked[t]},r.prototype.checkDeclaration=function(t,e){void 0===e&&(e=!0),this.config.declarationsChecked[t]||(this.config.declarationsChecked[t]=e,this.observer.notify(this.events.DECLARATION_CHECKED,{id:t}),this.config.ready&&this.config.scoreType===$y.DECLARATION&&this.checkCompletion()&&(this.observer.notify(this.events.ALL_DECLARATIONS_CHECKED,{}),this.setCourseComplete()))},r.prototype.makeModal=function(t){return this.a11y.makeModal(t)},r.prototype.releaseModal=function(){return this.a11y.releaseModal()},r.prototype.disableAllTabIndeces=function(){console.warn("Core::disableAllTabIndeces has been deprecated and no longer does anything. Use a core.a11y instead.")},r.prototype.enableAllTabIndeces=function(){console.warn("Core::disableAllTabIndeces has been deprecated and no longer does anything. Use a core.a11y instead.")},r.prototype.getInteractionID=function(t){for(var e=this.config.interactions.length,n=0;n<e;n++)if(this.config.interactions[n].id===t)return n;return null},r.prototype.checkQuizAllAnswered=function(t){var e,n,r=!0;switch(this.config.navigationMode){case Uy.BRANCH:e=this.config.history.steps.length,n=[];for(var i=0;i<e;i++){var o=this.config.history.steps[i].step;if(!0===this.config.stepData[o].score.isScored&&!n.includes(o)){if(!0!==this.config.stepData[o].complete){r=!1;break}n.push(o)}}var a=this.config.currentStep;if(!0===this.config.stepData[a].score.isScored&&!n.includes(a)&&!0!==this.config.stepData[a].complete){r=!1;break}break;case Uy.LINHIST:case Uy.NORMAL:e=this.config.totalSteps;for(i=0;i<=e;i++)if(!0===this.config.stepData[i].score.isScored&&!0!==this.config.stepData[i].complete){r=!1;break}}return r},r.prototype.checkCompletion=function(){var t,e=this.config.currentStep;if(-1===e)return!1;switch(this.config.scoreType){case $y.SLIDE:return e===this.config.totalSteps||e>-1&&!0===this.config.stepData[e].isCompletionPoint;case $y.SLIDE_ONLY:return!0===this.config.stepData[e].isCompletionPoint||e>-1&&e===this.config.totalSteps;case $y.COMPLETION_POINT:return!0===this.config.stepData[e].isCompletionPoint;case $y.SLIDES_COMPLETE:t=this.config.totalSteps;for(var n=0;n<=t;n++)if(!1===this.config.stepData[n].complete)return!1;return!0;case $y.QUIZ:return this.resultManager.allQuizzesComplete();case $y.DECLARATION:return Object.values(this.config.declarationsChecked).every((function(t){return t}))}return!1},r.prototype.createObservable=function(t){void 0===this.observer.observers[t]?this.observer.observers[t]=[]:console.warn("Shell.js: Cannot overwrite existing observable. "+t+" already exists.")},r.prototype.addHTMLTemplates=function(t,e){void 0===e&&(e=!1);for(var n=$(t),r=this.config.htmltemplates,i=0;i<n.length;i++){var o=n[i];if("script"===o.nodeName.toLowerCase()){var a=o.getAttribute("data-template")||"",s=o.getAttribute("data-for")||"",c=-1;if(r[s])for(var u=0;u<r[s].length;u++)if(r[s][u].name===a){c=u;break}if(a.indexOf("partial_")>-1)Handlebars.registerPartial($(o).data("name"),$(o).html().trim());else{r[s]||(r[s]=[]);var l={name:a,for:s,content:$(o).html().trim()};e?-1===c&&r[s].push(l):c>-1?r[s][c]=l:r[s].push(l)}}}},r.prototype.hasHTMLTemplate=function(t,e){if(!this.config.htmltemplates[t])return!1;e||(e=t);for(var n=0;n<this.config.htmltemplates[t].length;n++)if(this.config.htmltemplates[t][n].name===e)return!0;return!1},r.prototype.getHTMLTemplate=function(t,e){if(this.config.htmltemplates[t]){e||(e=t);for(var n=0;n<this.config.htmltemplates[t].length;n++)if(this.config.htmltemplates[t][n].name===e)return this.config.htmltemplates[t][n].content}return""},r.prototype.getCompiledHTMLTemplate=function(t,e){var n="cmp_"+t+"::"+(e||"default");if(this.config.compiledhtmltemplates[n])return this.config.compiledhtmltemplates[n];var r=this.getHTMLTemplate(t,e);if(r){var i=Handlebars.compile(r);return this.config.compiledhtmltemplates[n]=i,i}return null},r.prototype.addModule=function(t,e){return!this.modules[t]&&(this.modules[t]="function"==typeof e?new e(this.shell):e,!0)},r.prototype.addXMLParser=function(t){this.courseLoader.addParser(t)},r.prototype.addSection=function(t,e,n){return!this.config.sections[t]&&(this.config.sections[t]={section:e,parse:n,controllers:{},options:{}},!0)},r.prototype.hasSection=function(t){return!(!this.config.sections[t]||"function"!=typeof this.config.sections[t].section)},r.prototype.createSection=function(t){return this.config.sections[t]&&"function"==typeof this.config.sections[t].section?new this.config.sections[t].section(this.shell,this.config.sections[t].options):null},r.prototype.addBlock=function(t,e,n){return!this.config.blocks[t]&&(this.config.blocks[t]={block:e,parse:n,controllers:{},options:{}},!0)},r.prototype.hasBlock=function(t){return!(!this.config.blocks[t]||"function"!=typeof this.config.blocks[t].block)},r.prototype.createBlock=function(t){return this.config.blocks[t]&&"function"==typeof this.config.blocks[t].block?new this.config.blocks[t].block(this.shell,this.config.blocks[t].options):null},r.prototype.addComponent=function(t,e,n){return!this.config.components[t]&&(this.config.components[t]={component:e,parse:n,controllers:{},hooks:{},options:{}},e.prototype.hooks=this.config.components[t].hooks,!0)},r.prototype.hasComponent=function(t){return!(!this.config.components[t]||"function"!=typeof this.config.components[t].component)},r.prototype.createComponent=function(t){return this.config.components[t]&&this.config.components[t].component?new this.config.components[t].component(this.shell,this.config.components[t].options):null},r.prototype.parseComponentData=function(t,e){return this.parseData(this.config.components[t],e)},r.prototype.parseBlockData=function(t,e){return this.parseData(this.config.blocks[t],e)},r.prototype.parseSectionData=function(t,e){return this.parseData(this.config.sections[t],e)},r.prototype.parseData=function(t,e){var n,r=e.getAttribute("uid")+"";return this.objectDataCache[r]?this.objectDataCache[r]:((n=t&&"function"==typeof t.parse?t.parse.apply(new Eb(this.shell),[e,this.shell]):new Eb(this.shell).parseXML(e)).uid&&(this.objectDataCache[n.uid]=n),n)},r.prototype.addComponentHook=function(t,e,n,r){var i=this.config.components;if(i[e]){var o=i[e].hooks;return o[n]||(o[n]=[]),o[n].push({name:t,exec:r}),!0}return!1},r.prototype.addComponentViewController=function(t,e,n){return!!this.config.components[e]&&(this.config.components[e].controllers[t]={controller:n},!0)},r.prototype.registerStepDataParser=function(t,e){return"string"==typeof t&&"function"==typeof e&&(void 0===this.config.stepDataParsers[t]&&(this.config.stepDataParsers[t]=e,!0))},r.prototype.registerDatasetParser=function(t,e,n){return"string"==typeof t&&void 0!==e&&(t=t.toLowerCase(),void 0===this.config.datasetParsers[t]&&(this.config.datasetParsers[t]={parse:e,control:n},"object"===Uv(e)&&(this.config.datasetParsers[t].parse.multipass=!0),!0))},r.prototype.getDataset=function(t){return this.config.dataSets[t]},r.prototype.addResource=function(t){var e=t.src,n=t.name,r=t.category,i=void 0===r?"none":r,o=t.step,a=void 0===o?"0":o;if(this.config.resources.find((function(t){return t.name===n&&t.src===e})))return!1;var s=e;return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("//")||(s=this.getAssetPath(e,"resources")),this.config.resources.push({src:e,fullpath:s,name:n,category:i,step:a}),!0},r.prototype.registerTextVariable=function(t,e){if("string"!=typeof t||"function"!=typeof e)return!1;for(var n=this.config.variables.length,r=0;r<n;r++)if(this.config.variables[r].name===t)return!1;return this.config.variables.push({name:t,replacement:e}),!0},r.prototype.registerTextModifier=function(t,e){return window.__spark_env!==By.PROD&&console.error("MIGRATION WARNING: core.registerTextModifier deprecated. Use core.addTextModifier instead."),this.addTextModifier(t,e)},r.prototype.addTextModifier=function(t,e){return this.textModifiers.add(t,e)},r.prototype.registerAction=function(t,e){return this.actions.add(t,e)},r.prototype.setText=function(t,e,n){if(void 0===n&&(n={}),e){"boolean"==typeof n&&(n={processURLs:n});var r=n.processURLs,i=void 0===r||r,o=n.dynamicvariables,a=void 0===o?{}:o;e=this.replaceVariableKeywords(e,this.config.currentStep,{dynamicvariables:a}),e=this.shortcode.parseShortcodes(e),i&&(e=this.updateRelativeURLs(e)),e=this.utils.sanitizeHTMLChunk(e),t=$(t).empty().addClass("core-text").append(e),this.textModifiers.executeOn(t),this.observer.notify(this.events.TEXT_ADDED,{textElement:t})}},r.prototype.setSimpleText=function(t,e,n){console.warn("Core.setSimpleText is deprecated. Use Core.setText instead."),this.setText(t,e,n)},r.prototype.parseText=function(t){var e=$("<div/>");return this.setText(e,t),e.find("*").off(),e.html()},r.prototype.updateImgSrc=function(t){var e=this;return t=t.replace(Jy.REGEXP_SRC,(function(t){var n=5,r="src";if(0===t.indexOf("srcset")&&(n=8,r="srcset"),t.indexOf("//")!==n&&-1===t.indexOf("http://")&&-1===t.indexOf("https://")){if("srcset"===r){for(var i=(t=t.substring(8,t.length-1)).split(", "),o=0;o<i.length;o++){var a=e.extractFilePathInfo(i[o]);i[o]=e.getAssetPath(a.location+a.filename,a.path)}t=i.join(", ")}else{a=e.extractFilePathInfo(t.substring(5,t.length-1));t=e.getAssetPath(""+a.location+a.filename,a.path)}t=r+'="'+t+'"'}return t}))},r.prototype.updateRelativeURLs=function(t){var e=this;return t=(t=this.updateImgSrc(t)).replace(Jy.REGEXP_HREF,(function(t){if(6!==t.indexOf("//")&&-1===t.indexOf("http://")&&-1===t.indexOf("https://")&&-1===t.indexOf("mailto:")&&t.indexOf(".")>-1){if(t.indexOf("global:")>-1)return'href="'+e.config.globalPath+encodeURI(t.substring(14,t.length-1))+'"';if(t.indexOf("project:")>-1)return'href="'+encodeURI(t.substring(14,t.length-1))+'"';if(""!==e.config.dataPath){var n=e.extractFilePathInfo(t.substring(6,t.length-1));return'href="'+e.getAssetPath(n.filename,n.path)+'"'}return t}return t}))},r.prototype.getAssetPath=function(t,e,n){if(void 0===n&&(n="course"),!t)return"";if(t.match(/^((http(s)?:)|(\/\/){1}|(www.){1})/i))return t;if(void 0!==this.config.assetRegistry[t])return this.config.assetRegistry[t];switch(t.startsWith("global:")?(t=t.substring(7),n="global"):t.startsWith("project:")&&(t=t.substring(8),n="project"),n){case"global":return encodeURI(this.config.globalPath+(e?e+"/":"")+t);case"project":return encodeURI((e?e+"/":"")+t);case"course":default:return encodeURI(this.config.dataPath+(e?e+"/":"")+t)}},r.prototype.extractFilePathInfo=function(t){var e=t.split("/"),n=e.pop()||"",r=e.join("/").split(":").reverse();return{filename:n,path:r[0],location:r[1]?r[1]+":":"",extension:n.indexOf(".")>-1?n.slice(n.lastIndexOf(".")+1):""}},r.prototype.getTranslation=function(t,e,n){var r=t;return null!==this.config.translation&&(e=e||this.config.language||this.config.defaultLanguage,r=this.config.translation[e][t]||t),"object"===Uv(n)&&Object.entries(n).forEach((function(t){var e=t[0],n=t[1];r=r.replace(new RegExp("{{"+e+"}}","gi"),n)})),r},r.prototype.translateElement=function(t,e){var n=this,r=$(t);$(r.contents()).add(r.find("span").contents()).filter((function(t){return 3==t.nodeType&&!!t.textContent.trim()})).each((function(t,r){$(r).replaceWith(n.getTranslation(r.textContent.trim(),e))}))},r.prototype.switchLanguage=function(t){var r=this;if(null!==this.config.translation&&void 0!==this.config.translation[t]){var i=this.config.language;return this.config.language=t,this.runModuleFunction("reporting","setStateData",["",function(){return e(r,void 0,void 0,(function(){var e,r,o;return n(this,(function(n){switch(n.label){case 0:this.runModuleFunction("reporting","setLanguage",[t]),this.observer.notify(this.events.SET_LANGUAGE,{language:t}),this.courseLoader.reset(),this.componentRenderer.clearCache(),e=this.config.currentStep,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.startCourseLoad()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),alert(r.message),[2,this.switchLanguage(i)];case 4:return o=this.getNextAvailableStep(0),this.observer.notify(this.events.LANGUAGE_CHANGED,{language:t}),0===e?this.modules.renderer.reloadStep(this.config.stepData[o],(function(){})):this.gotoStep(o,!1,!1),[2]}}))}))}]),!0}return!1},r.prototype.switchColourMode=function(t){$("html").removeClass("colourmode-"+this.config.colourMode).addClass("colourmode-"+t),this.config.colourMode=t,this.observer.notify(this.events.SET_COLOURMODE,{mode:t})},r.prototype.checkDisplayConditions=function(t){return this.conditionsManager.check(t)},r.prototype.replaceVariableKeywords=function(t,e,n){if(void 0===n&&(n={}),!t)return t;"boolean"==typeof n&&(n={bindable:n});var r=n.bindable,i=void 0===r||r,o=n.dynamicvariables,a=void 0===o?{}:o;e=void 0===e?this.config.currentStep:e;for(var s,c,u=this.config.variables.length,l=0;l<u;l++)s=this.config.variables[l],t.indexOf(s.name)>-1&&(t=t.replace(new RegExp("\\{\\{"+s.name+"\\}\\}","g"),(i?"<span class='"+this.config.variableElementClasses.join(" ")+"' data-bind-":"")+s.name+"='value'>"+s.replacement(e,a[s.name])+(i?"</span>":"")));for(var f in this.config.userVariables)Object.prototype.hasOwnProperty.call(this.config.userVariables,f)&&(s="{{"+f+"}}",t.indexOf(s)>-1&&(c=!0===this.utils.hasModule("dataBinding")?this.replaceVariableKeywords(""+this.config.userVariables[f].get("value"),e,n):this.replaceVariableKeywords(""+this.config.userVariables[f],e,n),t=t.replace(new RegExp("\\{\\{"+f+"\\}\\}","g"),(i?"<span class='"+this.config.variableElementClasses.join(" ")+"' data-bind-"+f+"='value' aria-live='polite'>":"")+c+(i?"</span>":""))));for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(t=t.replace(new RegExp("\\{\\{"+f+"\\}\\}","g"),a[f]));return t},r.prototype.getVariable=function(t,e,n){switch(e){case"sys":return this.getSystemVar(t,n||0);case"user":return this.getUserVar(t);default:return Object.prototype.hasOwnProperty.call(this.config.userVariables,t)?this.getUserVar(t):this.getSystemVar(t,n||0)}},r.prototype.getSystemVar=function(t,e){for(var n=this.config.variables.length,r=0;r<n;r++){var i=this.config.variables[r];if(i.name===t)return i.replacement(e)}return""},r.prototype.getUserVar=function(t){return Object.prototype.hasOwnProperty.call(this.config.userVariables,t)?!0===this.utils.hasModule("dataBinding")?this.config.userVariables[t].get("value"):this.config.userVariables[t]:""},r.prototype.showFullscreenOverlay=function(t,e,n,r){var i=this,o=$("#fsOverlay"),a="Cubic.easeOut",s=300,c="fade";void 0!==e&&"object"===Uv(e)?(a=e.ease||a,s=e.speed||s,c=e.type||c):"string"==typeof e&&(c=e),r=r||"",o.length>0&&(o.detach(),this.observer.notify(this.events.OVERLAY_REMOVED,{reference:this.config.lastOverlayRef})),this.config.lastFocusElement=document.activeElement,this.config.lastOverlayRef=r,$("<div id='fsOverlay'></div>").append(t).appendTo(this.config.overlayLocation),$("body").addClass("overlayShowing"),this.hideFSHandler=function(t){27===t.keyCode&&i.removeFullscreenOverlay()},$(document).on("keyown",this.hideFSHandler),this.disablePageScroll(),this.makeModal($("#fsOverlay")[0]),"none"!==c?this.shell.transitions[c]("#fsOverlay",Py.ON,{x:0,y:0,ease:a,speed:s},(function(){"function"==typeof n&&n(),i.observer.notify(i.events.OVERLAY_ADDED,{reference:r})})):(o.show(0),this.observer.notify(this.events.OVERLAY_ADDED,{reference:r}))},r.prototype.removeFullscreenOverlay=function(t){var e=$("#fsOverlay"),n="Cubic.easeOut",r=300,i="fade";this.hideFSHandler&&$(document).off("keydown",this.hideFSHandler),void 0!==t&&"object"===Uv(t)?(n=t.ease||n,r=t.speed||r,i=t.type||i):"string"==typeof t&&(i=t),$("body").removeClass("overlayShowing"),this.releaseModal(),this.enablePageScroll(),"none"!==i?this.shell.transitions[i]("#fsOverlay",Py.OFF,{ease:n,speed:r},(function(){e.detach()})):e.detach(),this.observer.notify(this.events.OVERLAY_REMOVED,{reference:this.config.lastOverlayRef}),this.config.lastOverlayRef="",null!==this.config.lastFocusElement&&this.config.accessibility&&(this.config.lastFocusElement.focus(),this.config.lastFocusElement=null)},r.prototype.disablePageScroll=function(t){if(void 0===t&&(t=!1),!this.config.pageScrollingDisabled){var e=this.utils.getScrollContainer(),n=null,r={x:0,y:0};n=e!==document.scrollingElement&&e!==document.documentElement?$(e).children("div:first"):$("#shellcontainer");var i=e.getBoundingClientRect();r.y=i.top,this.bodyScrollOffset={target:e,content:n,value:e.scrollTop},this.bodyScrollOffset.hideScrollbar=t;var o=$(n)[0].getBoundingClientRect();n.css({top:-1*this.bodyScrollOffset.value+r.y+"px",position:"fixed",width:o.width+"px",height:o.height+"px","min-height":"0"}),this.bodyScrollOffset.target.scrollTop=0,t&&$(this.bodyScrollOffset.target).css("overflow","hidden"),this.config.pageScrollingDisabled=!0}},r.prototype.enablePageScroll=function(){this.bodyScrollOffset&&this.config.pageScrollingDisabled&&(this.bodyScrollOffset.content.css({top:"",position:"",width:"",height:"","min-height":""}),this.bodyScrollOffset.hideScrollbar&&$(this.bodyScrollOffset.target).css("overflow",""),this.bodyScrollOffset.target.scrollTop=this.bodyScrollOffset.value,this.bodyScrollOffset=null,this.config.pageScrollingDisabled=!1)},r.prototype.runModuleFunction=function(t,e,n){if(!this.utils.hasModule(t))return!1;if("function"!=typeof this.modules[t][e])return"reporting"!==t&&console.warn("Warning::runModuleFunction - function ["+e+"] doesn't exists on module ["+t+"]."),!1;try{return Array.isArray(n)?this.modules[t][e].apply(null,n):this.modules[t][e](n)}catch(n){return console.error("runModuleFunction: ",t,e),console.error(n),!1}},r.prototype.executeShellDirective=function(t,e){for(var n=t.split("."),r=null,i=null,o=null,a=this.shell,s=0;s<n.length;s++){if(0===s&&a[n[s]])r=a[n[s]];else{if(!r[n[s]])return console.log("Shell: directive '"+t+"' is not valid. Can't find: "+n[s]),null;i=r,r=r[n[s]]}if(s===n.length-1){if("function"!=typeof r)return console.log("Shell: directive '"+t+"' did not result in a function"),null;o=r.apply(this,e)}}return{directive:t,object:i,method:r,result:o}},r.prototype.initialiseStep=function(t,e){null===this.config.stepData[t].component?this.modules.renderer.initialiseStep(this.config.stepData[t],e):"function"==typeof e&&e()},r.prototype.getCourseState=function(){return this.courseState.getCourseState()},r.prototype.setCourseState=function(t){return this.courseState.setCourseState(t)},r.prototype.resetCourseState=function(r,i){var o=this;void 0===r&&(r={}),void 0===i&&(i=0);var a=t({datasets:!0,pages:!0,modules:!0,quizresults:!0,objectives:!0,customstate:!0,history:!0,variables:!0},r),s=this.modules,c=this.config,u=c.dataSets,l=c.stepData,f=c.history,d=c.state,p=c.userVariables;this.runModuleFunction("reporting","setStateData",["",function(){return e(o,void 0,void 0,(function(){var t,e,r;return n(this,(function(n){if(a.datasets&&Object.values(u).forEach((function(t){"function"==typeof t.reset&&t.reset()})),a.pages&&l.forEach((function(t){if(void 0!==t.component&&"function"==typeof t.component.setResumeData){try{t.component.reset()}catch(t){}t.visited=!1,t.complete=!1,t.scrollX=0,t.scrollY=0,t.data={}}})),a.modules&&Object.values(s).forEach((function(t){"function"==typeof t.reset&&t.reset()})),a.quizresults&&this.resultManager.reset(),a.objectives&&this.objectiveManager.reset(),a.customstate)for(t in d)Object.prototype.hasOwnProperty.call(d,t)&&(d[t].resettable||delete d[t]);if(a.history&&(f.steps=[]),a.variables){for(r in e=!1,p)Object.prototype.hasOwnProperty.call(p,r)&&p[r].get("value")!==p[r].initialValue&&(p[r].set("value",p[r].initialValue),e=!0);e&&this.observer.notify(this.events.USER_VARIABLE_CHANGED,{})}return this.observer.notify(this.events.COURSE_RESET,{options:a}),this.gotoStep(i),[2]}))}))}])},r.prototype.displayPage=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===r&&(r=!0);var i=this.utils.determineStepNumber(t),o=this.config,a=o.totalSteps,s=o.stepGroups,c=o.stepData,u=o.firstStepLoad,l=o.history,f=this.config.currentStep;if(!(void 0===i||i<0||i>a||i===f)){0===i&&(i=this.pageController.getHomePage());var d=s[c[i].group];if((n||!d||!1!==d.enabled)&&!(f>-1&&i===f)){if(-1===f&&(f=this.pageController.getHomePage(),this.config.currentStep=f),c[f]&&(c[f].currentContent=null),!0===r&&!1===u&&l.steps.push({step:f}),this.config.firstStepLoad=!1,this.observer.notify(this.events.STEP_CHANGING,{currentStep:f,nextStep:i}),c[f]&&c[f].retainScrollPos){var p,h,g=this.utils.getScrollContainer();if(p=g.scrollTop,h=g.scrollLeft,c[f].scrollY=p||0,c[f].scrollX=h||0,document.activeElement instanceof HTMLElement){var v=document.activeElement.getBoundingClientRect();c[f].lastFocus={x:v.left,y:v.top}}}this.setNextPage(i,e,n,r)}}},r.prototype.setNextPage=function(t,e,n,r){var i=this;void 0===e&&(e=!0),void 0===r&&(r=!0),this.config.lastViewedStep=this.config.currentStep,this.config.currentStep=t;this.getPageComponent(t,this.config.stepData[t].template,e,r,(function(){i.state=Tb.READY,i.config.accessibility&&(i.config.stepData[t].retainScrollPos&&i.config.stepData[t].lastFocus?setTimeout((function(){var e=i.config.stepData[t].lastFocus,n=e.x,r=e.y,o=document.elementFromPoint(n,r);if(o){var a=$(o);if(void 0!==a.attr("tabindex"))return a.focus();if(a.find("[tabindex='0']").length)return a.find("[tabindex='0']").focus();var s=a.parents("[tabindex='0']")[0];s&&s.focus()}}),150):i.utils.focusFirstElement()),i.setGroupVisited(i.config.stepData[t].group),i.observer.notify(i.events.STEP_CHANGED,{step:t}),i.config.stepData[t].isEntry=!1}))},r.prototype.getPageComponent=function(t,e,n,r,i){var o=this;this.utils.hasModule("transition")&&this.shellReady&&n?(this.state===Tb.TRANSITION_PENDING&&"function"==typeof this.modules.renderer.cancel&&this.modules.renderer.cancel(),this.state=Tb.TRANSITION_STARTING,this.modules.transition.start((function(){o.state=Tb.TRANSITION_PENDING,o.loadPageComponent(t,r,(function(){setTimeout((function(){var e=o.config.stepData[t];if(e.retainScrollPos){var n=o.utils.getScrollContainer(),r=e.scrollY;if("string"==typeof r){var a=document.querySelector("[data-uid='"+r+"']");a&&(n.scrollTop=a.offsetTop)}else n.scrollTop=r}o.state=Tb.TRANSITION_FINISHING,o.modules.transition.finish(i)}),10)}))}))):this.loadPageComponent(t,r,i)},r.prototype.loadPageComponent=function(t,e,n){var r=this,i=function(){if(r.observer.notify(r.events.STEP_ADDED_TO_DOM,{step:t}),r.componentRenderer.notifyMountedComponents(),r.runModuleFunction("reporting","setBookmark",r.config.currentStep),r.startPageTimer(),r.config.currentStep>0&&r.enablePageScroll(),r.observer.notify(r.events.STEP_READY,{step:t,recordchange:e}),r.state=Tb.READY,r.config.accessibility){var i=$("#content [tabindex=0]")[0];i&&i.focus()}"function"==typeof n&&n()},o=this.config.stepData[t];this.modules.renderer.clear((function(){o.visited=!0,r.observer.notify(r.events.STEP_BEFOREREADY,{isReload:!0,step:t}),r.modules.renderer.show(o,i)}))},r.prototype.setUserVariable=function(t,e){if(void 0!==this.config.userVariables[t]){var n=void 0;!0===this.utils.hasModule("dataBinding")?"function"==typeof this.config.userVariables[t].set&&e!==(n=this.config.userVariables[t].get("value"))&&this.config.userVariables[t].set("value",e):e!==(n=this.config.userVariables[t])&&(this.config.userVariables[t]=e),e!==n&&this.observer.notify(this.events.USER_VARIABLE_CHANGED,{name:t,value:e})}else alert("Shell.js: Attempted to set a user variable ["+t+"] which is not defined.")},r.prototype.finish=function(){this.config.finished||(this.config.finished=!0,this.runModuleFunction("reporting","endSession"))},r.prototype.exit=function(){this.finish();var t=this.config.exitUrl;t?t.startsWith("https://")&&window.top.location.assign(decodeURIComponent(t)):this.close()},r.prototype.close=function(){this.finish(),!0===this.config.isInIFrame?window.top.close():window.close()},r}(),kb={INIT_LOAD_START:"initLoadStart",INIT_LOAD_PROGRESS:"initLoadProgress",INIT_LOAD_COMPLETE:"initLoadComplete",STEP_CHANGING:"stepChanging",STEP_BEFOREREADY:"stepBeforeReady",STEP_ADDED_TO_DOM:"stepAddedToDOM",COMPONENTS_ADDED_TO_DOM:"componentsAddedToDOM",STEP_READY:"stepReady",STEP_CHANGED:"stepChanged",STEP_COMPLETED:"stepCompleted",STEP_PROGRESS:"stepProgress",STEP_RELOADING:"stepReloading",SECTION_COMPLETE:"sectionComplete",BLOCK_COMPLETE:"blockComplete",COMPONENT_COMPLETE:"componentComplete",COMPONENT_SYNC_INIT:"componentSyncInit",COMPONENT_SYNC:"componentSync",SELECTREVEAL_ITEM_COMPLETE:"selectrevealItemComplete",SELECTREVEAL_COMPLETE:"selectrevealComplete",DATASET_STATE_CHANGE:"datasetStateChange",DATASET_ITEM_STATE_CHANGE:"datasetItemStateChange",DATASET_RESET:"datasetReset",QUIZ_FINISH:"quizFinish",QUIZ_QUESTION_ANSWER:"quizQuestionAnswer",QUIZ_RESET:"quizReset",OBJECTIVE_COMPLETE:"objectiveComplete",OBJECTIVE_PROGRESS:"objectiveProgress",DECLARATION_CHECKED:"declarationChecked",ALL_DECLARATIONS_CHECKED:"allDeclarationsChecked",COURSE_COMPLETED:"courseCompleted",COURSE_RESET:"courseReset",EVERYTHING_READY:"everythingReady",SHELL_INIT:"shellInit",SHELL_READY:"shellReady",SHELL_EXITING:"shellExiting",SET_LANGUAGE:"setLanguage",LANGUAGE_CHANGED:"languageChanged",A11Y_ON:"a11yon",A11Y_OFF:"a11yoff",SET_COLOURMODE:"setColourMode",USER_VARIABLE_CHANGED:"userVariableChanged",PAGE_STRUCTURE_CHANGED:"pageStructureChanged",PAGE_DISPLAY_UPDATED:"pageDisplayUpdated",OVERLAY_ADDED:"overlayAdded",OVERLAY_REMOVED:"overlayRemoved",TEXT_ADDED:"textAdded",TEXT_REMOVED:"textRemoved",POPUP_OPENED:"popupOpened",POPUP_PROGRESS:"popupProgress",POPUP_CLOSED:"popupClosed",POPUP_PAGE_CHANGE:"popupPageChange",MODAL_OPENED:"modalOpened",MODAL_CLOSED:"modalClosed",SHELL_RESIZED:"shellResized",FULL_SCREEN_CHANGE:"fullscreenChange",PAGE_SCROLL:"pageScroll",MUTE:"mute",VOLUME_CHANGED:"volumeChanged",TEXT_TRACK_CHANGED:"textTrackChanged",AUDIO_PLAY:"audioPlay",AUDIO_PAUSE:"audioPause",AUDIO_FINISH:"audioFinish",AUDIO_TIME_UPDATE:"audioTimeUpdate",AUDIO_SEEK_BEGIN:"audioSeekBegin",AUDIO_SEEK_END:"audioSeekEnd",AUDIO_RESUME:"audioResume",AUDIO_CUE_POINT:"audioCuePoint",VIDEO_PLAY:"videoPlay",VIDEO_PAUSE:"videoPause",VIDEO_STOP:"videoStop",VIDEO_SEEK_BEGIN:"videoSeekBegin",VIDEO_SEEK_END:"videoSeekEnd",VIDEO_RESUME:"videoResume",VIDEO_TIME_UPDATE:"videoTimeUpdate",VIDEO_CUE_POINT:"videoCuePoint",VIDEO_FINISH:"videoFinish",ONLINE:"online",OFFLINE:"offline",ASSESS_SUBMIT:"assessSubmit",ASSESS_RESET:"assessReset",ASSESS_INCORRECT:"assessIncorrect",ASSESS_PASS:"assessPass",ASSESS_FAIL:"assessFail",RESULT_INCORRECT:"resultIncorrect",RESULT_PASS:"resultPass",RESULT_FAIL:"resultFail",RESULT_NONE:"resultNone"};var Ab=function(){Shell.addModule("parser_md",(function(t){return{name:"Modular Page Parser",immediate:!0,init:function(){t.core.registerStepDataParser("md",(function(t){var e={};return t=$(t),e.lock="true"===t.find("component").attr("lock"),e.group=t.find("component").attr("group"),e.resources=t.find("> media").find("resource"),e}))}}}))},Db=function(t){Yv(n,t);var e=tm(n);function n(t){var r;return $v(this,n),(r=e.call(this,t)).init(t),r}return Hv(n,[{key:"load",value:function(t,e){var n=this,r=$(this.html);$(t).append("<div class='styles'></div>");var i=r.find(".".concat("standard_md"));this.shell.core.componentRenderer.render({pageid:this.uid,renderid:this.uid,domtarget:i,sectionsdata:this.sections,resumedata:this.resumedata||{},done:function(i){i.initialRender&&(n.loadedSections=i.loadedSections,n.loadedBlocks=i.loadedBlocks,n.loadedComponents=i.loadedComponents,n.resumedata=null,n.shell.config.stepData[n.uid].sections=i.loadedSections),$(t).append(r),n.shell.observer.add(n.shell.events.SECTION_COMPLETE,(function(){n.checkSectionsComplete()}),{id:"STANDARD_MD-"+n.uid}),n.shell.observer.add(n.shell.events.PAGE_STRUCTURE_CHANGED,(function(){n.checkSectionsComplete()}),{id:"STANDARD_MD-"+n.uid}),n.loaded=!0,n.checkSectionsComplete(),e()}})}},{key:"unload",value:function(t){this.shell.observer.removeByID(this.shell.events.SECTION_COMPLETE,"STANDARD_MD-"+this.uid),this.shell.observer.removeByID(this.shell.events.PAGE_STRUCTURE_CHANGED,"STANDARD_MD-"+this.uid),this.loadedSections&&this.loadedSections.forEach((function(t){t.unload()})),t()}},{key:"setResumeData",value:function(t){if(t)try{this.resumedata=JSON.parse(t)}catch(t){this.resumedata=null,SparkAPI.log("Error - standard_md::setResumeData",t)}else this.resumedata=null}},{key:"getResumeData",value:function(){if(!this.loaded)return this.resumedata?JSON.stringify(this.resumedata):"";for(var t={},e=0;e<this.loadedComponents.length;e++)if("getResumeData"in this.loadedComponents[e].component){var n=this.loadedComponents[e].component.getResumeData();n&&(t[this.loadedComponents[e].uid]=n)}return"{}"===(t=JSON.stringify(t))?"":t}},{key:"checkSectionsComplete",value:function(){if(this.loadedSections){for(var t=this.loadedSections,e=0,n=0;n<t.length&&t[n].canMoveOn();n++)e++;e=Math.min(e,t.length),this.shell.core.setStepProgress(this.uid,e,t.length),e>=t.length&&this.shell.core.setStepComplete(this.uid,!0)}}}]),n}(function(){function t(){$v(this,t),this.loadedComponents=[],this.DEFAULT_BLOCK_TYPE="grid"}return Hv(t,[{key:"init",value:function(t){this.shell=t.shell,this.uid=t.id,this.getData(t.data)}},{key:"getData",value:function(t){var e=this,n=$(t.xml);this.html=t.html,this.emptystate=n.find("emptystate").text(),this.settings=this.settings||{},n.find("settings").length>0&&$.each(n.find("settings").get(0).attributes,(function(t,n){e.settings[n.name]=n.value})),this.settings.customStyle&&(this.html=$(this.html).find("> div").addClass(this.settings.customStyle).parent().wrap("<div/>").parent().html()),this.sections=[];for(var r=n.find("sections > section"),i=0;i<r.length;i++){var o=this.shell.core.parseSectionData("section",r[i]);o.children=[],r[i]=$(r[i]);for(var a=r[i].find("> *").filter((function(){return/^block\./i.test(this.nodeName)})),s=0;s<a.length;s++){var c=a[s].nodeName.split(".")[1],u=this.shell.core.parseBlockData(c,a[s]);u.type=c||this.DEFAULT_BLOCK_TYPE,a[s]=$(a[s]);for(var l=a[s].find("> *").filter((function(){return/^cmp\./i.test(this.nodeName)})),f=0;f<l.length;f++){var d=l[f].nodeName.split(".")[1],p=this.shell.core.parseComponentData(d,l[f]);p&&(p.type=d,this.createResultSlots(p),this.addObjectiveContributors(p),this.addDeclarations(p))}o.children.push(u)}this.sections.push(o)}this.shell.core.setStepProgress(this.uid,0,this.sections.length)}},{key:"addDeclarations",value:function(t){var e=this;t.hasDeclaration&&this.shell.core.addDeclaration(t.uid),t.children&&t.children.length&&t.children.forEach((function(t){return e.addDeclarations(t)}))}},{key:"addObjectiveContributors",value:function(t){var e=this;if(t.objectives&&t.objectives.length){for(var n=t.objectives.length-1;n>=0;n--){var r=(""+t.objectives[n].objective).split(",");if(r.length>1){for(var i=0;i<r.length;i++)t.objectives.push({objective:r[i]});t.objectives.splice(n,1)}}for(var o=0;o<t.objectives.length;o++)for(var a=(""+t.objectives[o].objective).split(","),s=0;s<a.length;s++)this.shell.core.objectiveManager.addObjectiveContributor(a[s],t)}t.children&&t.children.length&&t.children.forEach((function(t){return e.addObjectiveContributors(t)}))}},{key:"createResultSlots",value:function(t){var e=this;if(t.savesquizresults){var n=t.settings&&(t.settings.scored||!1),r=t.settings&&t.settings.weight&&parseFloat(t.settings.weight)||1;if(void 0!==t.numscorableobjects)for(var i=0;i<t.numscorableobjects;i++)this.shell.core.resultManager.createResultSlot(t.dataset+"-"+i,n,t.settings.quizid,r,t.dataset);else this.shell.core.resultManager.createResultSlot(t.scoreid||t.dataset,n,t.settings.quizid,r,t.dataset)}t.children&&t.children.length&&t.children.forEach((function(t){return e.createResultSlots(t)}))}},{key:"focus",value:function(){return!1}},{key:"load",value:function(t,e){}},{key:"unload",value:function(t){t()}},{key:"getTemplateProperty",value:function(t){return this[t]}},{key:"setComponentText",value:function(t,e){this.shell.core.setText(this.getComponentElement(t),e)}},{key:"applySuspendData",value:function(){}},{key:"setResumeData",value:function(){}},{key:"getResumeData",value:function(){}},{key:"reset",value:function(){this.loadedSections.forEach((function(t){"function"==typeof t.reset&&t.reset()}))}},{key:"getLoadedComponent",value:function(t){for(var e=0;e<this.loadedComponents.length;e++)if(this.loadedComponents[e].uid===t)return this.loadedComponents[e].component;return null}},{key:"getComponentElement",value:function(t){return $("#cmp"+this.uid+" "+t)}},{key:"canMoveOnFromPage",value:function(){if(!this.loadedSections)return!1;for(var t=this.loadedSections,e=0;e<t.length;e++)if(!t[e].canMoveOn())return!1;return!0}}]),t}());new(function(){function i(e,n,i){var o=this;if(void 0===n&&(n=[]),void 0===i&&(i=[]),this._enableLoadBenchmark=!1,this._modules={},this._widgets={},this._config=function(t){return{shellVersion:"1.2.0",statusMode:zy.C_I,environment:By.DEV,accessibility:!1,complete:!1,theme:"",themeconfig:{},ready:!1,firstStepLoad:!1,enableIntro:!0,dataPath:"",globalPath:"shared/",globalAuthortimePath:"../../~common/assets/",componentRegistry:{},variableConditionComponents:{},assetRegistry:{},htmltemplates:{},compiledhtmltemplates:{},urlVars:{},templateLoadCache:{},preloadAssetCache:{},constructors:{},moduleTitle:"",moduleDescription:"",studentName:"",studentID:"",moduleID:"0",disableskip:!1,disablePageScroll:!1,pageScrollingDisabled:!1,currentStep:-1,nextStep:-1,totalSteps:0,lastViewedStep:-1,timer:{activityStart:Date.now(),stepStart:null},lastFocusElement:null,nextStepTarget:null,navigationMode:Uy.NORMAL,history:{currentLocation:0,steps:[]},isInIFrame:!1,isiPad:null!==navigator.userAgent.match(/iPad/i)||Zy,isiOS:Ky||Zy,isAndroid:null!==navigator.userAgent.match(/android/i),isResponsive:!0,lockout:!0,exitUrl:"",rememberPageHistory:!0,scormCommit:!0,declarationsChecked:{},initialSuspendData:null,compressSuspendData:!0,compressionVersion:Fy.V5,resources:[],currentAttempt:1,totalScore:0,negativeMarking:!1,interactions:[],globalPass:80,sections:{},blocks:{},components:{},stepGroups:{length:0},stepIDMap:{},stepData:[],dataSets:{},stepDataParsers:{},datasetParsers:{},netOnline:!1,lastOverlayRef:"",overlayLocation:"body",caseStudyLocation:"#shell",audio:!0,globalVolume:1,globalVolumeIsSet:!1,mediaTextTrack:{label:null,language:null,kind:null},colourMode:Vy.STANDARD,moduleSettings:{},displayNetworkStatusMessages:!0,netOnlineMessage:"You are now connected to the internet.",netOfflineMessage:"You are not connected to the internet - your progress may not be saved.",defaultLanguage:"en_AU",supportedLanguages:[],language:null,translation:null,scoreType:$y.SLIDE,finished:!1,extraData:{},triggerRootMargin:"-50px",textElementClasses:[],textElementAtts:[],swatches:{},expressions:{},variableElementClasses:["bound-variable"],variables:Yy(t),sysVariableUserSet:{},userVariables:{},state:{},references:[],glossary:[]}}(this),window.__spark_env!==By.PROD){var a=$.fn.jquery.split(".").map((function(t){return parseInt(t,10)}));(a[0]<3||a[0]>=3&&a[1]<5)&&alert("The loaded version of jQuery is out-of-date (v"+$.fn.jquery+"). Please update the shell to load 'global/js/jquery/jquery.js'")}for(var s in window.components={},window.moduleViews={},this._observer=new Dy,kb)kb.hasOwnProperty(s)&&this.observer.register(kb[s]);this._core=new Ib(this),this._utils=new Ny(this),this._transitions=new Qy(this),n&&n.length&&n.forEach((function(t){var e;if(t.component&&t.type&&(o.core.addComponent(t.type,t.component,t.parser),(null===(e=t.viewcontrollers)||void 0===e?void 0:e.length)&&t.viewcontrollers.length%2==0))for(var n=0;n<t.viewcontrollers.length;n+=2)o.core.addComponentViewController(t.viewcontrollers[n],t.type,t.viewcontrollers[n+1])})),i&&i.length&&i.forEach((function(t){t.module&&t.name&&o.core.addModule(t.name,t.module)}));var c=function(t){var e=t.core,n=t.config,r=t.observer,i=t.events,o=t.utils;return{close:function(){e.close()},exit:function(){e.exit()},goto:function(t){var n=t.options.page;e.gotoStep(n)},next:function(){e.nextStep()},previous:function(){e.previousStep()},lastViewed:function(){e.lastViewedStep()},openURL:function(t){var n=t.options.url;if(0!=n.indexOf("mailto:")){if(0!==n.indexOf("//")&&-1==n.indexOf("http://")&&-1==n.indexOf("https://")&&-1==n.indexOf("mailto:"))if(n.indexOf("project:")>-1)n=n.substring(8);else if(n.indexOf("global:")>-1)n=n.substring(7);else{var r=e.extractFilePathInfo(n);n=e.getAssetPath(r.filename,r.path)}window.open(n)}else document.location.href=n},enableNext:function(t){t.options.enable?e.runModuleFunction("navigation","enableNext"):e.runModuleFunction("navigation","disableNext")},enablePrevious:function(t){t.options.enable?e.runModuleFunction("navigation","enablePrevious"):e.runModuleFunction("navigation","disablePrevious")},setUserVariable:function(t){var a=t.options,s=a.varname,c=a.value,u=a.fromexp,l=a.fromvar;if(void 0!==n.userVariables[s]){var f=c;if("@@expression"===f)try{f=n.expressions[u]()}catch(t){f="Invalid expression"}else"@@variable"===f&&(f=e.replaceVariableKeywords("{{"+l+"}}"));!0===o.hasModule("dataBinding")?n.userVariables[s].set("value",f):n.userVariables[s]=f,r.notify(i.USER_VARIABLE_CHANGED,{name:s,value:f})}},addclass:function(t){var e=t.options,n=e.element,r=e.classname;$(n).addClass(r)},removeclass:function(t){var e=t.options,n=e.element,r=e.classname;$(n).removeClass(r)},scrollto:function(t){var e=t.options,n=e.selector,r=e.offset,i=e.delay,a=e.speed,s=e.centre;o.scrollToElement(n,{offset:r,delay:i,speed:a,centre:s})},showSRItem:function(n){var r=n.options,i=r.dataset,o=r.item,a=void 0===o?0:o,s=e.getDataset(i),c=s.type();if("srm"===c||"sr"===c){if("string"==typeof a)if(isNaN(+a)){for(var u=s.getNumItems(),l=0;l<u;l++)if(i+"-"+s.getItemData(l).uid===a){a=l;break}}else a=+a;var f=s.getItemData(a);if(f){var d="string"==typeof f.content?"popup":"modpopup";t.config.stepData[t.config.currentStep].currentContent=f,t.core.runModuleFunction("srDatasetToPopup","show",[d,i,a,{triggerElement:null,onComplete:function(){}}])}}},playSound:function(t){var n=t.options,r=n.soundid,i=n.effect,o=void 0===i?"crossFade":i,a=n.loop,s=void 0!==a&&a,c=n.restartIfPlaying,u=void 0!==c&&c;e.runModuleFunction("soundMixer","playSound",[r,{effect:o,loop:s,restartIfPlaying:u}])},stopSound:function(t){var n=t.options,r=n.soundid,i=n.effect,o=void 0===i?"fadeOut":i;e.runModuleFunction("soundMixer","stopSound",[r,{effect:o}])},playSoundTrack:function(t){var n=t.options,r=n.trackid,i=n.effect,o=void 0===i?"fadeOut":i;e.runModuleFunction("soundMixer","playTrack",[r,{effect:o}])},stopSoundTrack:function(t){var n=t.options,r=n.trackid,i=n.effect,o=void 0===i?"fadeOut":i;e.runModuleFunction("soundMixer","stopTrack",[r,{effect:o}])},stopAllSounds:function(t){var n=t.options.effect,r=void 0===n?"fadeOut":n;e.runModuleFunction("soundMixer","stop",[{effect:r}])},javascript:function(t){var e=t.options,n=e.expression,r=e.params,i=void 0===r?[]:r;new Function(n).apply(void 0,i)},setNextStepTarget:function(t){var e=t.options.target;n.stepData[n.currentStep].nextStepTarget=e||null},runModuleFunction:function(t){var n=t.options,r=n.modulename,i=n.func,o=n.params;r&&i&&e.runModuleFunction(r,i,o)}}}(this);Object.keys(c).forEach((function(t){o._core.actions.add(t,c[t])})),window.SparkAPI=function(e){var n={courseTitle:function(){return e.config.moduleTitle},currentStep:function(){return e.config.currentStep},currentStepID:function(){var t=e.config.stepIDMap,n=e.config.currentStep;for(var r in t)if(t.hasOwnProperty(r)&&t[r]==n)return r},currentStepType:function(){return e.config.stepData[e.config.currentStep].type},currentStepTitle:function(){return e.config.stepData[e.config.currentStep].title},currentGroup:function(){var n=e.config.stepGroups[e.config.stepData[e.config.currentStep].group];return n?t({},n):null},totalSteps:function(){return e.config.totalSteps},getStepComplete:function(t){var n=e.config.stepData[t];return n?n.complete:null},getStepData:function(t){var n=e.config.stepData[t];return n?{classList:n.classList,complete:n.complete,forceLockBack:n.forceLockBack,forceLockNext:n.forceLockNext,group:n.group,gui:Object.assign({},n.gui),guid:n.guid,id:n.id,indexed:n.indexed,isCompletionPoint:n.isCompletionPoint,isEntry:n.isEntry,lockBack:n.lockBack,lockNext:n.lockNext,moduleSettings:Object.assign({},n.moduleSettings),progress:Object.assign({},n.progress),references:n.references,retainScrollPos:n.retainScrollPos,title:n.title,type:n.type,uniqueDiv:n.uniqueDiv,labels:n.labels,visited:n.visited}:null},getStepsInGroup:function(t){return e.config.stepData.filter((function(e){return e.group===t})).map((function(t){return t.id}))},getPageTargets:function(t){return void 0===t&&(t=e.config.currentStep),e.config.stepData[t].nextStepTargets||[]},lastViewedStep:function(){return e.config.lastViewedStep},getStartTime:function(){return e.config.timer.activityStart},getSessionDuration:function(){return Date.now()-e.config.timer.activityStart},getComponent:function(t){return e.config.componentRegistry[t]?e.config.componentRegistry[t].__public||{}:null},formatDuration:function(t){return e.utils.msToTime(t,!0)},activityID:function(){return e.config.moduleID},dataPath:function(){return e.config.dataPath},getAssetPath:function(t,n){return e.core.getAssetPath(t,n)},events:function(){return e.events},disablePageScroll:function(){return e.core.disablePageScroll()},enablePageScroll:function(){return e.core.enablePageScroll()},a11y:{makeInert:function(t){return e.core.a11y.makeInert(t)},makeActive:function(t){return e.core.a11y.makeActive(t)},makeSubtreeInert:function(t){return e.core.a11y.makeSubtreeInert(t)},makeSubtreeActive:function(t){return e.core.a11y.makeSubtreeActive(t)},isInert:function(t){return e.core.a11y.isInert(t)},getTabIndex:function(t){return e.core.a11y.getTabIndex(t)},isFocussable:function(t){return e.core.a11y.isFocussable(t)}},makeModal:function(t){return e.core.makeModal(t)},releaseModal:function(){return e.core.releaseModal()},scrollToElement:function(t,n,r){return e.utils.scrollToElement(t,n,r)},scrollElementParentBy:function(t,n,r){return e.utils.scrollToElement(t,n,r)},audioMixer:{getVolume:function(){return e.config.globalVolume},setVolume:function(t){var n=e.utils.hasModule("soundMixer"),r=Math.max(0,Math.min(t,1));if(n)return e.modules.soundMixer.setVolume(r);e.observer.notify(e.events.VOLUME_CHANGED,{sourceType:"sparkAPI",component:null,volume:r})},getSounds:function(){if(e.utils.hasModule("soundMixer"))return e.modules.soundMixer.getSources()},playSound:function(t,n){e.utils.hasModule("soundMixer")&&e.modules.soundMixer.playSound(t,n)},stopSound:function(t,n){e.utils.hasModule("soundMixer")&&e.modules.soundMixer.stopSound(t,n)},stopAllSounds:function(t){e.utils.hasModule("soundMixer")&&e.modules.soundMixer.stop(t)}},getQuizQuestionResponse:function(t,n){return t?(n||(n="default"),e.core.resultManager.getResponseByID(t,n)):(console.warn("SparkAPI.getQuizQuestionResponse :: responseid not provided."),"")},getQuizQuestionScore:function(t,n){return t?(n||(n="default"),e.core.resultManager.getScoreByID(t,n)):(console.warn("SparkAPI.getQuizQuestionScore :: scoreid not provided."),0)},getQuizScore:function(t){return t||(t="default"),e.core.resultManager.getScore(t)},getQuizPassRate:function(t){return t||(t="default"),e.core.resultManager.quizzes[t].passRate},areAllQuizQuestionsAnswered:function(t,n){return t||(t="default"),e.core.resultManager.allQuizQuestionsAnswered(t,n)},resetQuiz:function(t,n){return t||(t="default"),e.core.resultManager.resetQuiz(t,n)},getObjectiveStatus:function(t){return e.core.objectiveManager.getObjectiveStatus(t)},getObjectives:function(){var t=Object.assign({},e.core.objectiveManager.getObjectives());return Object.keys(t).forEach((function(e){t[e]=Object.assign({},t[e]);var n={};Object.keys(t[e].contributors).forEach((function(t){n[t]=t})),t[e].contributors=n})),t},maxScore:function(){return 100},globalPassRate:function(){return e.config.globalPass},currentScore:function(){return e.config.totalScore||0},urlVariables:function(){return e.config.urlVars},getVariable:function(t){return e.core.getVariable(t)},setVariable:function(t,n){return e.core.setUserVariable(t,n)},getUserVariable:function(t){return n.getVariable(t)},setUserVariable:function(t,e){return n.setVariable(t,e)},finish:function(){return e.core.finish()},close:function(){return e.core.close()},gotoStep:function(t,n){return n=void 0===n||n,e.core.gotoStep(t,!0,n)},forceGotoStep:function(t,n){return e.core.forceGotoStep(t,n)},gotoHome:function(){return e.core.gotoHome()},nextStep:function(){return e.core.nextStep()},previousStep:function(){return e.core.previousStep()},refreshStep:function(t,n){return e.core.refreshStep(t,n)},callStepFunction:function(t,n){return"function"==typeof e.config.stepData[e.config.currentStep].component[t]?e.config.stepData[e.config.currentStep].component[t](n):null},getGroups:function(){var t=e.config.stepGroups,n=[];for(var r in t)if("length"!==r&&t.hasOwnProperty(r)){var i=t[r];i.id&&n.push($.extend({},i))}return n.sort((function(t,e){return t.index<e.index?-1:t.index>e.index?1:0})),n},getStepTitles:function(){return e.config.stepData.map((function(t){return t.title}))},setNextStepTarget:function(t,n){void 0===n&&(n="Continue"),e.config.stepData[e.config.currentStep].nextStepTarget=t||null,e.config.stepData[e.config.currentStep].nextStepTargets&&(e.config.stepData[e.config.currentStep].nextStepTargets=[{label:e.core.getTranslation(n),page:t,uid:"SNST"+Math.round(1e5*Math.random())}])},enableNext:function(t){t?e.core.runModuleFunction("navigation","enableNext"):e.core.runModuleFunction("navigation","disableNext")},enableStepGroup:function(t){for(var n in t=""+t,e.config.stepGroups)if("number"!=typeof e.config.stepGroups[n]&&e.config.stepGroups[n].id===t)return void(e.config.stepGroups[n].enabled=!0)},disableStepGroup:function(t){for(var n in t=""+t,e.config.stepGroups)if("number"!=typeof e.config.stepGroups[n]&&e.config.stepGroups[n].id===t)return void(e.config.stepGroups[n].enabled=!1)},checkGroupCompleted:function(t){return t=""+t,e.core.checkGroupCompleted(t)},checkCompletion:function(){return e.core.checkCompletion()},setLockout:function(t){void 0!==t&&(e.config.lockout=!!t)},storeData:function(t,n,r,i){void 0===i&&(i=!1),!i&&e.config.state[t+n]||(e.config.state[t+n]={key:n,value:r,persistent:!0,resettable:!1})},getStoredData:function(t,n){return e.config.state[t+n]?e.config.state[t+n].value:e.config.stepData[t].data[n]},setState:function(t,n,r){var i=void 0===r?{}:r,o=i.persistent,a=void 0===o||o,s=i.resettable,c=void 0===s||s;e.config.state[t]={key:t,value:n,persistent:a,resettable:c}},getState:function(t){if(e.config.state[t])return e.config.state[t].value},getStudentConfig:function(t,n){return void 0!==n?e.config.stepData[t].studentConfig[n]:e.config.stepData[t].studentConfig},setText:function(t,n){return e.core.setText(t,n)},replaceVariableKeywords:function(t,n){return e.core.replaceVariableKeywords(t,n)},updateSourceURLs:function(t){return e.core.updateImgSrc(t)},getTranslation:function(t,n){return e.core.getTranslation(t,void 0,n)},getSRState:function(t){var n=e.core.getDataset(t);if(n){var r=n.type();if("sr"===r||"srm"===r)return n.getState();console.warn("SparkAPI.getSRState() :: Only supports Select and Reveal datasets")}else console.warn("SparkAPI.getSRState() :: Dataset "+t+" not found.")},getSRItem:function(t,n){void 0===n&&(n=0);var r=e.core.getDataset(t);if(r){var i=r.type();if("sr"===i||"srm"===i)return{completeItem:function(){r.setItemState(n,"completed")},data:r.getItemData(n)};console.warn("SparkAPI.getSRItem() :: Only supports Select and Reveal datasets")}else console.warn("SparkAPI.getSRItem() :: Dataset "+t+" not found.")},showSRItem:function(t,n,r){void 0===n&&(n=0),void 0===r&&(r={});var i=e.core.getDataset(t);if(i){var o=i.type();if("sr"===o||"srm"===o){var a=i.getItemData(n);if(a){var s="string"==typeof a.content?"popup":"modpopup";e.config.stepData[e.config.currentStep].currentContent=a,e.core.runModuleFunction("srDatasetToPopup","show",[s,t,n,r])}else console.warn("SparkAPI.showSRItem() :: Content not found at index "+n+".")}else console.warn("SparkAPI.showSRItem() :: Only supports Select and Reveal datasets")}else console.warn("SparkAPI.showSRItem() :: Dataset "+t+" not found.")},addWidget:function(t,n){e.widgets[t]||(e.widgets[t]=n)},showPopup:function(t){var n=e.utils.hasModule("popup"),r=e.utils.hasModule("modpopup");return r&&t.useModpopup||r&&!n?e.modules.modpopup.show(t):n?e.modules.popup.show(t):void 0},hidePopup:function(t){var n=e.utils.hasModule("popup"),r=e.utils.hasModule("modpopup");return r&&t.useModpopup||r&&!n?e.modules.modpopup.hide(t):n?e.modules.popup.hide(t):void 0},addListener:function(t,n,r){e.observer.add(t,n,r)},removeListener:function(t,n){e.observer.removeByID(t,n)},runModuleFunction:function(t,n,r){return e.core.runModuleFunction(t,n,r)},getLanguages:function(){return r(e.config.supportedLanguages)},getDefaultLanguage:function(){return e.config.defaultLanguage},getCurrentLanguage:function(){return e.config.language||e.config.defaultLanguage},setLanguage:function(t){return e.core.switchLanguage(t)},getSwatches:function(){return Object.values(e.config.swatches)},getSwatchValueByName:function(t){var n=Object.entries(e.config.swatches).find((function(e){return e[0],e[1].name===t}));if(n)return n[1].value},getSwatchValueById:function(t){if(e.config.swatches[t])return e.config.swatches[t].value},setSwatchValueById:function(t,n){e.config.swatches[t]?e.config.swatches[t].value=n:console.error("Can't set the value of a swatch that doesn't exist.")},getCachedAsset:function(t){return e.config.preloadAssetCache[t]},accessibility:function(){return e.config.accessibility},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window.__spark_env!==By.PROD&&console.warn.apply(console,t)},error:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window.__spark_env!==By.PROD&&console.error.apply(console,t)},log:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window.__spark_env!==By.PROD&&console.log.apply(console,t)}};return n}(this),window.Shell={init:function(){return o.init()},finish:function(){return o.finish()},addConstructor:function(t,e){o.config.constructors[t]=e},addModule:function(t,e){return o.core.addModule(t,e)},addSection:function(t,e,n){return o.core.addSection(t,e,n)},addBlock:function(t,e,n){return o.core.addBlock(t,e,n)},addComponent:function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=o.core).addComponent.apply(t,e)},addComponentHook:function(t,e,n,r){return o.core.addComponentHook(t,e,n,r)},addComponentViewController:function(t,e,n){return o.core.addComponentViewController(t,e,n)},core:{addModule:function(t,e){return window.__spark_env!==By.PROD&&console.error("MIGRATION WARNING: Shell.core.addModule is deprecated and will eventually be removed. Use Shell.addModule instead."),o.core.addModule(t,e)}}},Ab(),window.components.standard_md=Db,window.components.INTRO=Fm,function(t,e){var n=e,r=[],i=function(t,e){return void 0===e&&(e="window"),"MIGRATION WARNING: Accessing '"+t+"' on the '"+e+"' object has been deprecated and will soon be removed. Please update the script that is trying to access '"+e+"."+t+"' to use SparkAPI or the shell object instead."},o=function(t){e.__spark_env!==By.PROD&&(r.includes(t)||(console.error(t),r.push(t)))};Object.defineProperty(n,"utils",{get:function(){return o(i("utils")),t.utils}}),Object.defineProperty(n,"config",{get:function(){return o(i("config")),t.config}}),Object.defineProperty(t.config,"objectives",{get:function(){return o("MIGRATION WARNING: Accessing objectives on the config object is deprecated and will soon be removed. Use core.objectiveManager.objectives instead."),t.core.objectiveManager.objectives}}),Object.defineProperty(n,"core",{get:function(){return o(i("core")),t.core}}),Object.defineProperty(n,"events",{get:function(){return o(i("events")),t.events}}),Object.defineProperty(n,"observer",{get:function(){return o(i("observer")),t.observer}}),Object.defineProperty(n,"modules",{get:function(){return o(i("modules")),t.modules}}),Object.defineProperty(n,"transitions",{get:function(){return o(i("transitions")),t.transitions}}),Object.defineProperty(e.Shell,"config",{get:function(){return o(i("config","window.Shell")),t.config}}),Object.defineProperty(e.Shell,"utils",{get:function(){return o(i("utils","window.Shell")),t.utils}}),Object.defineProperty(e.Shell,"core",{get:function(){return o(i("core","window.Shell")),t.core}})}(this,window)}return Object.defineProperty(i.prototype,"core",{get:function(){return this._core},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"consts",{get:function(){return Jy},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"observer",{get:function(){return this._observer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"events",{get:function(){return kb},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"utils",{get:function(){return this._utils},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modules",{get:function(){return this._modules},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"transitions",{get:function(){return this._transitions},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"widgets",{get:function(){return this._widgets},enumerable:!1,configurable:!0}),i.prototype.finish=function(){this.core.finish()},i.prototype.init=function(){var t=this;this._enableLoadBenchmark&&console.time("Course load"),void 0!==this.modules.renderer?(void 0===window.console.warn&&(window.console.warn=window.console.log),void 0===window.console.error&&(window.console.error=window.console.log),window.onbeforeunload=function(){return t.core.finish()},window.onunload=function(){return t.core.finish()},this.config.urlVars=this.utils.getURLVars(),this.initialiseImmediateModules((function(){return e(t,void 0,void 0,(function(){var t=this;return n(this,(function(e){return this.core.runModuleFunction("reporting","beginSession",(function(){t.observer.add(t.events.SHELL_READY,(function(){return t.onCourseReady()}),{id:"shellinit"}),delete window.Shell,t.observer.notify(t.events.SHELL_INIT,{}),t.core.initialise()})),[2]}))}))}))):alert("Couldn't find a component renderer.")},i.prototype.onCourseReady=function(){var t=this;this.observer.removeByID(this.events.SHELL_READY,"shellinit");var e=function(e){e||(e=void 0!==t.config.urlVars.bm&&t.utils.determineStepNumber(t.config.urlVars.bm)||0),t.utils.hasModule("preloader")?t.core.runModuleFunction("preloader","remove",(function(){t.confirmBookmark(e)})):t.confirmBookmark(e)};this.utils.hasModule("reporting")?this.core.runModuleFunction("reporting","getBookmark",[function(n,r){void 0===r&&(r="0"),t.initialiseModules((function(){return e(parseInt(r))}))}]):this.initialiseModules(e)},i.prototype.confirmBookmark=function(t){var e=this;void 0===t&&(t=0),!isNaN(t)&&t>0&&this.utils.hasModule("bookmarkPrompt")?this.core.runModuleFunction("bookmarkPrompt","prompt",[t,function(t){e.startCourseAtLocation(t)}]):this.startCourseAtLocation(t)},i.prototype.startCourseAtLocation=function(t){$("#shell").css("display","block"),t>this.config.totalSteps&&(t=this.config.totalSteps);var e=t>0?t:this.core.getNextAvailableStep(0);this.config.stepData[e].isEntry=!0,this.config.firstStepLoad=!0,this.core.gotoStep(e),TweenLite.to($("#transition"),.3,{delay:.2,css:{autoAlpha:0},onComplete:function(){return $("#transition").css("opacity",1)}}),this.config.timer&&(this.config.timer.activityStart=Date.now()),this.config.ready=!0,this._enableLoadBenchmark&&console.timeEnd("Course load"),this.observer.notify(this.events.EVERYTHING_READY,{bookmark:e})},i.prototype.initialiseImmediateModules=function(t){return this.initialiseModules(t,!0)},i.prototype.initialiseModules=function(t,e){var n=this;void 0===e&&(e=!1);var r=0,i=0;Object.keys(this.modules).forEach((function(o){if(n.modules[o].immediate===e)try{n.modules[o].async?(r++,n.modules[o].init((function(){++i>=r&&t()}))):n.modules[o].init()}catch(t){console.error(t),alert("An error occurred while initialising the following module: "+n.modules[o].name+".\n\nMore info: "+t.message)}})),0===r&&t()},i}())(["resources"],[Hm,Wm,Zm,ty,cy,fy,hy,xy,Iy],r([om,Tm,am,sm,lm,cm,um,xm,dm],Bm,[ky,Ay]));window.components.introduction=Um,Shell.addSection("section",Am,(function(t){return this.parseXML(t,(function(t,e){t.type=e.attr("type")||"section",t.label=e.attr("label")||""}))})),Shell.addBlock("grid",Dm)}();
